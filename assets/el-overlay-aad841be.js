import{aT as G,an as le,b0 as fe,ab as me,b1 as j,aC as ve,N as pe,u as J,b2 as ye,b3 as Q,a8 as x,b4 as be,b5 as ge,b6 as he,b7 as Ce,P as U,j as Z,k as _,l as Y,Y as R,b8 as V,D as h,b9 as we,aW as Ee,Q as ke,a3 as ee,ba as Me,m as F,x as A,y as X,B as H,z as w,A as o,E as Be,H as S,G as q,I as De,J as Se,F as K,C as ne,_ as ae,bb as Te,bc as Ie,aw as ie,ay as $e,aU as Le,bd as Ae,aE as oe,T,be as Fe,aD as Oe,bf as Pe,bg as te,aa as Ne,bh as se,ac as ze,ap as Re,bi as Ye,af as We,ae as He,aq as Ue,bj as Ve,bk as Xe,K as je}from"./index-92de9bdc.js";let W;const xe=e=>{var s;if(!G)return 0;if(W!==void 0)return W;const t=document.createElement("div");t.className=`${e}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const n=t.offsetWidth;t.style.overflow="scroll";const r=document.createElement("div");r.style.width="100%",t.appendChild(r);const c=r.offsetWidth;return(s=t.parentNode)==null||s.removeChild(t),W=n-c,W},_e=(e,s,t)=>{let n={offsetX:0,offsetY:0};const r=a=>{const d=a.clientX,v=a.clientY,{offsetX:f,offsetY:p}=n,l=e.value.getBoundingClientRect(),m=l.left,E=l.top,O=l.width,P=l.height,N=document.documentElement.clientWidth,I=document.documentElement.clientHeight,z=-m+f,$=-E+p,k=N-m-O+f,M=I-E-P+p,L=C=>{const i=Math.min(Math.max(f+C.clientX-d,z),k),g=Math.min(Math.max(p+C.clientY-v,$),M);n={offsetX:i,offsetY:g},e.value.style.transform=`translate(${j(i)}, ${j(g)})`},y=()=>{document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",L),document.addEventListener("mouseup",y)},c=()=>{s.value&&e.value&&s.value.addEventListener("mousedown",r)},u=()=>{s.value&&e.value&&s.value.removeEventListener("mousedown",r)};le(()=>{fe(()=>{t.value?c():u()})}),me(()=>{u()})},qe=(e,s={})=>{ve(e)||pe("[useLockscreen]","You need to pass a ref param to this function");const t=s.ns||J("popup"),n=ye(()=>t.bm("parent","hidden"));if(!G||Q(document.body,n.value))return;let r=0,c=!1,u="0";const a=()=>{setTimeout(()=>{Ce(document==null?void 0:document.body,n.value),c&&document&&(document.body.style.width=u)},200)};x(e,d=>{if(!d){a();return}c=!Q(document.body,n.value),c&&(u=document.body.style.width),r=xe(t.namespace.value);const v=document.documentElement.clientHeight<document.body.scrollHeight,f=be(document.body,"overflowY");r>0&&(v||f==="scroll")&&c&&(document.body.style.width=`calc(100% - ${r}px)`),ge(document.body,n.value)}),he(()=>a())},re=e=>{if(!e)return{onClick:U,onMousedown:U,onMouseup:U};let s=!1,t=!1;return{onClick:u=>{s&&t&&e(u),s=t=!1},onMousedown:u=>{s=u.target===u.currentTarget},onMouseup:u=>{t=u.target===u.currentTarget}}},Ke=Z({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:_([String,Array,Object])},zIndex:{type:_([String,Number])}}),Ge={click:e=>e instanceof MouseEvent},Je="overlay";var Ze=Y({name:"ElOverlay",props:Ke,emits:Ge,setup(e,{slots:s,emit:t}){const n=J(Je),r=d=>{t("click",d)},{onClick:c,onMousedown:u,onMouseup:a}=re(e.customMaskEvent?void 0:r);return()=>e.mask?R("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:u,onMouseup:a},[h(s,"default")],V.STYLE|V.CLASS|V.PROPS,["onClick","onMouseup","onMousedown"]):we("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[h(s,"default")])}});const Qe=Ze,ue=Symbol("dialogInjectionKey"),ce=Z({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:Ee},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),eo={close:()=>!0},oo=["aria-label"],to=["id"],so=Y({name:"ElDialogContent"}),lo=Y({...so,props:ce,emits:eo,setup(e){const s=e,{t}=ke(),{Close:n}=Te,{dialogRef:r,headerRef:c,bodyId:u,ns:a,style:d}=ee(ue),{focusTrapRef:v}=ee(Me),f=Ie(v,r),p=F(()=>s.draggable);return _e(r,c,p),(l,m)=>(A(),X("div",{ref:o(f),class:w([o(a).b(),o(a).is("fullscreen",l.fullscreen),o(a).is("draggable",o(p)),o(a).is("align-center",l.alignCenter),{[o(a).m("center")]:l.center},l.customClass]),style:ne(o(d)),tabindex:"-1"},[H("header",{ref_key:"headerRef",ref:c,class:w(o(a).e("header"))},[h(l.$slots,"header",{},()=>[H("span",{role:"heading",class:w(o(a).e("title"))},Be(l.title),3)]),l.showClose?(A(),X("button",{key:0,"aria-label":o(t)("el.dialog.close"),class:w(o(a).e("headerbtn")),type:"button",onClick:m[0]||(m[0]=E=>l.$emit("close"))},[R(o(Se),{class:w(o(a).e("close"))},{default:S(()=>[(A(),q(De(l.closeIcon||o(n))))]),_:1},8,["class"])],10,oo)):K("v-if",!0)],2),H("div",{id:o(u),class:w(o(a).e("body"))},[h(l.$slots,"default")],10,to),l.$slots.footer?(A(),X("footer",{key:0,class:w(o(a).e("footer"))},[h(l.$slots,"footer")],2)):K("v-if",!0)],6))}});var no=ae(lo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const ao=Z({...ce,appendToBody:{type:Boolean,default:!1},beforeClose:{type:_(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),io={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ie]:e=>$e(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},ro=(e,s)=>{const n=Le().emit,{nextZIndex:r}=Ae();let c="";const u=oe(),a=oe(),d=T(!1),v=T(!1),f=T(!1),p=T(e.zIndex||r());let l,m;const E=Fe("namespace",Pe),O=F(()=>{const b={},D=`--${E.value}-dialog`;return e.fullscreen||(e.top&&(b[`${D}-margin-top`]=e.top),e.width&&(b[`${D}-width`]=j(e.width))),b}),P=F(()=>e.alignCenter?{display:"flex"}:{});function N(){n("opened")}function I(){n("closed"),n(ie,!1),e.destroyOnClose&&(f.value=!1)}function z(){n("close")}function $(){m==null||m(),l==null||l(),e.openDelay&&e.openDelay>0?{stop:l}=te(()=>y(),e.openDelay):y()}function k(){l==null||l(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=te(()=>C(),e.closeDelay):C()}function M(){function b(D){D||(v.value=!0,d.value=!1)}e.beforeClose?e.beforeClose(b):k()}function L(){e.closeOnClickModal&&M()}function y(){G&&(d.value=!0)}function C(){d.value=!1}function i(){n("openAutoFocus")}function g(){n("closeAutoFocus")}function B(b){var D;((D=b.detail)==null?void 0:D.focusReason)==="pointer"&&b.preventDefault()}e.lockScroll&&qe(d);function de(){e.closeOnPressEscape&&M()}return x(()=>e.modelValue,b=>{b?(v.value=!1,$(),f.value=!0,p.value=e.zIndex?p.value++:r(),Oe(()=>{n("open"),s.value&&(s.value.scrollTop=0)})):d.value&&k()}),x(()=>e.fullscreen,b=>{s.value&&(b?(c=s.value.style.transform,s.value.style.transform=""):s.value.style.transform=c)}),le(()=>{e.modelValue&&(d.value=!0,f.value=!0,$())}),{afterEnter:N,afterLeave:I,beforeLeave:z,handleClose:M,onModalClick:L,close:k,doClose:C,onOpenAutoFocus:i,onCloseAutoFocus:g,onCloseRequested:de,onFocusoutPrevented:B,titleId:u,bodyId:a,closed:v,style:O,overlayDialogStyle:P,rendered:f,visible:d,zIndex:p}},uo=["aria-label","aria-labelledby","aria-describedby"],co=Y({name:"ElDialog",inheritAttrs:!1}),fo=Y({...co,props:ao,emits:io,setup(e,{expose:s}){const t=e,n=Ne();se({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},F(()=>!!n.title)),se({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},F(()=>!!t.customClass));const r=J("dialog"),c=T(),u=T(),a=T(),{visible:d,titleId:v,bodyId:f,style:p,overlayDialogStyle:l,rendered:m,zIndex:E,afterEnter:O,afterLeave:P,beforeLeave:N,handleClose:I,onModalClick:z,onOpenAutoFocus:$,onCloseAutoFocus:k,onCloseRequested:M,onFocusoutPrevented:L}=ro(t,c);ze(ue,{dialogRef:c,headerRef:u,bodyId:f,ns:r,rendered:m,style:p});const y=re(z),C=F(()=>t.draggable&&!t.fullscreen);return s({visible:d,dialogContentRef:a}),(i,g)=>(A(),q(Xe,{to:"body",disabled:!i.appendToBody},[R(Ve,{name:"dialog-fade",onAfterEnter:o(O),onAfterLeave:o(P),onBeforeLeave:o(N),persisted:""},{default:S(()=>[Re(R(o(Qe),{"custom-mask-event":"",mask:i.modal,"overlay-class":i.modalClass,"z-index":o(E)},{default:S(()=>[H("div",{role:"dialog","aria-modal":"true","aria-label":i.title||void 0,"aria-labelledby":i.title?void 0:o(v),"aria-describedby":o(f),class:w(`${o(r).namespace.value}-overlay-dialog`),style:ne(o(l)),onClick:g[0]||(g[0]=(...B)=>o(y).onClick&&o(y).onClick(...B)),onMousedown:g[1]||(g[1]=(...B)=>o(y).onMousedown&&o(y).onMousedown(...B)),onMouseup:g[2]||(g[2]=(...B)=>o(y).onMouseup&&o(y).onMouseup(...B))},[R(o(Ye),{loop:"",trapped:o(d),"focus-start-el":"container",onFocusAfterTrapped:o($),onFocusAfterReleased:o(k),onFocusoutPrevented:o(L),onReleaseRequested:o(M)},{default:S(()=>[o(m)?(A(),q(no,We({key:0,ref_key:"dialogContentRef",ref:a},i.$attrs,{"custom-class":i.customClass,center:i.center,"align-center":i.alignCenter,"close-icon":i.closeIcon,draggable:o(C),fullscreen:i.fullscreen,"show-close":i.showClose,title:i.title,onClose:o(I)}),He({header:S(()=>[i.$slots.title?h(i.$slots,"title",{key:1}):h(i.$slots,"header",{key:0,close:o(I),titleId:o(v),titleClass:o(r).e("title")})]),default:S(()=>[h(i.$slots,"default")]),_:2},[i.$slots.footer?{name:"footer",fn:S(()=>[h(i.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):K("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,uo)]),_:3},8,["mask","overlay-class","z-index"]),[[Ue,o(d)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var mo=ae(fo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const po=je(mo);export{po as E};
