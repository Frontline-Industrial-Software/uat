import{a as ae,b7 as tt,b8 as st,b9 as at,S as ie,ba as _e,i as nt,V as W,W as T,z as D,B as q,j as O,bb as rt,bc as Ae,bd as ot,be as je,aC as Fe,ap as lt,e as ue,C as $,J as E,G as m,H as a,F as B,T as N,M as _,P as V,Q as S,D as F,E as A,R as it,aj as M,_ as H,Z as Le,an as ne,bf as Ue,a6 as ee,bg as P,a1 as ut,l as z,r as Re,N as ct,aK as dt,ai as Be,ab as K,a3 as R,bh as ft,bi as pt,bj as gt,bk as yt,q as vt,h as bt,ao as te,s as ce,bl as mt,bm as ht,w as de,o as $t,A as wt,a9 as Tt,X as kt,as as St,bn as fe,at as pe}from"./index-8b04992a.js";import{h as De,j as Et,k as Pt,o as Ct,l as Ie,m as Ne,s as Ot,a as _t,n as At,U as ge,p as re,q as X,r as Me,t as jt,S as Ft,u as Lt,d as Ut}from"./validator-98c5170a.js";var ye=Object.create,Rt=function(){function e(){}return function(t){if(!ae(t))return{};if(ye)return ye(t);e.prototype=t;var s=new e;return e.prototype=void 0,s}}();const Bt=Rt;function Dt(e,t){var s=-1,n=e.length;for(t||(t=Array(n));++s<n;)t[s]=e[s];return t}var It=function(){try{var e=tt(Object,"defineProperty");return e({},"",{}),e}catch{}}();const ve=It;function Nt(e,t){for(var s=-1,n=e==null?0:e.length;++s<n&&t(e[s],s,e)!==!1;);return e}function qe(e,t,s){t=="__proto__"&&ve?ve(e,t,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[t]=s}var Mt=Object.prototype,qt=Mt.hasOwnProperty;function Ke(e,t,s){var n=e[t];(!(qt.call(e,t)&&st(n,s))||s===void 0&&!(t in e))&&qe(e,t,s)}function J(e,t,s,n){var g=!s;s||(s={});for(var d=-1,u=t.length;++d<u;){var h=t[d],b=n?n(s[h],e[h],h,s,e):void 0;b===void 0&&(b=e[h]),g?qe(s,h,b):Ke(s,h,b)}return s}function Kt(e){var t=[];if(e!=null)for(var s in Object(e))t.push(s);return t}var Wt=Object.prototype,Gt=Wt.hasOwnProperty;function Ht(e){if(!ae(e))return Kt(e);var t=De(e),s=[];for(var n in e)n=="constructor"&&(t||!Gt.call(e,n))||s.push(n);return s}function oe(e){return Et(e)?Pt(e,!0):Ht(e)}var xt=Ct(Object.getPrototypeOf,Object);const We=xt;function Vt(e,t){return e&&J(t,Ie(t),e)}function Xt(e,t){return e&&J(t,oe(t),e)}var Ge=typeof exports=="object"&&exports&&!exports.nodeType&&exports,be=Ge&&typeof module=="object"&&module&&!module.nodeType&&module,zt=be&&be.exports===Ge,me=zt?at.Buffer:void 0,he=me?me.allocUnsafe:void 0;function Jt(e,t){if(t)return e.slice();var s=e.length,n=he?he(s):new e.constructor(s);return e.copy(n),n}function Yt(e,t){return J(e,Ne(e),t)}var Qt=Object.getOwnPropertySymbols,Zt=Qt?function(e){for(var t=[];e;)_t(t,Ne(e)),e=We(e);return t}:Ot;const He=Zt;function es(e,t){return J(e,He(e),t)}function ts(e){return At(e,oe,He)}var ss=Object.prototype,as=ss.hasOwnProperty;function ns(e){var t=e.length,s=new e.constructor(t);return t&&typeof e[0]=="string"&&as.call(e,"index")&&(s.index=e.index,s.input=e.input),s}function le(e){var t=new e.constructor(e.byteLength);return new ge(t).set(new ge(e)),t}function rs(e,t){var s=t?le(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}var os=/\w*$/;function ls(e){var t=new e.constructor(e.source,os.exec(e));return t.lastIndex=e.lastIndex,t}var $e=ie?ie.prototype:void 0,we=$e?$e.valueOf:void 0;function is(e){return we?Object(we.call(e)):{}}function us(e,t){var s=t?le(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}var cs="[object Boolean]",ds="[object Date]",fs="[object Map]",ps="[object Number]",gs="[object RegExp]",ys="[object Set]",vs="[object String]",bs="[object Symbol]",ms="[object ArrayBuffer]",hs="[object DataView]",$s="[object Float32Array]",ws="[object Float64Array]",Ts="[object Int8Array]",ks="[object Int16Array]",Ss="[object Int32Array]",Es="[object Uint8Array]",Ps="[object Uint8ClampedArray]",Cs="[object Uint16Array]",Os="[object Uint32Array]";function _s(e,t,s){var n=e.constructor;switch(t){case ms:return le(e);case cs:case ds:return new n(+e);case hs:return rs(e,s);case $s:case ws:case Ts:case ks:case Ss:case Es:case Ps:case Cs:case Os:return us(e,s);case fs:return new n;case ps:case vs:return new n(e);case gs:return ls(e);case ys:return new n;case bs:return is(e)}}function As(e){return typeof e.constructor=="function"&&!De(e)?Bt(We(e)):{}}var js="[object Map]";function Fs(e){return _e(e)&&re(e)==js}var Te=X&&X.isMap,Ls=Te?Me(Te):Fs;const Us=Ls;var Rs="[object Set]";function Bs(e){return _e(e)&&re(e)==Rs}var ke=X&&X.isSet,Ds=ke?Me(ke):Bs;const Is=Ds;var Ns=1,Ms=2,qs=4,xe="[object Arguments]",Ks="[object Array]",Ws="[object Boolean]",Gs="[object Date]",Hs="[object Error]",Ve="[object Function]",xs="[object GeneratorFunction]",Vs="[object Map]",Xs="[object Number]",Xe="[object Object]",zs="[object RegExp]",Js="[object Set]",Ys="[object String]",Qs="[object Symbol]",Zs="[object WeakMap]",ea="[object ArrayBuffer]",ta="[object DataView]",sa="[object Float32Array]",aa="[object Float64Array]",na="[object Int8Array]",ra="[object Int16Array]",oa="[object Int32Array]",la="[object Uint8Array]",ia="[object Uint8ClampedArray]",ua="[object Uint16Array]",ca="[object Uint32Array]",w={};w[xe]=w[Ks]=w[ea]=w[ta]=w[Ws]=w[Gs]=w[sa]=w[aa]=w[na]=w[ra]=w[oa]=w[Vs]=w[Xs]=w[Xe]=w[zs]=w[Js]=w[Ys]=w[Qs]=w[la]=w[ia]=w[ua]=w[ca]=!0;w[Hs]=w[Ve]=w[Zs]=!1;function x(e,t,s,n,g,d){var u,h=t&Ns,b=t&Ms,f=t&qs;if(s&&(u=g?s(e,n,g,d):s(e)),u!==void 0)return u;if(!ae(e))return e;var k=nt(e);if(k){if(u=ns(e),!h)return Dt(e,u)}else{var v=re(e),o=v==Ve||v==xs;if(jt(e))return Jt(e,h);if(v==Xe||v==xe||o&&!g){if(u=b||o?{}:As(e),!h)return b?es(e,Xt(u,e)):Yt(e,Vt(u,e))}else{if(!w[v])return g?e:{};u=_s(e,v,h)}}d||(d=new Ft);var c=d.get(e);if(c)return c;d.set(e,u),Is(e)?e.forEach(function(y){u.add(x(y,t,s,y,e,d))}):Us(e)&&e.forEach(function(y,l){u.set(l,x(y,t,s,l,e,d))});var r=f?b?ts:Lt:b?oe:Ie,p=k?void 0:r(e);return Nt(p||e,function(y,l){p&&(l=y,y=e[l]),Ke(u,l,x(y,t,s,l,e,d))}),u}var da=1,fa=4;function Se(e){return x(e,da|fa)}const pa=W({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:T(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:T([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:T(Function),default:e=>`${e}%`}}),ga=["aria-valuenow"],ya={viewBox:"0 0 100 100"},va=["d","stroke","stroke-width"],ba=["d","stroke","opacity","stroke-linecap","stroke-width"],ma={key:0},ha=D({name:"ElProgress"}),$a=D({...ha,props:pa,setup(e){const t=e,s={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},n=q("progress"),g=O(()=>({width:`${t.percentage}%`,animationDuration:`${t.duration}s`,backgroundColor:L(t.percentage)})),d=O(()=>(t.strokeWidth/t.width*100).toFixed(1)),u=O(()=>["circle","dashboard"].includes(t.type)?Number.parseInt(`${50-Number.parseFloat(d.value)/2}`,10):0),h=O(()=>{const i=u.value,j=t.type==="dashboard";return`
          M 50 50
          m 0 ${j?"":"-"}${i}
          a ${i} ${i} 0 1 1 0 ${j?"-":""}${i*2}
          a ${i} ${i} 0 1 1 0 ${j?"":"-"}${i*2}
          `}),b=O(()=>2*Math.PI*u.value),f=O(()=>t.type==="dashboard"?.75:1),k=O(()=>`${-1*b.value*(1-f.value)/2}px`),v=O(()=>({strokeDasharray:`${b.value*f.value}px, ${b.value}px`,strokeDashoffset:k.value})),o=O(()=>({strokeDasharray:`${b.value*f.value*(t.percentage/100)}px, ${b.value}px`,strokeDashoffset:k.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),c=O(()=>{let i;return t.color?i=L(t.percentage):i=s[t.status]||s.default,i}),r=O(()=>t.status==="warning"?rt:t.type==="line"?t.status==="success"?Ae:ot:t.status==="success"?je:Fe),p=O(()=>t.type==="line"?12+t.strokeWidth*.4:t.width*.111111+2),y=O(()=>t.format(t.percentage));function l(i){const j=100/i.length;return i.map((C,I)=>ue(C)?{color:C,percentage:(I+1)*j}:C).sort((C,I)=>C.percentage-I.percentage)}const L=i=>{var j;const{color:U}=t;if(lt(U))return U(i);if(ue(U))return U;{const C=l(U);for(const I of C)if(I.percentage>i)return I.color;return(j=C[C.length-1])==null?void 0:j.color}};return(i,j)=>($(),E("div",{class:m([a(n).b(),a(n).m(i.type),a(n).is(i.status),{[a(n).m("without-text")]:!i.showText,[a(n).m("text-inside")]:i.textInside}]),role:"progressbar","aria-valuenow":i.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[i.type==="line"?($(),E("div",{key:0,class:m(a(n).b("bar"))},[B("div",{class:m(a(n).be("bar","outer")),style:N({height:`${i.strokeWidth}px`})},[B("div",{class:m([a(n).be("bar","inner"),{[a(n).bem("bar","inner","indeterminate")]:i.indeterminate},{[a(n).bem("bar","inner","striped")]:i.striped},{[a(n).bem("bar","inner","striped-flow")]:i.stripedFlow}]),style:N(a(g))},[(i.showText||i.$slots.default)&&i.textInside?($(),E("div",{key:0,class:m(a(n).be("bar","innerText"))},[_(i.$slots,"default",{percentage:i.percentage},()=>[B("span",null,V(a(y)),1)])],2)):S("v-if",!0)],6)],6)],2)):($(),E("div",{key:1,class:m(a(n).b("circle")),style:N({height:`${i.width}px`,width:`${i.width}px`})},[($(),E("svg",ya,[B("path",{class:m(a(n).be("circle","track")),d:a(h),stroke:`var(${a(n).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-width":a(d),fill:"none",style:N(a(v))},null,14,va),B("path",{class:m(a(n).be("circle","path")),d:a(h),stroke:a(c),fill:"none",opacity:i.percentage?1:0,"stroke-linecap":i.strokeLinecap,"stroke-width":a(d),style:N(a(o))},null,14,ba)]))],6)),(i.showText||i.$slots.default)&&!i.textInside?($(),E("div",{key:2,class:m(a(n).e("text")),style:N({fontSize:`${a(p)}px`})},[_(i.$slots,"default",{percentage:i.percentage},()=>[i.status?($(),F(a(M),{key:1},{default:A(()=>[($(),F(it(a(r))))]),_:1})):($(),E("span",ma,V(a(y)),1))])],6)):S("v-if",!0)],10,ga))}});var wa=H($a,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const Ta=Le(wa),ze=Symbol("uploadContextKey"),ka="ElUpload";class Sa extends Error{constructor(t,s,n,g){super(t),this.name="UploadAjaxError",this.status=s,this.method=n,this.url=g}}function Ee(e,t,s){let n;return s.response?n=`${s.response.error||s.response}`:s.responseText?n=`${s.responseText}`:n=`fail to ${t.method} ${e} ${s.status}`,new Sa(n,s.status,t.method,e)}function Ea(e){const t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}const Pa=e=>{typeof XMLHttpRequest>"u"&&ne(ka,"XMLHttpRequest is undefined");const t=new XMLHttpRequest,s=e.action;t.upload&&t.upload.addEventListener("progress",d=>{const u=d;u.percent=d.total>0?d.loaded/d.total*100:0,e.onProgress(u)});const n=new FormData;if(e.data)for(const[d,u]of Object.entries(e.data))Array.isArray(u)?n.append(d,...u):n.append(d,u);n.append(e.filename,e.file,e.file.name),t.addEventListener("error",()=>{e.onError(Ee(s,e,t))}),t.addEventListener("load",()=>{if(t.status<200||t.status>=300)return e.onError(Ee(s,e,t));e.onSuccess(Ea(t))}),t.open(e.method,s,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const g=e.headers||{};if(g instanceof Headers)g.forEach((d,u)=>t.setRequestHeader(u,d));else for(const[d,u]of Object.entries(g))Ue(u)||t.setRequestHeader(d,String(u));return t.send(n),t},Je=["text","picture","picture-card"];let Ca=1;const se=()=>Date.now()+Ca++,Ye=W({action:{type:String,default:"#"},headers:{type:T(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>ee({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:T(Array),default:()=>ee([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Je,default:"text"},httpRequest:{type:T(Function),default:Pa},disabled:Boolean,limit:Number}),Oa=W({...Ye,beforeUpload:{type:T(Function),default:P},beforeRemove:{type:T(Function)},onRemove:{type:T(Function),default:P},onChange:{type:T(Function),default:P},onPreview:{type:T(Function),default:P},onSuccess:{type:T(Function),default:P},onProgress:{type:T(Function),default:P},onError:{type:T(Function),default:P},onExceed:{type:T(Function),default:P}}),_a=W({files:{type:T(Array),default:()=>ee([])},disabled:{type:Boolean,default:!1},handlePreview:{type:T(Function),default:P},listType:{type:String,values:Je,default:"text"}}),Aa={remove:e=>!!e},ja=["onKeydown"],Fa=["src"],La=["onClick"],Ua=["title"],Ra=["onClick"],Ba=["onClick"],Da=D({name:"ElUploadList"}),Ia=D({...Da,props:_a,emits:Aa,setup(e,{emit:t}){const{t:s}=ut(),n=q("upload"),g=q("icon"),d=q("list"),u=z(),h=Re(!1),b=f=>{t("remove",f)};return(f,k)=>($(),F(yt,{tag:"ul",class:m([a(n).b("list"),a(n).bm("list",f.listType),a(n).is("disabled",a(u))]),name:a(d).b()},{default:A(()=>[($(!0),E(ct,null,dt(f.files,v=>($(),E("li",{key:v.uid||v.name,class:m([a(n).be("list","item"),a(n).is(v.status),{focusing:h.value}]),tabindex:"0",onKeydown:Be(o=>!a(u)&&b(v),["delete"]),onFocus:k[0]||(k[0]=o=>h.value=!0),onBlur:k[1]||(k[1]=o=>h.value=!1),onClick:k[2]||(k[2]=o=>h.value=!1)},[_(f.$slots,"default",{file:v},()=>[f.listType==="picture"||v.status!=="uploading"&&f.listType==="picture-card"?($(),E("img",{key:0,class:m(a(n).be("list","item-thumbnail")),src:v.url,alt:""},null,10,Fa)):S("v-if",!0),v.status==="uploading"||f.listType!=="picture-card"?($(),E("div",{key:1,class:m(a(n).be("list","item-info"))},[B("a",{class:m(a(n).be("list","item-name")),onClick:K(o=>f.handlePreview(v),["prevent"])},[R(a(M),{class:m(a(g).m("document"))},{default:A(()=>[R(a(ft))]),_:1},8,["class"]),B("span",{class:m(a(n).be("list","item-file-name")),title:v.name},V(v.name),11,Ua)],10,La),v.status==="uploading"?($(),F(a(Ta),{key:0,type:f.listType==="picture-card"?"circle":"line","stroke-width":f.listType==="picture-card"?6:2,percentage:Number(v.percentage),style:N(f.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):S("v-if",!0)],2)):S("v-if",!0),B("label",{class:m(a(n).be("list","item-status-label"))},[f.listType==="text"?($(),F(a(M),{key:0,class:m([a(g).m("upload-success"),a(g).m("circle-check")])},{default:A(()=>[R(a(Ae))]),_:1},8,["class"])):["picture-card","picture"].includes(f.listType)?($(),F(a(M),{key:1,class:m([a(g).m("upload-success"),a(g).m("check")])},{default:A(()=>[R(a(je))]),_:1},8,["class"])):S("v-if",!0)],2),a(u)?S("v-if",!0):($(),F(a(M),{key:2,class:m(a(g).m("close")),onClick:o=>b(v)},{default:A(()=>[R(a(Fe))]),_:2},1032,["class","onClick"])),S(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),S(" This is a bug which needs to be fixed "),S(" TODO: Fix the incorrect navigation interaction "),a(u)?S("v-if",!0):($(),E("i",{key:3,class:m(a(g).m("close-tip"))},V(a(s)("el.upload.deleteTip")),3)),f.listType==="picture-card"?($(),E("span",{key:4,class:m(a(n).be("list","item-actions"))},[B("span",{class:m(a(n).be("list","item-preview")),onClick:o=>f.handlePreview(v)},[R(a(M),{class:m(a(g).m("zoom-in"))},{default:A(()=>[R(a(pt))]),_:1},8,["class"])],10,Ra),a(u)?S("v-if",!0):($(),E("span",{key:0,class:m(a(n).be("list","item-delete")),onClick:o=>b(v)},[R(a(M),{class:m(a(g).m("delete"))},{default:A(()=>[R(a(gt))]),_:1},8,["class"])],10,Ba))],2)):S("v-if",!0)])],42,ja))),128)),_(f.$slots,"append")]),_:3},8,["class","name"]))}});var Pe=H(Ia,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const Na=W({disabled:{type:Boolean,default:!1}}),Ma={file:e=>vt(e)},qa=["onDrop","onDragover"],Qe="ElUploadDrag",Ka=D({name:Qe}),Wa=D({...Ka,props:Na,emits:Ma,setup(e,{emit:t}){const s=bt(ze);s||ne(Qe,"usage: <el-upload><el-upload-dragger /></el-upload>");const n=q("upload"),g=Re(!1),d=z(),u=b=>{if(d.value)return;g.value=!1,b.stopPropagation();const f=Array.from(b.dataTransfer.files),k=s.accept.value;if(!k){t("file",f);return}const v=f.filter(o=>{const{type:c,name:r}=o,p=r.includes(".")?`.${r.split(".").pop()}`:"",y=c.replace(/\/.*$/,"");return k.split(",").map(l=>l.trim()).filter(l=>l).some(l=>l.startsWith(".")?p===l:/\/\*$/.test(l)?y===l.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(l)?c===l:!1)});t("file",v)},h=()=>{d.value||(g.value=!0)};return(b,f)=>($(),E("div",{class:m([a(n).b("dragger"),a(n).is("dragover",g.value)]),onDrop:K(u,["prevent"]),onDragover:K(h,["prevent"]),onDragleave:f[0]||(f[0]=K(k=>g.value=!1,["prevent"]))},[_(b.$slots,"default")],42,qa))}});var Ga=H(Wa,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const Ha=W({...Ye,beforeUpload:{type:T(Function),default:P},onRemove:{type:T(Function),default:P},onStart:{type:T(Function),default:P},onSuccess:{type:T(Function),default:P},onProgress:{type:T(Function),default:P},onError:{type:T(Function),default:P},onExceed:{type:T(Function),default:P}}),xa=["onKeydown"],Va=["name","multiple","accept"],Xa=D({name:"ElUploadContent",inheritAttrs:!1}),za=D({...Xa,props:Ha,setup(e,{expose:t}){const s=e,n=q("upload"),g=z(),d=te({}),u=te(),h=r=>{if(r.length===0)return;const{autoUpload:p,limit:y,fileList:l,multiple:L,onStart:i,onExceed:j}=s;if(y&&l.length+r.length>y){j(r,l);return}L||(r=r.slice(0,1));for(const U of r){const C=U;C.uid=se(),i(C),p&&b(C)}},b=async r=>{if(u.value.value="",!s.beforeUpload)return f(r);let p,y={};try{const L=s.data,i=s.beforeUpload(r);y=ce(s.data)?Se(s.data):s.data,p=await i,ce(s.data)&&Ut(L,y)&&(y=Se(s.data))}catch{p=!1}if(p===!1){s.onRemove(r);return}let l=r;p instanceof Blob&&(p instanceof File?l=p:l=new File([p],r.name,{type:r.type})),f(Object.assign(l,{uid:r.uid}),y)},f=(r,p)=>{const{headers:y,data:l,method:L,withCredentials:i,name:j,action:U,onProgress:C,onSuccess:I,onError:Ze,httpRequest:et}=s,{uid:Y}=r,Q={headers:y||{},withCredentials:i,file:r,data:p??l,method:L,filename:j,action:U,onProgress:G=>{C(G,r)},onSuccess:G=>{I(G,r),delete d.value[Y]},onError:G=>{Ze(G,r),delete d.value[Y]}},Z=et(Q);d.value[Y]=Z,Z instanceof Promise&&Z.then(Q.onSuccess,Q.onError)},k=r=>{const p=r.target.files;p&&h(Array.from(p))},v=()=>{g.value||(u.value.value="",u.value.click())},o=()=>{v()};return t({abort:r=>{mt(d.value).filter(r?([y])=>String(r.uid)===y:()=>!0).forEach(([y,l])=>{l instanceof XMLHttpRequest&&l.abort(),delete d.value[y]})},upload:b}),(r,p)=>($(),E("div",{class:m([a(n).b(),a(n).m(r.listType),a(n).is("drag",r.drag)]),tabindex:"0",onClick:v,onKeydown:Be(K(o,["self"]),["enter","space"])},[r.drag?($(),F(Ga,{key:0,disabled:a(g),onFile:h},{default:A(()=>[_(r.$slots,"default")]),_:3},8,["disabled"])):_(r.$slots,"default",{key:1}),B("input",{ref_key:"inputRef",ref:u,class:m(a(n).e("input")),name:r.name,multiple:r.multiple,accept:r.accept,type:"file",onChange:k,onClick:p[0]||(p[0]=K(()=>{},["stop"]))},null,42,Va)],42,xa))}});var Ce=H(za,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const Oe="ElUpload",Ja=e=>{var t;(t=e.url)!=null&&t.startsWith("blob:")&&URL.revokeObjectURL(e.url)},Ya=(e,t)=>{const s=ht(e,"fileList",void 0,{passive:!0}),n=o=>s.value.find(c=>c.uid===o.uid);function g(o){var c;(c=t.value)==null||c.abort(o)}function d(o=["ready","uploading","success","fail"]){s.value=s.value.filter(c=>!o.includes(c.status))}const u=(o,c)=>{const r=n(c);r&&(console.error(o),r.status="fail",s.value.splice(s.value.indexOf(r),1),e.onError(o,r,s.value),e.onChange(r,s.value))},h=(o,c)=>{const r=n(c);r&&(e.onProgress(o,r,s.value),r.status="uploading",r.percentage=Math.round(o.percent))},b=(o,c)=>{const r=n(c);r&&(r.status="success",r.response=o,e.onSuccess(o,r,s.value),e.onChange(r,s.value))},f=o=>{Ue(o.uid)&&(o.uid=se());const c={name:o.name,percentage:0,status:"ready",size:o.size,raw:o,uid:o.uid};if(e.listType==="picture-card"||e.listType==="picture")try{c.url=URL.createObjectURL(o)}catch(r){$t(Oe,r.message),e.onError(r,c,s.value)}s.value=[...s.value,c],e.onChange(c,s.value)},k=async o=>{const c=o instanceof File?n(o):o;c||ne(Oe,"file to be removed not found");const r=p=>{g(p);const y=s.value;y.splice(y.indexOf(p),1),e.onRemove(p,y),Ja(p)};e.beforeRemove?await e.beforeRemove(c,s.value)!==!1&&r(c):r(c)};function v(){s.value.filter(({status:o})=>o==="ready").forEach(({raw:o})=>{var c;return o&&((c=t.value)==null?void 0:c.upload(o))})}return de(()=>e.listType,o=>{o!=="picture-card"&&o!=="picture"||(s.value=s.value.map(c=>{const{raw:r,url:p}=c;if(!p&&r)try{c.url=URL.createObjectURL(r)}catch(y){e.onError(y,c,s.value)}return c}))}),de(s,o=>{for(const c of o)c.uid||(c.uid=se()),c.status||(c.status="success")},{immediate:!0,deep:!0}),{uploadFiles:s,abort:g,clearFiles:d,handleError:u,handleProgress:h,handleStart:f,handleSuccess:b,handleRemove:k,submit:v}},Qa=D({name:"ElUpload"}),Za=D({...Qa,props:Oa,setup(e,{expose:t}){const s=e,n=wt(),g=z(),d=te(),{abort:u,submit:h,clearFiles:b,uploadFiles:f,handleStart:k,handleError:v,handleRemove:o,handleSuccess:c,handleProgress:r}=Ya(s,d),p=O(()=>s.listType==="picture-card"),y=O(()=>({...s,fileList:f.value,onStart:k,onProgress:r,onSuccess:c,onError:v,onRemove:o}));return Tt(()=>{f.value.forEach(({url:l})=>{l!=null&&l.startsWith("blob:")&&URL.revokeObjectURL(l)})}),kt(ze,{accept:St(s,"accept")}),t({abort:u,submit:h,clearFiles:b,handleStart:k,handleRemove:o}),(l,L)=>($(),E("div",null,[a(p)&&l.showFileList?($(),F(Pe,{key:0,disabled:a(g),"list-type":l.listType,files:a(f),"handle-preview":l.onPreview,onRemove:a(o)},fe({append:A(()=>[R(Ce,pe({ref_key:"uploadRef",ref:d},a(y)),{default:A(()=>[a(n).trigger?_(l.$slots,"trigger",{key:0}):S("v-if",!0),!a(n).trigger&&a(n).default?_(l.$slots,"default",{key:1}):S("v-if",!0)]),_:3},16)]),_:2},[l.$slots.file?{name:"default",fn:A(({file:i})=>[_(l.$slots,"file",{file:i})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):S("v-if",!0),!a(p)||a(p)&&!l.showFileList?($(),F(Ce,pe({key:1,ref_key:"uploadRef",ref:d},a(y)),{default:A(()=>[a(n).trigger?_(l.$slots,"trigger",{key:0}):S("v-if",!0),!a(n).trigger&&a(n).default?_(l.$slots,"default",{key:1}):S("v-if",!0)]),_:3},16)):S("v-if",!0),l.$slots.trigger?_(l.$slots,"default",{key:2}):S("v-if",!0),_(l.$slots,"tip"),!a(p)&&l.showFileList?($(),F(Pe,{key:3,disabled:a(g),"list-type":l.listType,files:a(f),"handle-preview":l.onPreview,onRemove:a(o)},fe({_:2},[l.$slots.file?{name:"default",fn:A(({file:i})=>[_(l.$slots,"file",{file:i})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):S("v-if",!0)]))}});var en=H(Za,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const an=Le(en);export{an as E,Ke as a,ve as d};
