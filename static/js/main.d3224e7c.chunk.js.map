{"version":3,"sources":["utils/theme.js","components/Breadcrumb/styled.js","components/Breadcrumb/index.js","components/Header/styled.js","components/Header/index.js","engine/autoGrad.js","engine/models.js","engine/utils.js","engine/Optimizer.js","engine/samples.js","engine/P6XerReader.js","engine/MspXmlReader.js","feat/Modal/styled.js","feat/Modal/index.js","styled.js","pages/Dashboard/InputData/styled.js","pages/Dashboard/InputData/index.js","utils/color.js","mods/a_utils.js","utils/plot.js","components/Plot/Distribution.js","pages/Dashboard/BaselineSummary/styled.js","feat/DownloadChart/styled.js","feat/DownloadChart/index.js","utils/dom2image.js","pages/Dashboard/BaselineSummary/index.js","components/Plot/TaskPlot.js","components/Plot/styled.js","feat/LazyLoad/styled.js","feat/LazyLoad/index.js","components/Plot/CombinedPlot.js","utils/format.js","pages/Dashboard/OptimizedSummary/styled.js","pages/Dashboard/OptimizedSummary/index.js","components/Table/styled.js","components/Table/index.js","components/Plot/ResourcePlot.js","components/Plot/Step.js","pages/Dashboard/DetailedReport/styled.js","pages/Dashboard/DetailedReport/index.js","utils/toPDF.js","pages/Dashboard/styled.js","pages/Dashboard/index.js","lib/fetch.js","utils/validator.js","pages/Login/styled.js","pages/Login/index.js","pages/ResetPassword/styled.js","pages/ResetPassword/index.js","App.js","index.js","assets/images/logo.png"],"names":["theme","colors","white","red","denim","turquoise","tan","grey","lilac","pink","mint","orange","blue","yellow","textColors","helper","body","backgroundColors","light","dark","validationColors","error","success","fonts","fontSizes","xxs","xs","small","medium","large","xl","xxl","BreadcrumbContainer","styled","Stepper","Breadcrumb","steps","navAt","navigate","disabled","activeStep","alternativeLabel","map","label","i","Step","key","onClick","StepLabel","HeaderContainer","div","Header","signOut","useSignOut","useNavigate","React","useState","anchorEl","setAnchorEl","open","Boolean","className","href","src","FLlogo","alt","id","aria-controls","undefined","aria-haspopup","aria-expanded","event","currentTarget","fontSize","Menu","onClose","anchorOrigin","vertical","horizontal","transformOrigin","MenuListProps","MenuList","MenuItem","window","ListItemIcon","ListItemText","Divider","toValue","x","Value","data","_children","gradient","_backward","this","_previous","Set","other","out","Math","pow","round","topological_order","visited","build_topology","value","has","add","forEach","push","reverse","mul","AdamOptimizer","parameters","lr","beta1","beta2","epsilon","Object","assign","m","v","entries","t","constrain","mHat","vHat","newValue","sqrt","Distribution","xy","min","max","span","y","values","length","Infinity","sub","findMinMaxSpan","addRangeLoss","sampleMin","sampleMax","loss","extractData","Array","isArray","newObject","k","Project","tasks","resources","calendars","settings","considerActualDates","optimizationSteps","learningRate","minDurationRatio","maxDurationRatio","output","Task","predecessors","Resource","Calendar","TaskPredecessor","TaskResource","toObject","keys","object","len","asArray","parser","Date","parse","str","toISOString","substring","parseInt","split","writeExcel","tables","filename","maxWidth","book","xlsx","book_new","name","rows","sheet","json_to_sheet","columnName","maxLen","row","String","wch","book_append_sheet","readExcel","file","File","Promise","resolve","reader","FileReader","onload","e","target","result","type","SheetNames","sheet_to_json","Sheets","readAsBinaryString","clip","Optimizer","project","results","_ignoreTasks","_reorderTasks","simulate","planned","plannedproject","JSON","stringify","constraintTables","_makeConstraints","console","log","projectFileName","task","ignore","predecessorId","found","orderedTasks","lastLen","every","Error","criticalId","durationRatios","projectStart","projectFinish","criticalPredecessorId","critical","msPerHour","calendarId","weekHourCount","actualStart","optimizable","newStart","newFinish","actualFinish","plannedFinish","newDuration","plannedDuration","durationRatio","durationMs","__findStartFromPredecessors","plannedStart","projectDurationDays","laborDistribution","__findResourceDistribution","criticalPath","__findCriticalPath","constraintLoss","__findConstraintLoss","start","predecessor","lagMs","lagHour","resource","distribution","startDay","floor","finishDay","calendar","plannedUnits","resourceId","newUnitsPerHour","newUnitsPerDay","day","ts","evaluate","minUnitsPerDay","maxUnitsPerDay","d","newTasks","newTaskResources","newResources","convertOutput","laborDistributionDays","laborDistributionMin","laborDistributionMax","laborDistributionSpan","code","join","newPlanned","newOutput","newTask","taskInfo","calendarInfo","relationInfo","plannedInfo","actualInfo","frontlineInfo","criticalPathInfo","criticalPredecessor","constraintInfo","minDuration","maxDuration","newTaskResource","taskId","taskType","taskCode","resourceInfo","resourceType","resourceCode","plannedUnitsPerHour","newResource","distributionInfo","distributionDays","distributionMin","distributionMax","distributionSpan","taskResources","plannedProperties","newProperties","getValuesToMinimize","scales","optimizer","now","setTimeout","amplitude","lastLoss","count","sort","a","b","backward","step","newRatio","currentResults","currentResult","optimize","p6Task","task_id","proj_id","wbs_id","clndr_id","phys_complete_pct","rev_fdbk_flag","est_wt","lock_plan_flag","auto_compute_act_flag","complete_pct_type","task_type","duration_type","status_code","task_code","task_name","rsrc_id","total_float_hr_cnt","free_float_hr_cnt","remain_drtn_hr_cnt","act_work_qty","remain_work_qty","target_work_qty","target_drtn_hr_cnt","target_equip_qty","act_equip_qty","remain_equip_qty","cstr_date","act_start_date","act_end_date","late_start_date","late_end_date","expect_end_date","early_start_date","early_end_date","restart_date","reend_date","target_start_date","target_end_date","rem_late_start_date","rem_late_end_date","cstr_type","priority_type","suspend_date","resume_date","float_path","float_path_order","guid","tmpl_guid","cstr_date2","cstr_type2","driving_path_flag","act_this_per_work_qty","act_this_per_equip_qty","external_early_start_date","external_late_end_date","cbs_id","pre_pess_start_date","pre_pess_finish_date","post_pess_start_date","post_pess_finish_date","create_date","update_date","create_user","update_user","location_id","control_updates_flag","crt_path_num","p6Resource","parent_rsrc_id","role_id","shift_id","user_id","pobs_id","rsrc_seq_num","email_addr","employee_code","office_phone","other_phone","rsrc_name","rsrc_short_name","rsrc_title_name","def_qty_per_hr","cost_qty_type","ot_factor","active_flag","def_cost_qty_link_flag","ot_flag","curr_id","unit_id","rsrc_type","ts_approve_user_id","timesheet_flag","rsrc_notes","load_tasks_flag","level_flag","last_checksum","p6Calendar","default_flag","clndr_name","base_clndr_id","last_chng_date","clndr_type","day_hr_cnt","week_hr_cnt","month_hr_cnt","year_hr_cnt","rsrc_private","clndr_data","p6TaskPredecessor","task_pred_id","pred_task_id","pred_proj_id","pred_type","lag_hr_cnt","comments","aref","arls","p6TaskResource","taskrsrc_id","cost_qty_link_flag","acct_id","skill_level","remain_qty","target_qty","remain_qty_per_hr","target_lag_drtn_hr_cnt","target_qty_per_hr","act_ot_qty","act_reg_qty","relag_drtn_hr_cnt","cost_per_qty","target_cost","act_reg_cost","act_ot_cost","remain_cost","rollup_dates_flag","target_crv","remain_crv","actual_crv","ts_pend_act_end_flag","rate_type","act_this_per_cost","act_this_per_qty","curv_id","cost_per_qty_source_type","has_rsrchours","taskrsrc_sum_id","mspTask","UID","Name","Active","ID","Type","Manual","IsNull","CreateDate","WBS","OutlineNumber","OutlineLevel","Priority","ManualStart","ManualFinish","ManualDuration","Start","Finish","Duration","Work","Stop","Resume","EffortDriven","Recurring","OverAllocated","Estimated","Milestone","Summary","Critical","IsSubproject","ExternalTask","EarlyFinish","EarlyStart","LateStart","LateFinish","StartVariance","FinishVariance","WorkVariance","FreeSlack","TotalSlack","FixedCost","FixedCostAccrual","PercentComplete","PercentWorkComplete","Cost","OvertimeCost","OvertimeWork","ActualStart","ActualDuration","ActualCost","ActualOvertimeCost","ActualWork","ActualOvertimeWork","RegularWork","RemainingDuration","RemainingWork","RemainingOvertimeCost","RemainingOvertimeWork","ACWP","CV","ConstraintType","LevelAssignments","LevelingCanSplit","LevelingDelay","CalendarUID","Hyperlink","HyperlinkAddress","HyperlinkSubAddress","IgnoreResourceCalendar","HideBar","Rollup","BCWS","BCWP","PhysicalPercentComplete","EarnedValueMethod","Baseline","IsPublished","mspResource","Initials","WorkGroup","MaxUnits","PeakUnits","CanLevel","AccrueAt","StandardRate","OvertimeRate","OvertimeRateFormat","CostPerUse","RemainingCost","CostVariance","SV","IsInactive","IsGeneric","BookingType","CreationDate","IsEnterprise","mspCalendar","IsBaseCalendar","BaseCalendarUID","WeekDays","WeekDay","DayType","DayWorking","WorkingTimes","WorkingTime","FromTime","ToTime","mspTaskPredecessor","PredecessorUID","CrossProject","LinkLag","LagFormat","mspTaskResource","ResourceUID","TaskUID","Delay","LinkedFields","PeekUnits","Units","WorkContour","TimephasedData","P6XerReader","rawText","trim","rawData","rawTextToRawData","rawDataToProject","readAsText","header","text","table","line","columns","items","slice","TASK","samples","RSRC","Labor","Equip","Mat","CALENDAR","TASKPRED","TASKRSRC","parseFloat","total_drtn_hr_cnt","lines","projectToRawData","rawDataToRawText","document","createElement","setAttribute","encodeURIComponent","style","display","appendChild","click","removeChild","exportFile","parts","extension","pop","addToFilename","MspXmlReader","XMLParser","ignoreAttributes","ignoreDeclaration","ignorePiTags","p","Tasks","ActualFinish","PredecessorLink","Resources","defaultCalendar","Calendars","time","hour","Assignments","Assignment","XMLBuilder","build","LoadingModal","Modal","ModalContent","Box","isLoading","spinner","title","content","aria-labelledby","aria-describedby","AppContainer","PrimaryButton","Button","SecondaryButton","TertiaryButton","Content","props","OptimizationContainer","InputField","Input","ratioMarks","stepMarks","InputData","uploadedFile","setUploadedFile","fileName","setFileName","constraintsFileName","setConstraintsFileName","updateProject","setOptimizer","setReader","goNext","setIsLoading","isFileUploaded","setIsFileUploaded","setProject","considerDates","setConsiderDates","ratio","setRatio","setSteps","setLearningRate","useEffect","handleConsiderDatesChange","readProject","checkReader","endsWith","read","readConstraints","applyConstraints","alignItems","hidden","onChange","files","accept","htmlFor","textDecoration","cursor","fetch","then","r","blob","downloadConstraints","FormControl","Tooltip","fontFamily","justifyContent","FormControlLabel","checked","control","Radio","placeholder","variant","width","toString","Slider","valueLabelDisplay","getAriaLabel","marks","aria-label","plot_color_palette","TaskPlot","optimizedTask","optimizedCriticalTask","baselineTask","baselineCriticalTask","ComparisonPlot","ResourcePlot","allResources","down_sample","data_","keep","skip","init_d3","margin","x_domain","y_domain","height","ref","x_label","y_label","x_type","d3","y_type","types","x1","x2","y2","y1","x_scale","y_scale","svg","current","attr","selectChildren","remove","insert","append","x_axis","call","g","x_axis_2","tickValues","y_axis","y_axis_2","xGrid","scale","tickFormat","tickSizeInner","yGrid","zoom","scaleExtent","translateExtent","on","transform","select","rescaleX","rescaleY","selectAll","rsrc_max","drtn_day","applyX","applyY","idx","domains_with_margin","x_amount","y_amount","x_margin","y_margin","DistibutionPlot","baselineResults","selectedPreset","selectedResultIndex","useRef","newData","flat","filter","projectDays","laborMax","domains","newName","BaselineContainer","DownloadChart","classNames","children","class_name","domToJpeg","querySelector","dataUrl","link","download","BaselineSummary","baseline","setSelectedPreset","setSelectedResultIndex","currentTasks","setCurrentTasks","baselineTasks","setBaselineResults","setData","listOfPresets","setListOfPresets","selectedPresetResult","setSelectedPresetResult","selectedPresetResultOutput","at","newProjectDuration","baselineCriticalTasks","newCriticalTasks","baselineResources","optimizeDefaults","renderUi","setInterval","clearInterval","calculatePercentage","optimized","percentage","checkPositive","sign","abs","background","marginRight","borderRadius","preset","duration","component","RadioGroup","o","renderSwitch","selectedColor","color","baselineData","bd","x_optimized_domain","x_baseline_domain","y_optimized_domain","y_baseline_domain","tooltip","position","top","pageY","left","pageX","padding","pointerEvents","ReactDOM","render","getElementById","unmountComponentAtNode","msg","start_2","Alert","sx","severity","AlertTitle","CheckboxToggle","FormGroup","SearchAutoComplete","Autocomplete","FilterGroup","bodyText","LazyLoadContainer","LazyLoad","onLoadMore","isVisible","setIsVisible","CombinedPlot","base_results","new_results","base_resource_distribution","new_resource_distribution","showBaselinePlot","setShowBaselinePlot","showNewPlot","setShowNewPlot","searchValue","setSearchValue","toggleSort","setToggleSort","setSelectAll","setResources","baseResources","setBaseResources","useReducer","_","forceUpdate","startingDate","endingDate","diffTime","diffDays","ceil","setDate","getDate","y_baseline_values","rect_all","show_in_plot","border","newItem","visibleCount","setVisibleCount","remainingLength","searchData","Checkbox","options","renderInput","params","TextField","localeCompare","opacity","item","toggleSelectResource","limit","prevCount","OptimizationCharts","ToggleButtonGroup","OptimizedSummary","goPrev","baselineProjectDuration","resourcesData","labor","base","new","material","labor_resource_distribution","material_resource_distribution","l","toLowerCase","scrollTo","textTransform","TableContainer","Table","hidden_columns","makeRowHeight","initial_state","columnVisibilityModel","DataGrid","initialState","dist","Number","StepsPlot","option","TableContent","DetailedReport","handleSelectResultIndex","openModal","setOpenModal","currentResources","setCurrentResources","changedTasks","tasks_rows","calcRatio","toFixed","old_duration","new_duration","tasks_columns","field","headerName","renderCell","maxHeight","whiteSpace","hide","wordWrap","resources_rows","reduce","total","std","resources_columns","filteredTasksResourcesResults","resourceName","resource_id","resource_name","planned_duration","units_new_per_hour","planned_units","planned_units_per_hour","tasks_resources_rows","t_id","t_name","new_units_per_hour","tasks_resources_columns","marginBottom","index","replaceAll","replace","ele","pdf","jsPDF","element","pages","clientHeight","internal","pageSize","getHeight","currentPosition","currentPage","addPage","capturePage","html2canvas","windowWidth","documentElement","scrollWidth","windowHeight","canvas","imageData","toDataURL","getWidth","addImage","save","toPDF","exportToOriginal","exportToExcel","DashboardContainer","Dashboard","setNavAt","isPresetsReset","setIsPresetsReset","componentToRender","critical_paths","login","process","method","headers","requestResetPassword","resetPassword","validateEmail","email","test","message","require","config","LoginContainer","Login","emailRef","emailErrorMessage","setEmailErrorMessage","errorMessage","setErrorMessage","passwordRef","passwordErrorMessage","signIn","useSignIn","validEmail","password","response","json","resetPasswordRequired","accessToken","token","expiresIn","tokenType","authState","catch","flexDirection","noValidate","autoComplete","inputRef","helperText","rel","ResetContainer","ResetPassword","useSearchParams","searchParams","get","setEmail","setPassword","resetToken","App","authType","authName","cookieDomain","location","hostname","cookieSecure","path","loginPath","AppRegistry","registerComponent","runApplication","rootTag","module","exports"],"mappings":"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","file":"static/js/main.d3224e7c.chunk.js","sourcesContent":["export const theme = {\n  colors: {\n    white: \"#FFFFFF\",\n    red: \"#D53E4F\",\n    denim: [\"#CFE3EA\", \"#9FC7D5\", \"#5CA0B8\", \"#62A5BD\", \"#408FAA\", \"#306B80\", \"#28596A\", \"#204855\", \"#183640\"],\n    turquoise: [\"#CFEAE5\", \"#A0D5CB\", \"#70BFB1\", \"#52B9A7\", \"#40a795\", \"#448E81\", \"#2A7B6C\", \"#155F50\", \"#153932\"],\n    tan: [\"#F8F2EE\", \"#F9F1EA\", \"#FAECE1\", \"#F1DDCD\", \"#E4CCBA\", \"#C79570\", \"#B87A4A\", \"#95613A\", \"#4A311D\"],\n    grey: [\"#F0F1F3\", \"#ECECEC\", \"#DADADA\", \"#C7C7C7\", \"#B5B5B5\", \"#888888\", \"#717171\", \"#5B5B5B\", \"#35383E\"],\n    lilac: [\"#C1BBDE\", \"#ADA5D3\", \"#988EC8\", \"#8477BD\", \"#5E4FA2\", \"#473B79\", \"#3B3165\", \"#2F2851\", \"#1d1933\"],\n    pink: [\"#FEEBF4\", \"#FED6E8\", \"#FEC2DD\", \"#FB5DA5\", \"#F90976\", \"#D20562\", \"#A8044F\", \"#7E033B\", \"#4f0225\"],\n    mint: [\"#DFF2DD\", \"#D5EED2\", \"#CAEAC6\", \"#C0E5BB\", \"#ABDDA4\", \"#6AC35E\", \"#4FAF41\", \"#234F1D\", \"#20461A\", \"#183513\"],\n    orange: ['#FCDBD0', \"#FBC8B9\", \"#F8A48A\", \"#F79272\", \"#F46D43\", \"#DC3E0D\", \"#B8340B\", \"#932909\", \"#6E1F06\", \"#451304\"],\n    blue: [\"#D2ECFA\", \"#C3E6F9\", \"#A5D9F5\", \"#96D2F4\", \"#87CCF2\", \"#32A8E9\", \"#1791D5\", \"#1274AA\", \"#0c486b\", \"#072c40\"],\n    yellow: [\"#FFF7E2\", \"#FFF0C5\", \"#FEECB7\", \"#FEE8A8\", \"#FEE08B\", \"#FDC62A\", \"#F4B502\", \"#B78702\", \"#614801\", \"#493601\"]\n    // yellow: [\"#\", \"#\", \"#\", \"#\", \"#\", \"#\", \"#\", \"#\", \"#\"]\n  },\n  textColors: {\n    helper: '#B5B5B5',\n    body: '#545454'\n  },\n  backgroundColors: {\n    light: '#F0F1F3',\n    dark: '#35383E'\n  },\n  validationColors: {\n    error: '#C73D56',\n    success: '#5DB434'\n  },\n  fonts: ['Inter, sans-serif', 'Lato, sans-serif'],\n  fontSizes: {\n    xxs: '11px',\n    xs: '12px',\n    small: '14px',\n    medium: '16px',\n    large: '18px',\n    xl: '24px',\n    xxl: '32px'\n  }\n}","import styled from 'styled-components'\nimport { Stepper } from '@mui/material'\n\nexport const BreadcrumbContainer = styled(Stepper)`\n  margin: 30px auto;\n  width: 1200px;\n  .Mui-active circle {\n    color: #00beae;\n  }\n  .Mui-completed circle,.Mui-completed {\n    color: #002F2B !important;\n  }\n`","\nimport React from 'react'\n\nimport { Step, StepLabel } from '@mui/material'\n\nimport { BreadcrumbContainer } from './styled'\n\n\nexport default function Breadcrumb({ steps, navAt, navigate, disabled }) {\n  return <BreadcrumbContainer activeStep={navAt} alternativeLabel>\n    {steps.map((label, i) => (\n      <Step key={label} onClick={() => {\n        // if (navAt !== 0) {\n        //   if (i === 0) {\n        //     window.location.href = '/'\n        //   }\n        // }\n        if (!disabled)\n          navigate(i)\n      }}>\n        <StepLabel>{label}</StepLabel>\n      </Step>\n    ))}\n  </BreadcrumbContainer>\n}\n","import styled from 'styled-components'\n\nexport const HeaderContainer = styled.div`\n  width: 100%;\n  box-sizing: border-box;\n  min-height: 55px;\n  box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;\n  .header { \n    margin: 0 auto 20px;\n    padding: 20px 0;\n    max-width: 1200px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    .logo {\n      display: flex;\n      align-items: center;\n      img {\n        max-width: 200px;\n        margin-right: 20px;\n      }\n    }\n    .menu {\n      &:focus {\n         outline: none !important;\n      }\n    }\n  }\n`","/*\n * @Date: 2023-05-03 15:45:48\n * @LastEditors:  thunder thunderleng@gmail.com\n * @LastEditTime: 2023-05-09 14:41:11\n * @FilePath: \\app\\src\\components\\Header\\index.js\n */\nimport React from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport { useSignOut } from 'react-auth-kit'\n\nimport Menu from '@mui/material/Menu'\nimport MenuList from '@mui/material/MenuList'\nimport MenuItem from '@mui/material/MenuItem'\nimport ListItemText from '@mui/material/ListItemText'\nimport ListItemIcon from '@mui/material/ListItemIcon'\nimport Divider from '@mui/material/Divider'\n\nimport { HeaderContainer } from './styled'\n\nimport FLlogo from '../../assets/images/logo.png'\n\nimport MenuIcon from '@mui/icons-material/Menu'\nimport LaptopMacIcon from '@mui/icons-material/LaptopMac'\nimport LogoutIcon from '@mui/icons-material/Logout'\n\nexport default function Header() {\n  const signOut = useSignOut()\n  const navigate = useNavigate()\n\n  function handleLogout() {\n    signOut()\n    // Might put some delay here (3 secs?)\n    // alert('You have been logged out. You will be redirected to the login page.')\n    navigate('/login')\n  }\n\n  const [anchorEl, setAnchorEl] = React.useState(null)\n  const open = Boolean(anchorEl)\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget)\n  }\n\n  const handleClose = () => {\n    setAnchorEl(null)\n  }\n\n  return <HeaderContainer>\n    <div className='header'>\n      <div className='logo'>\n        <a href='/'><img src={FLlogo} alt='Frontline Logo' /></a>\n        <span>v2.2.1</span>\n      </div>\n      <div className='account'>\n        <MenuIcon\n          id='basic-button'\n          aria-controls={open ? 'basic-menu' : undefined}\n          aria-haspopup='true'\n          aria-expanded={open ? 'true' : undefined}\n          onClick={handleClick} fontSize='medium' />\n        <Menu\n          id='basic-menu'\n          anchorEl={anchorEl}\n          open={open}\n          onClose={handleClose}\n          anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'right',\n          }}\n          transformOrigin={{\n            vertical: 'bottom',\n            horizontal: 'right',\n          }}\n          MenuListProps={{\n            'aria-labelledby': 'basic-button',\n          }}>\n          <MenuList className='menu'>\n            <MenuItem\n              onClick={() => {\n                window.open('https://app.frontline-optimizer.com/v1.0.0/', '_blank', 'noopener,noreferrer')\n              }} >\n              <ListItemIcon>\n                <LaptopMacIcon fontSize='small' />\n              </ListItemIcon>\n              <ListItemText>Back to v1.0.0</ListItemText>\n            </MenuItem>\n            <Divider />\n            <MenuItem onClick={handleLogout} >\n              <ListItemIcon>\n                <LogoutIcon />\n              </ListItemIcon>\n              <ListItemText>Log Out</ListItemText>\n            </MenuItem>\n          </MenuList>\n        </Menu>\n      </div>\n    </div>\n  </HeaderContainer>\n}\n","export function toValue(x) {\n  if (x instanceof Value) return x;\n  return new Value(x);\n}\n\nexport class Value {\n  gradient = 0;\n  _backward = () => {};\n\n  constructor(data, _children = []) {\n    this.data = data;\n    this._previous = new Set(_children);\n  }\n\n  add(other) {\n    other = toValue(other);\n    let out = new Value(this.data + other.data, [this, other]);\n\n    out._backward = () => {\n      this.gradient += out.gradient;\n      other.gradient += out.gradient;\n    };\n\n    return out;\n  }\n\n  mul(other) {\n    other = toValue(other);\n    let out = new Value(this.data * other.data, [this, other]);\n\n    out._backward = () => {\n      this.gradient += other.data * out.gradient;\n      other.gradient += this.data * out.gradient;\n    };\n\n    return out;\n  }\n\n  pow(other) {\n    let out = new Value(Math.pow(this.data, other), [this]);\n\n    out._backward = () => {\n      this.gradient += other * Math.pow(this.data, other - 1) * out.gradient;\n    };\n\n    return out;\n  }\n\n  round() {\n    let out = new Value(Math.round(this.data), [this]);\n    out._backward = () => {\n      this.gradient += out.gradient;\n    };\n    return out;\n  }\n\n  backward() {\n    let topological_order = [];\n    let visited = new Set();\n\n    let build_topology = (value = new Value(0)) => {\n      if (!visited.has(value)) {\n        visited.add(value);\n        value._previous.forEach(build_topology);\n        topological_order.push(value);\n      }\n    };\n    build_topology(this);\n\n    this.gradient = 1;\n    topological_order.reverse().forEach((value) => {\n      value._backward();\n    });\n  }\n\n  sub(other) {\n    other = toValue(other);\n    return this.add(other.mul(-1));\n  }\n\n  div(other) {\n    other = toValue(other);\n    return this.mul(other.pow(-1));\n  }\n}\n\nexport class AdamOptimizer {\n  constructor(parameters, lr = 1e-3, beta1 = 0.9, beta2 = 0.999, epsilon = 1e-8) {\n    Object.assign(this, { parameters, lr, beta1, beta2, epsilon });\n    this.m = {};\n    this.v = {};\n    Object.entries(parameters).forEach(([id, value]) => {\n      this.m[id] = 0;\n      this.v[id] = 0;\n    });\n    this.t = 0;\n  }\n\n  step(constrain = (id, value) => value) {\n    let { parameters, lr, beta1, beta2, epsilon, m, v } = this;\n    this.t += 1;\n    Object.entries(parameters).forEach(([id, value]) => {\n      m[id] = beta1 * m[id] + (1 - beta1) * value.gradient;\n      v[id] = beta2 * v[id] + (1 - beta2) * Math.pow(value.gradient, 2);\n      let mHat = m[id] / (1 - Math.pow(beta1, this.t));\n      let vHat = v[id] / (1 - Math.pow(beta2, this.t));\n      let newValue = value.data - (lr * mHat) / (Math.sqrt(vHat) + epsilon);\n      parameters[id] = new Value(constrain(id, newValue));\n    });\n  }\n}\n\nexport function findMinMaxSpan(values = [new Value(0)]) {\n  values = Object.values(values);\n  if (!values.length) return;\n  let min = new Value(Infinity),\n    max = new Value(-Infinity);\n  values.forEach((value) => {\n    if (value.data < min.data) min = value;\n    if (value.data > max.data) max = value;\n  });\n  let span = max.sub(min);\n  return { min, max, span };\n}\n\nexport class Distribution {\n  xy = {};\n  min = new Value(0);\n  max = new Value(0);\n  span = new Value(0);\n\n  add(x, y) {\n    if (!this.xy[x]) this.xy[x] = new Value(0);\n    this.xy[x] = this.xy[x].add(y);\n  }\n\n  evaluate() {\n    Object.assign(this, findMinMaxSpan(this.xy));\n  }\n}\n\nexport function addRangeLoss(sampleMin, sampleMax, min, max, loss = new Value(0)) {\n  if (sampleMin?.data < min) {\n    loss = loss.add(sampleMin.sub(min).div(-min));\n  }\n  if (sampleMax?.data > max) {\n    loss = loss.add(sampleMax.sub(max).div(max));\n  }\n  return loss;\n}\n\nexport function extractData(x) {\n  if (x instanceof Value) return x.data;\n  else if (Array.isArray(x)) return x.map(extractData);\n  else if (typeof x === \"object\" && x) {\n    let newObject = {};\n    Object.entries(x).forEach(([k, v]) => {\n      newObject[k] = extractData(v);\n    });\n    return newObject;\n  }\n  return x;\n}\n","export class Project {\n  projectFileName;\n  tasks = {};\n  resources = {};\n  calendars = {};\n\n  settings = {\n    considerActualDates: true,\n    optimizationSteps: 20,\n    learningRate: 0.025,\n    minDurationRatio: 0.5,\n    maxDurationRatio: 2,\n  };\n\n  output = {\n    //projectStart,\n    //projectFinish,\n    //projectDurationDays,\n    //laborDistribution,\n    //criticalPath,\n    //constraintLoss,\n  };\n}\n\nexport class Task {\n  id;\n  name; // Activity Name | task_name | Name\n  code; // ... | task_code | ...\n  type; // Activity Type | task_type | Task or Milestone\n\n  calendarId; // Activity Calendars | clndr_id | Task Calendar\n  predecessors = {};\n  resources = {};\n\n  //start; // Start | start_date | Start\n  //finish; // Finish | end_date | Finish\n  //duration; // At Completion Duration | total_drtn_hr_cnt | Duration\n\n  //earlyStart; // Early Start | early_start_date | Early Start\n  //earlyFinish; // Early Finish | early_end_date | Early Finish\n\n  //lateStart; // Late Start | late_start_date | Late Start\n  //lateFinish; // Late Finish | late_end_date | Late Finish\n\n  plannedStart; // Planned Start | target_start_date | Baseline Start\n  plannedFinish; // Planned Finish | target_end_date | Baseline Finish\n  plannedDuration; // Planned Duration | target_drtn_hr_cnt | Baseline Duration\n\n  actualStart; // Actual Start | act_start_date | Actual Start\n  actualFinish; // Actual Finish | act_end_date | Actual Finish\n  //actualDuration; // Actual Duration | act_drtn_hr_cnt | Actual Duration\n\n  //remainingDuration; // Remaining Duration | remain_drtn_hr_cnt | Remaining Duration\n\n  durationRatio;\n  newDuration;\n  newStart;\n  newFinish;\n\n  criticalPredecessorId;\n  critical;\n\n  ignore;\n  optimizable;\n}\n\nexport class Resource {\n  id;\n  name; // Resource Name | rsrc_name | Name\n  code; // Resource ID | rsrc_short_name | Initials\n  type; // Resource Type (labor, equipment, material) | rsrc_type | Type (work = labor / equipment)\n\n  //maxUnitsPerHour; // Max Units/Time | max_qty_per_hr | Max Units\n\n  distribution;\n}\n\nexport class Calendar {\n  id;\n  name;\n  //dayHourCount;\n  weekHourCount;\n}\n\nexport class TaskPredecessor {\n  id;\n  taskId;\n  predecessorId;\n\n  type;\n  lagHour;\n}\n\nexport class TaskResource {\n  id;\n  taskId;\n  resourceId;\n\n  //totalUnits; // At Completion Units | total_qty | Work\n\n  plannedUnits; // Planned Units | target_qty | Planned Work\n  plannedUnitsPerHour; // Planned Units/Time | target_qty_per_hr | Units\n\n  //actualUnits; // Actual Regular Units | act_reg_qty | Actual Work\n  //actualUnitsPerHour; // Actual Overtime Units | act_ot_qty | Actual Overtime Work\n\n  newUnitsPerHour;\n  newUnitsPerDay;\n}\n","import * as xlsx from 'xlsx'\n\nexport function lastOf(array) {\n  return array[array.length - 1]\n}\n\nexport async function fetchFile(url = '') {\n  let filename = url.split('/').pop()\n  let res = await fetch(url)\n  let blob = await res.blob()\n  return new File([blob], filename)\n}\n\nexport function toObject(keys = [], values) {\n  let object = {}\n  keys.forEach((key, i) => (object[key] = values[i]))\n  return object\n}\n\nexport function len(x) {\n  return Object.keys(x).length\n}\n\nexport function asArray(x) {\n  return x ? (Array.isArray(x) ? x : [x]) : []\n}\n\nexport const parser = {\n  parseDate(x) {\n    return Date.parse(x + 'Z')\n  },\n  strDate(x) {\n    if (!x) return\n    let str = new Date(x).toISOString()\n    return str.substring(0, 10) + ' ' + str.substring(11, 16)\n  },\n  parseDuration(x = 'PT200H0M0S') {\n    return parseInt(x.split('PT')[1].split('H')[0])\n  },\n  strDuration(x) {\n    return `PT${x}H0M0S`\n  },\n}\n\nexport function writeExcel(tables, filename, maxWidth = 50) {\n  let book = xlsx.utils.book_new()\n  Object.entries(tables).forEach(([name, rows]) => {\n    rows = Object.values(rows)\n    let sheet = xlsx.utils.json_to_sheet(rows)\n    sheet['!cols'] = Object.keys(rows[0]).map((columnName) => {\n      let maxLen = Math.max(\n        columnName.length,\n        ...rows.map((row) => (row[columnName] ? String(row[columnName]).length : 0))\n      )\n      return { wch: Math.min(maxWidth, maxLen + 1) }\n    })\n    xlsx.utils.book_append_sheet(book, sheet, name)\n  })\n  xlsx.writeFile(book, filename)\n}\n\nexport function readExcel(file = new File()) {\n  return new Promise((resolve) => {\n    let reader = new FileReader()\n    reader.onload = (e) => {\n      let book = xlsx.read(e.target.result, { type: 'binary' })\n      let tables = {}\n      book.SheetNames.forEach((name) => {\n        tables[name] = xlsx.utils.sheet_to_json(book.Sheets[name])\n      })\n      resolve(tables)\n    }\n    reader.readAsBinaryString(file)\n  })\n}\n\nexport function exportFile(filename, text) {\n  let e = document.createElement('a')\n  let prefix = 'data:text/plain;charset=utf-8,'\n  e.setAttribute('href', prefix + encodeURIComponent(text))\n  e.setAttribute('download', filename)\n  e.style.display = 'none'\n  document.body.appendChild(e)\n  e.click()\n  document.body.removeChild(e)\n}\n\nexport function clip(value, min, max) {\n  if (min || min === 0) value = Math.max(min, value)\n  if (max || max === 0) value = Math.min(max, value)\n  return value\n}\n\nexport function addToFilename(filename = '', add = '') {\n  let parts = filename.split('.')\n  let extension = parts.pop()\n  return parts.join('.') + add + '.' + extension\n}\n","import { Value, Distribution, AdamOptimizer, addRangeLoss, toValue, extractData } from \"./autoGrad\";\nimport { Project, Task } from \"./models\";\nimport { clip, len, parser, readExcel, writeExcel } from \"./utils\";\n\nconst MS_PER_HOUR = 60 * 60 * 1000;\nconst MS_PER_DAY = 24 * MS_PER_HOUR;\nconst MS_PER_WEEK = 7 * MS_PER_DAY;\n\nexport class Optimizer {\n  project = new Project();\n  results = {};\n\n  constructor(project = new Project()) {\n    this.project = project;\n    this._ignoreTasks();\n    this._reorderTasks();\n\n    this.simulate();\n    this.planned = this.project.output;\n    this.plannedproject = JSON.parse(JSON.stringify(this.project))\n\n    this.constraintTables = this._makeConstraints();\n    console.log(project.projectFileName);\n  }\n  _ignoreTasks() {\n    let { tasks } = this.project;\n    Object.values(tasks).forEach((task) => {\n      task.ignore = task.type !== \"Task\";\n    });\n    Object.values(tasks).forEach((task) => {\n      Object.values(task.predecessors).forEach((x) => {\n        let predecessor = tasks[x.predecessorId];\n        if (predecessor.ignore) {\n          delete task.predecessors[x.predecessorId];\n        }\n      });\n    });\n  }\n\n  _reorderTasks() {\n    let { tasks, resources, calendars } = this.project;\n    let found = {};\n    this.orderedTasks = [];\n\n    const loopOnce = () => {\n      Object.values(tasks).forEach((task) => {\n        if (found[task.id]) return;\n        if (task.ignore) found[task.id] = true;\n        if (Object.values(task.predecessors).every((x) => found[x.predecessorId])) {\n          found[task.id] = true;\n          if (!task.ignore) this.orderedTasks.push(task);\n        }\n      });\n    };\n\n    while (1) {\n      let lastLen = len(found);\n      loopOnce();\n      if (len(found) === lastLen) break;\n    }\n\n    if (len(found) !== len(tasks)) {\n      throw new Error(\"predecessor error\");\n    } else {\n      console.log(\n        `topological reordering successful. ${len(this.orderedTasks)}/${len(tasks)} tasks considered. ${len(\n          resources\n        )} resources. ${len(calendars)} calendars.`\n      );\n    }\n  }\n\n  simulate(durationRatios = {}) {\n    let { settings, calendars } = this.project;\n\n    let projectStart = new Value(Infinity);\n    let projectFinish = new Value(0);\n    let criticalId;\n\n    this.orderedTasks.forEach((task) => {\n      task.criticalPredecessorId = null;\n      task.critical = null;\n\n      let msPerHour = MS_PER_WEEK / calendars[task.calendarId].weekHourCount;\n\n      if (settings.considerActualDates && task.actualStart) {\n        task.optimizable = false;\n        task.newStart = new Value(task.actualStart);\n        task.newFinish = new Value(task.actualFinish || task.plannedFinish);\n        task.newDuration = new Value(task.plannedDuration);\n      } else {\n        task.optimizable = true;\n        task.durationRatio = toValue(durationRatios[task.id] || 1);\n        task.newDuration = task.durationRatio.mul(task.plannedDuration).round();\n        let durationMs = task.newDuration.mul(msPerHour);\n        if (len(task.predecessors)) {\n          task.newStart = this.__findStartFromPredecessors(task, durationMs);\n        } else {\n          task.newStart = new Value(task.plannedStart);\n        }\n        task.newFinish = task.newStart.add(durationMs);\n      }\n\n      if (task.newStart.data < projectStart.data) {\n        projectStart = task.newStart;\n      }\n      if (task.newFinish.data > projectFinish.data) {\n        projectFinish = task.newFinish;\n        criticalId = task.id;\n      }\n    });\n\n    let projectDurationDays = projectFinish.sub(projectStart).div(MS_PER_DAY);\n    let laborDistribution = this.__findResourceDistribution();\n    let criticalPath = this.__findCriticalPath(criticalId);\n    let constraintLoss = this.__findConstraintLoss();\n\n    // console.log(\n    //   `${Math.round(projectDurationDays.data)} days. labor: max ${Math.round(\n    //     laborDistribution.max.data\n    //   )}, span ${Math.round(laborDistribution.span.data)}. critical: ${len(criticalPath)}. constraint loss: ${constraintLoss.data\n    //   }.`\n    // );\n\n    this.project.output = {\n      projectStart,\n      projectFinish,\n      projectDurationDays,\n      laborDistribution,\n      criticalPath,\n      constraintLoss,\n    };\n  }\n\n  __findStartFromPredecessors(task = new Task(), durationMs) {\n    let newStart = new Value(0);\n    Object.values(task.predecessors).forEach((x) => {\n      let predecessor = this.project.tasks[x.predecessorId];\n      let lagMs = x.lagHour * MS_PER_HOUR;\n      let start;\n      if (x.type === \"FS\") {\n        start = predecessor.newFinish.add(lagMs);\n      } else if (x.type === \"SS\") {\n        start = predecessor.newStart.add(lagMs);\n      } else if (x.type === \"FF\") {\n        start = predecessor.newFinish.add(lagMs).sub(durationMs);\n      } else if (x.type === \"SF\") {\n        start = predecessor.newStart.add(lagMs).sub(durationMs);\n      }\n      if (start.data > newStart.data) {\n        newStart = start;\n        task.criticalPredecessorId = predecessor.id;\n      }\n    });\n    return newStart;\n  }\n\n  __findResourceDistribution() {\n    let { resources, calendars } = this.project;\n    Object.values(resources).forEach((resource) => {\n      resource.distribution = new Distribution();\n    });\n    let laborDistribution = new Distribution();\n\n    this.orderedTasks.forEach((task) => {\n      if (!task.optimizable) return;\n      if (task.newDuration.data === 0) return;\n\n      let startDay = Math.floor(task.newStart.data / MS_PER_DAY);\n      let finishDay = Math.floor(task.newFinish.data / MS_PER_DAY);\n      let calendar = calendars[task.calendarId];\n\n      Object.values(task.resources).forEach((x) => {\n        if (x.plannedUnits === 0) return;\n\n        let resource = resources[x.resourceId];\n        if (!resource) return;\n\n        x.newUnitsPerHour = new Value(x.plannedUnits).div(task.newDuration);\n        if (resource.type === \"Material\") {\n          x.newUnitsPerDay = x.newUnitsPerHour.mul(calendar.weekHourCount / 7);\n        } else {\n          x.newUnitsPerDay = x.newUnitsPerHour;\n        }\n\n        for (let day = startDay; day <= finishDay; day++) {\n          let ts = day * MS_PER_DAY;\n          resource.distribution.add(ts, x.newUnitsPerDay);\n          if (resource.type === \"Labor\") {\n            laborDistribution.add(ts, x.newUnitsPerDay);\n          }\n        }\n      });\n    });\n\n    Object.values(resources).forEach((resource) => {\n      resource.distribution.evaluate();\n    });\n    laborDistribution.evaluate();\n    return laborDistribution;\n  }\n\n  __findCriticalPath(criticalId) {\n    let criticalPath = [];\n    while (criticalId) {\n      criticalPath.push(criticalId);\n      let task = this.project.tasks[criticalId];\n      task.critical = true;\n      criticalId = task.criticalPredecessorId;\n    }\n    return criticalPath;\n  }\n\n  __findConstraintLoss() {\n    let loss = new Value(0);\n\n    this.orderedTasks.forEach((task) => {\n      Object.values(task.resources).forEach((x) => {\n        loss = addRangeLoss(x.newUnitsPerDay, x.newUnitsPerDay, x.minUnitsPerDay, x.maxUnitsPerDay, loss);\n      });\n    });\n\n    Object.values(this.project.resources).forEach((x) => {\n      let d = x.distribution;\n      loss = addRangeLoss(d.min, d.max, x.minUnitsPerDay, x.maxUnitsPerDay, loss);\n    });\n\n    return loss;\n  }\n\n  _makeConstraints() {\n    let { planned, project } = this;\n    let { tasks, resources, calendars, output } = project;\n    let newTasks = [];\n    let newTaskResources = [];\n    let newResources = [];\n\n    const convertOutput = (out) => ({\n      projectStart: parser.strDate(out.projectStart.data),\n      projectFinish: parser.strDate(out.projectFinish.data),\n      projectDurationDays: Math.round(out.projectDurationDays.data),\n      laborDistributionDays: len(out.laborDistribution.xy),\n      laborDistributionMin: out.laborDistribution.min.data,\n      laborDistributionMax: out.laborDistribution.max.data,\n      laborDistributionSpan: out.laborDistribution.span.data,\n      criticalPath: out.criticalPath.map((id) => tasks[id].code).join(\", \"),\n      constraintLoss: out.constraintLoss.data,\n    });\n\n    let newPlanned = [convertOutput(planned)];\n    let newOutput = [convertOutput(output)];\n\n    Object.values(tasks).forEach((task) => {\n      let calendar = calendars[task.calendarId];\n      let newTask = {\n        taskInfo: \"|||\",\n        id: task.id,\n        type: task.type,\n        ignore: task.ignore,\n        code: task.code,\n        name: task.name,\n\n        calendarInfo: \"|||\",\n        weekHourCount: calendar.weekHourCount,\n\n        relationInfo: \"|||\",\n        predecessors: Object.values(task.predecessors)\n          .map((x) => tasks[x.predecessorId].code)\n          .join(\", \"),\n        resources: Object.values(task.resources)\n          .map((x) => resources[x.resourceId]?.code)\n          .join(\", \"),\n\n        plannedInfo: \"|||\",\n        plannedDuration: task.plannedDuration,\n        plannedStart: parser.strDate(task.plannedStart),\n        plannedFinish: parser.strDate(task.plannedFinish),\n\n        actualInfo: \"|||\",\n        actualStart: parser.strDate(task.actualStart),\n        actualFinish: parser.strDate(task.actualFinish),\n\n        frontlineInfo: \"|||\",\n        durationRatio: task.durationRatio?.data,\n        newDuration: task.newDuration?.data,\n        newStart: parser.strDate(task.newStart?.data),\n        newFinish: parser.strDate(task.newFinish?.data),\n\n        criticalPathInfo: \"|||\",\n        criticalPredecessor: tasks[task.criticalPredecessorId]?.code,\n        critical: task.critical,\n\n        constraintInfo: \"|||\",\n        minDuration: null,\n        maxDuration: null,\n      };\n      newTasks.push(newTask);\n\n      Object.values(task.resources).forEach((x) => {\n        let resource = resources[x.resourceId];\n        if (!resource) return;\n        let newUnitsPerHour = x.newUnitsPerHour?.data || 0;\n        let newUnitsPerDay = x.newUnitsPerDay?.data || 0;\n\n        let newTaskResource = {\n          id: x.id,\n\n          taskInfo: \"|||\",\n          taskId: x.taskId,\n          taskType: task.type,\n          taskCode: task.code,\n\n          resourceInfo: \"|||\",\n          resourceId: x.resourceId,\n          resourceType: resource.type,\n          resourceCode: resource.code,\n\n          calendarInfo: \"|||\",\n          weekHourCount: calendar.weekHourCount,\n\n          plannedInfo: \"|||\",\n          plannedUnits: x.plannedUnits,\n          plannedUnitsPerHour: x.plannedUnitsPerHour,\n\n          frontlineInfo: \"|||\",\n          newDuration: task.newDuration?.data,\n          newUnitsPerHour,\n          newUnitsPerDay,\n\n          constraintInfo: \"|||\",\n          minUnitsPerDay: null,\n          maxUnitsPerDay: null,\n        };\n        newTaskResources.push(newTaskResource);\n      });\n    });\n\n    Object.values(resources).forEach((resource) => {\n      let d = resource.distribution;\n      let newResource = {\n        resourceInfo: \"|||\",\n        id: resource.id,\n        type: resource.type,\n        code: resource.code,\n        name: resource.name,\n\n        distributionInfo: \"|||\",\n        distributionDays: len(d.xy),\n        distributionMin: d.min.data,\n        distributionMax: d.max.data,\n        distributionSpan: d.span.data,\n\n        constraintInfo: \"|||\",\n        minUnitsPerDay: null,\n        maxUnitsPerDay: null,\n      };\n      newResources.push(newResource);\n    });\n\n    return {\n      tasks: newTasks,\n      resources: newResources,\n      taskResources: newTaskResources,\n      plannedProperties: newPlanned,\n      newProperties: newOutput,\n    };\n  }\n\n  downloadConstraints() {\n    let name = this.project.projectFileName + \"_FrontlineConstraints.xlsx\";\n    writeExcel(this.constraintTables, name);\n  }\n\n  exportToExcel() {\n    let name = this.project.projectFileName + \"_FrontlineExport.xlsx\";\n    writeExcel(this._makeConstraints(), name);\n  }\n\n  async applyConstraints(file = new File()) {\n    let { tasks, resources } = this.project;\n    let tables = await readExcel(file);\n\n    tables.tasks.forEach((x) => {\n      let y = tasks[x.id];\n      if (y) {\n        y.minDuration = x.minDuration;\n        y.maxDuration = x.maxDuration;\n      }\n    });\n\n    tables.resources.forEach((x) => {\n      let y = resources[x.id];\n      if (y) {\n        y.minUnitsPerDay = x.minUnitsPerDay;\n        y.maxUnitsPerDay = x.maxUnitsPerDay;\n      }\n    });\n\n    tables.taskResources.forEach((x) => {\n      let y = tasks[x.taskId]?.resources[x.resourceId];\n      if (y) {\n        y.minUnitsPerDay = x.minUnitsPerDay;\n        y.maxUnitsPerDay = x.maxUnitsPerDay;\n      }\n    });\n  }\n\n\n  async optimize(name, getValuesToMinimize) {\n    return new Promise(async (resolve) => {\n      let { project, results } = this;\n      let { settings, tasks } = project;\n\n      if (!results[name]) results[name] = [];\n\n      let durationRatios = {};\n      this.orderedTasks.forEach((task) => {\n        durationRatios[task.id] = new Value(1);\n      });\n\n      let scales = {};\n\n      let optimizer = new AdamOptimizer(durationRatios, settings.learningRate);\n\n      let t1 = Date.now();\n      let lastLoss, count;\n\n      for (let i = 0; i < settings.optimizationSteps; i++) {\n        await new Promise((resolve) => setTimeout(resolve, 0));\n        await this.simulate(durationRatios);\n\n        let values = [project.output.constraintLoss, ...getValuesToMinimize(project)];\n        // console.log(values.map((v) => v.data));\n\n        let loss = new Value(0);\n        values.forEach((value, i) => {\n          if (value.data > 0) {\n            let amplitude = i === 0 ? 10 : 1;\n            if (scales[i] === undefined) scales[i] = amplitude / value.data;\n            loss = loss.add(value.mul(scales[i]));\n          }\n        });\n\n        if (loss.data !== lastLoss) {\n          lastLoss = loss.data;\n          count = 0;\n        } else count++;\n        if (count > 10) break;\n\n        results[name].push(\n          extractData({\n            durationRatios,\n            output: project.output,\n            loss,\n          })\n        );\n        results[name].sort((a, b) => b.loss - a.loss);\n\n        loss.backward();\n        optimizer.step((id, newRatio) => {\n          let task = tasks[id];\n          newRatio = clip(newRatio, task.minDuration / task.plannedDuration, task.maxDuration / task.plannedDuration);\n          newRatio = clip(newRatio, settings.minDurationRatio, settings.maxDurationRatio);\n          return newRatio;\n        });\n        // send callback after each result is loaded\n        let currentResults = results[name];\n        let currentResult = currentResults[currentResults.length - 1];\n        resolve(currentResult);\n      }\n\n      let t2 = Date.now();\n      // console.log(`${name}`, \"took\", t2 - t1, \"ms\");\n      // console.log(results);\n    });\n  }\n\n  async optimizeDefaults() {\n    await this.optimize(\"Balanced\", (project) => [\n      project.output.projectDurationDays,\n      project.output.laborDistribution.max,\n      project.output.laborDistribution.span,\n    ]);\n    await this.optimize(\"Fastest\", (project) => [project.output.projectDurationDays]);\n    await this.optimize(\"Minimum Resources\", (project) => [project.output.laborDistribution.max]);\n    await this.optimize(\"Levelled Resources\", (project) => [project.output.laborDistribution.span]);\n    await this.optimize(\"Constraint Compliance\", () => []);\n  }\n}","export const p6Task = {\n  task_id: '7274634',\n  proj_id: '1066',\n  wbs_id: '2447995',\n  clndr_id: '16216',\n  phys_complete_pct: '0',\n  rev_fdbk_flag: 'N',\n  est_wt: '1',\n  lock_plan_flag: 'N',\n  auto_compute_act_flag: 'N',\n  complete_pct_type: 'CP_Phys',\n  task_type: 'TT_FinMile',\n  duration_type: 'DT_FixedDrtn',\n  status_code: 'TK_NotStart',\n  task_code: 'K.RC.15.E10.005',\n  task_name: 'Release for Construction Lower Rush River Inlet @ Lower Rush River Inlet S10',\n  rsrc_id: '',\n  total_float_hr_cnt: '640',\n  free_float_hr_cnt: '136',\n  remain_drtn_hr_cnt: '0',\n  act_work_qty: '0',\n  remain_work_qty: '0',\n  target_work_qty: '0',\n  target_drtn_hr_cnt: '0',\n  target_equip_qty: '0',\n  act_equip_qty: '0',\n  remain_equip_qty: '0',\n  cstr_date: '',\n  act_start_date: '',\n  act_end_date: '',\n  late_start_date: '2024-09-18 18:00',\n  late_end_date: '2024-09-18 18:00',\n  expect_end_date: '',\n  early_start_date: '2024-05-24 18:00',\n  early_end_date: '2024-05-24 18:00',\n  restart_date: '2024-05-24 18:00',\n  reend_date: '2024-05-24 18:00',\n  target_start_date: '2024-05-24 18:00',\n  target_end_date: '2024-05-24 18:00',\n  rem_late_start_date: '2024-09-18 18:00',\n  rem_late_end_date: '2024-09-18 18:00',\n  cstr_type: '',\n  priority_type: 'PT_Normal',\n  suspend_date: '',\n  resume_date: '',\n  float_path: '',\n  float_path_order: '',\n  guid: '8Ahn9Ewgz0mdXd0n7Q+UEA',\n  tmpl_guid: '7uj+KW3K7EyRqcwm24llpw',\n  cstr_date2: '',\n  cstr_type2: '',\n  driving_path_flag: 'N',\n  act_this_per_work_qty: '0',\n  act_this_per_equip_qty: '0',\n  external_early_start_date: '',\n  external_late_end_date: '',\n  cbs_id: '',\n  pre_pess_start_date: '',\n  pre_pess_finish_date: '',\n  post_pess_start_date: '',\n  post_pess_finish_date: '',\n  create_date: '2023-01-12 20:18',\n  update_date: '2023-01-12 20:18',\n  create_user: 'IMUNOZ',\n  update_user: 'IMUNOZ',\n  location_id: '',\n  control_updates_flag: 'N',\n  crt_path_num: '',\n}\n\nexport const p6Resource = {\n  rsrc_id: '1318',\n  parent_rsrc_id: '',\n  clndr_id: '6645',\n  role_id: '',\n  shift_id: '',\n  user_id: '',\n  pobs_id: '',\n  guid: 'Cjk2LqM8xkW5h20mdCXeaA',\n  rsrc_seq_num: '3',\n  email_addr: '',\n  employee_code: '',\n  office_phone: '',\n  other_phone: '',\n  rsrc_name: 'Cost',\n  rsrc_short_name: 'C-1',\n  rsrc_title_name: '',\n  def_qty_per_hr: '0',\n  cost_qty_type: 'QT_Hour',\n  ot_factor: '0',\n  active_flag: 'Y',\n  auto_compute_act_flag: 'Y',\n  def_cost_qty_link_flag: 'Y',\n  ot_flag: 'N',\n  curr_id: '1',\n  unit_id: '101',\n  rsrc_type: 'RT_Mat',\n  location_id: '',\n  ts_approve_user_id: '',\n  timesheet_flag: 'N',\n  rsrc_notes: '?????<HTML><BODY></BODY></HTML>',\n  load_tasks_flag: '',\n  level_flag: '',\n  last_checksum: '',\n}\n\nexport const p6Calendar = {\n  clndr_id: '597',\n  default_flag: 'N',\n  clndr_name: 'Standard 5 Day Workweek',\n  proj_id: '',\n  base_clndr_id: '',\n  last_chng_date: '2000-04-26 14:11',\n  clndr_type: 'CA_Base',\n  day_hr_cnt: '8',\n  week_hr_cnt: '40',\n  month_hr_cnt: '172',\n  year_hr_cnt: '2000',\n  rsrc_private: 'N',\n  clndr_data:\n    '(0||CalendarData()(    (0||DaysOfWeek()(      (0||1()())      (0||2()(        (0||0(s|08:00|f|12:00)())        (0||1(s|13:00|f|17:00)())))      (0||3()(        (0||0(s|08:00|f|12:00)())        (0||1(s|13:00|f|17:00)())))      (0||4()(        (0||0(s|08:00|f|12:00)())        (0||1(s|13:00|f|17:00)())))      (0||5()(        (0||0(s|08:00|f|12:00)())        (0||1(s|13:00|f|17:00)())))      (0||6()(        (0||0(s|08:00|f|12:00)())        (0||1(s|13:00|f|17:00)())))      (0||7()())))    (0||Exceptions()())))',\n}\n\nexport const p6TaskPredecessor = {\n  task_pred_id: '12321174',\n  task_id: '7283774',\n  pred_task_id: '7283773',\n  proj_id: '1066',\n  pred_proj_id: '1066',\n  pred_type: 'PR_SS',\n  lag_hr_cnt: '0',\n  comments: '',\n  float_path: '',\n  aref: '2025-06-11 08:00',\n  arls: '2025-06-25 08:00',\n}\n\nexport const p6TaskResource = {\n  taskrsrc_id: '8713042',\n  task_id: '7279501',\n  proj_id: '1066',\n  cost_qty_link_flag: 'Y',\n  role_id: '',\n  acct_id: '',\n  rsrc_id: '10078',\n  pobs_id: '',\n  skill_level: '',\n  remain_qty: '50',\n  target_qty: '50',\n  remain_qty_per_hr: '1',\n  target_lag_drtn_hr_cnt: '0',\n  target_qty_per_hr: '1',\n  act_ot_qty: '0',\n  act_reg_qty: '0',\n  relag_drtn_hr_cnt: '0',\n  ot_factor: '',\n  cost_per_qty: '0.0000',\n  target_cost: '0.0000',\n  act_reg_cost: '0.0000',\n  act_ot_cost: '0.0000',\n  remain_cost: '0.0000',\n  act_start_date: '',\n  act_end_date: '',\n  restart_date: '2023-07-12 08:00',\n  reend_date: '2023-07-18 18:00',\n  target_start_date: '2023-07-12 08:00',\n  target_end_date: '2023-07-18 18:00',\n  rem_late_start_date: '2024-11-05 08:00',\n  rem_late_end_date: '2024-11-12 18:00',\n  rollup_dates_flag: 'N',\n  target_crv: '',\n  remain_crv: '',\n  actual_crv: '',\n  ts_pend_act_end_flag: 'N',\n  guid: 'ddVEJHT/c0SG/89BsElFgQ',\n  rate_type: 'COST_PER_QTY',\n  act_this_per_cost: '0.0000',\n  act_this_per_qty: '0',\n  curv_id: '',\n  rsrc_type: 'RT_Labor',\n  cost_per_qty_source_type: 'ST_Rsrc',\n  create_user: 'IMUNOZ',\n  create_date: '2023-01-12 20:18',\n  cbs_id: '',\n  has_rsrchours: '',\n  taskrsrc_sum_id: '',\n}\n\nexport const mspTask = {\n  UID: 0,\n  Name: 'PDD- Master programme Asper  EOT-Productivity Delay -011021 - REV',\n  Active: 1,\n  ID: 0,\n  Type: 1,\n  Manual: 0,\n  IsNull: 0,\n  CreateDate: '2009-10-12T11:25:00',\n  WBS: 0,\n  OutlineNumber: 0,\n  OutlineLevel: 0,\n  Priority: 500,\n  ManualStart: '2019-08-01T08:00:00',\n  ManualFinish: '2025-02-21T17:00:00',\n  ManualDuration: 'PT14864H0M0S',\n  Start: '2019-08-01T08:00:00',\n  Finish: '2025-02-21T17:00:00',\n  Duration: 'PT14864H0M0S',\n  Work: 'PT3680H0M0S',\n  Stop: '2019-08-01T08:00:00',\n  Resume: '2019-08-01T08:00:00',\n  EffortDriven: 1,\n  Recurring: 0,\n  OverAllocated: 0,\n  Estimated: 0,\n  Milestone: 0,\n  Summary: 1,\n  Critical: 1,\n  IsSubproject: 0,\n  ExternalTask: 0,\n  EarlyFinish: '2025-02-21T17:00:00',\n  EarlyStart: '2019-08-01T08:00:00',\n  LateStart: '2019-08-01T08:00:00',\n  LateFinish: '2025-02-21T17:00:00',\n  StartVariance: 0,\n  FinishVariance: 0,\n  WorkVariance: 220800000,\n  FreeSlack: 0,\n  TotalSlack: 0,\n  FixedCost: 0,\n  FixedCostAccrual: 3,\n  PercentComplete: 4.42973767279852,\n  PercentWorkComplete: 0,\n  Cost: 0,\n  OvertimeCost: 0,\n  OvertimeWork: 'PT0H0M0S',\n  ActualStart: '2019-08-01T08:00:00',\n  ActualDuration: 'PT658H26M0S',\n  ActualCost: 0,\n  ActualOvertimeCost: 0,\n  ActualWork: 'PT0H0M0S',\n  ActualOvertimeWork: 'PT0H0M0S',\n  RegularWork: 'PT0H0M0S',\n  RemainingDuration: 'PT14205H33M0S',\n  RemainingWork: 'PT3680H0M0S',\n  RemainingOvertimeCost: 0,\n  RemainingOvertimeWork: 'PT0H0M0S',\n  ACWP: 0,\n  CV: 0,\n  ConstraintType: 0,\n  LevelAssignments: 0,\n  LevelingCanSplit: 0,\n  LevelingDelay: 0,\n  CalendarUID: -1,\n  Hyperlink: '',\n  HyperlinkAddress: '',\n  HyperlinkSubAddress: '',\n  IgnoreResourceCalendar: 0,\n  HideBar: 0,\n  Rollup: 0,\n  BCWS: 0,\n  BCWP: 0,\n  PhysicalPercentComplete: 0,\n  EarnedValueMethod: 0,\n  Baseline: {\n    Duration: 'PT0H0M0S',\n  },\n  IsPublished: 1,\n}\n\nexport const mspResource = {\n  CalendarUID: 4,\n  UID: 1,\n  ID: 1,\n  Name: 'CC1 Steel',\n  Type: 1,\n  IsNull: 0,\n  Initials: 'C',\n  WorkGroup: 0,\n  MaxUnits: 1,\n  PeakUnits: 0,\n  OverAllocated: 0,\n  Start: '9999-12-31T23:59:59',\n  CanLevel: 1,\n  AccrueAt: 3,\n  Work: 'PT0H0M0S',\n  RegularWork: 'PT0H0M0S',\n  OvertimeWork: 'PT0H0M0S',\n  ActualWork: 'PT0H0M0S',\n  RemainingWork: 'PT0H0M0S',\n  ActualOvertimeWork: 'PT0H0M0S',\n  RemainingOvertimeWork: 'PT0H0M0S',\n  PercentWorkComplete: 0,\n  StandardRate: 0,\n  Cost: 0,\n  OvertimeRate: 0,\n  OvertimeRateFormat: 2,\n  OvertimeCost: 0,\n  CostPerUse: 0,\n  ActualCost: 0,\n  ActualOvertimeCost: 0,\n  RemainingCost: 0,\n  RemainingOvertimeCost: 0,\n  WorkVariance: 0,\n  CostVariance: 0,\n  SV: 0,\n  CV: 0,\n  ACWP: 0,\n  BCWS: 0,\n  BCWP: 0,\n  IsInactive: 0,\n  IsGeneric: 0,\n  BookingType: 0,\n  CreationDate: '8/28/2019 5:16:00 PM',\n  IsEnterprise: 0,\n}\n\nexport const mspCalendar = {\n  UID: 7,\n  Name: 'covid 19',\n  IsBaseCalendar: 1,\n  BaseCalendarUID: -1,\n  WeekDays: {\n    WeekDay: [\n      {\n        DayType: 1,\n        DayWorking: 0,\n      },\n      {\n        DayType: 2,\n        DayWorking: 1,\n        WorkingTimes: {\n          WorkingTime: [\n            {\n              FromTime: '08:00:00',\n              ToTime: '12:00:00',\n            },\n            {\n              FromTime: '13:00:00',\n              ToTime: '17:00:00',\n            },\n          ],\n        },\n      },\n      {\n        DayType: 3,\n        DayWorking: 1,\n        WorkingTimes: {\n          WorkingTime: [\n            {\n              FromTime: '08:00:00',\n              ToTime: '12:00:00',\n            },\n            {\n              FromTime: '13:00:00',\n              ToTime: '17:00:00',\n            },\n          ],\n        },\n      },\n      {\n        DayType: 4,\n        DayWorking: 1,\n        WorkingTimes: {\n          WorkingTime: [\n            {\n              FromTime: '08:00:00',\n              ToTime: '12:00:00',\n            },\n            {\n              FromTime: '13:00:00',\n              ToTime: '17:00:00',\n            },\n          ],\n        },\n      },\n      {\n        DayType: 5,\n        DayWorking: 1,\n        WorkingTimes: {\n          WorkingTime: [\n            {\n              FromTime: '08:00:00',\n              ToTime: '12:00:00',\n            },\n            {\n              FromTime: '13:00:00',\n              ToTime: '17:00:00',\n            },\n          ],\n        },\n      },\n      {\n        DayType: 6,\n        DayWorking: 1,\n        WorkingTimes: {\n          WorkingTime: [\n            {\n              FromTime: '08:00:00',\n              ToTime: '12:00:00',\n            },\n            {\n              FromTime: '13:00:00',\n              ToTime: '17:00:00',\n            },\n          ],\n        },\n      },\n      {\n        DayType: 7,\n        DayWorking: 0,\n      },\n    ],\n  },\n}\n\nexport const mspTaskPredecessor = {\n  PredecessorUID: 16546,\n  Type: 1,\n  CrossProject: 0,\n  LinkLag: 0,\n  LagFormat: 7,\n}\n\nexport const mspTaskResource = {\n  UID: 2870,\n  ResourceUID: 2,\n  TaskUID: 16323,\n  ActualCost: 0,\n  ActualWork: 'PT0H0M0S',\n  Cost: 0,\n  Delay: 0,\n  Finish: '2024-05-22T17:00:00',\n  LinkedFields: 0,\n  PeekUnits: 1,\n  Start: '2023-08-03T08:00:00',\n  Stop: '2024-05-22T17:00:00',\n  Units: 1,\n  Work: 'PT1920H0M0S',\n  WorkContour: 0,\n  PercentWorkComplete: '0%',\n  TimephasedData: [],\n}\n","import { addToFilename, exportFile, parser, toObject } from './utils'\nimport { Project, Task, Resource, Calendar, TaskPredecessor, TaskResource } from './models'\nimport * as samples from './samples'\n\n/*\nhttps://docs.oracle.com/cd/F25600_01/English/Mapping_and_Schema/ms_project_import_export_data_map_xml/helpmain.htm?toc.htm?97947.htm\nhttps://docs.oracle.com/cd/F51303_01/English/Mapping_and_Schema/xer_import_export_data_map_project/\nhttps://learn.microsoft.com/en-us/office-project/xml-data-interchange/project-elements-and-xml-structure?view=project-client-2016\n*/\n\nexport class P6XerReader {\n  async read(file = new File()) {\n    let reader = new FileReader()\n    return new Promise((resolve) => {\n      reader.onload = (e) => {\n        this.rawText = e.target.result.trim()\n        this.rawData = this.rawTextToRawData(this.rawText)\n        this.project = this.rawDataToProject(this.rawData)\n        this.project.projectFileName = file.name\n        resolve(this.project)\n      }\n      reader.readAsText(file)\n    })\n  }\n\n  rawTextToRawData(text = '') {\n    let header,\n      tables = {},\n      table = [],\n      keys\n    text.split('\\n').forEach((line) => {\n      let columns = line.split('\\t').map((x) => x.trim())\n      let type = columns[0],\n        items = columns.slice(1)\n      switch (type) {\n        case 'ERMHDR':\n          header = items\n          break\n        case '%T':\n          let name = items[0]\n          table = tables[name] = []\n          break\n        case '%F':\n          keys = items\n          break\n        case '%R':\n          let values = items\n          table.push(toObject(keys, values))\n          break\n        case '%E':\n          break\n        default:\n          break\n      }\n    })\n    let rawData = { header, tables }\n    return rawData\n  }\n\n  rawDataToProject(rawData) {\n    let { tables } = rawData\n    let project = new Project()\n\n    tables.TASK.forEach((x = samples.p6Task) => {\n      let y = new Task()\n      y.id = x.task_id\n      y.name = x.task_name\n      y.code = x.task_code\n      y.type = x.task_type.slice(3)\n\n      y.calendarId = x.clndr_id\n      y.predecessors = {}\n      y.resources = {}\n\n      y.plannedStart = parser.parseDate(x.target_start_date)\n      y.plannedFinish = parser.parseDate(x.target_end_date)\n      y.plannedDuration = parseInt(x.target_drtn_hr_cnt)\n\n      y.actualStart = parser.parseDate(x.act_start_date)\n      y.actualFinish = parser.parseDate(x.act_end_date)\n\n      project.tasks[y.id] = y\n    })\n\n    Object.values(tables.RSRC)?.forEach((x = samples.p6Resource) => {\n      let y = new Resource()\n      y.id = x.rsrc_id\n      y.name = x.rsrc_name\n      y.code = x.rsrc_short_name\n      y.type = { Labor: 'Labor', Equip: 'Equipment', Mat: 'Material' }[x.rsrc_type.slice(3)]\n\n      project.resources[y.id] = y\n    })\n\n    tables.CALENDAR.forEach((x = samples.p6Calendar) => {\n      let y = new Calendar()\n      y.id = x.clndr_id\n      y.name = x.clndr_name\n      y.weekHourCount = parseInt(x.week_hr_cnt)\n\n      project.calendars[y.id] = y\n    })\n\n    tables.TASKPRED.forEach((x = samples.p6TaskPredecessor) => {\n      let y = new TaskPredecessor()\n      y.id = x.task_pred_id\n      y.taskId = x.task_id\n      y.predecessorId = x.pred_task_id\n\n      y.type = x.pred_type.slice(3)\n      y.lagHour = parseInt(x.lag_hr_cnt)\n\n      let task = project.tasks[y.taskId]\n      task.predecessors[y.predecessorId] = y\n    })\n\n    Object.values(tables.TASKRSRC)?.forEach((x = samples.p6TaskResource) => {\n      let y = new TaskResource()\n      y.id = x.taskrsrc_id\n      y.taskId = x.task_id\n      y.resourceId = x.rsrc_id\n\n      y.plannedUnits = parseFloat(x.target_qty)\n      let task = project.tasks[y.taskId]\n      y.plannedUnitsPerHour = task.plannedDuration > 0 ? y.plannedUnits / task.plannedDuration : 0\n\n      task.resources[y.resourceId] = y\n    })\n\n    return project\n  }\n\n  projectToRawData(project) {\n    let rawData = JSON.parse(JSON.stringify(this.rawData))\n    let { tables } = rawData\n\n    tables.TASK.forEach((x = samples.p6Task) => {\n      let y = project.tasks[x.task_id]\n      if (y?.optimizable) {\n        x.target_start_date = parser.strDate(y.newStart.data)\n        x.target_end_date = parser.strDate(y.newFinish.data)\n\n        /*\n        original      13    target_drtn_hr_cnt\n        actual        0     act_drtn_hr_cnt\n        remaining     24    remain_drtn_hr_cnt\n        at complete   24    total_drtn_hr_cnt\n        total float   0     total_float_hr_cnt\n        free float    0     free_float_hr_cnt \n        */\n        x.target_drtn_hr_cnt = x.remain_drtn_hr_cnt = x.total_drtn_hr_cnt = y.newDuration.data\n\n        if (x.act_start_date) x.act_start_date = parser.strDate(y.newStart.data)\n        if (x.act_end_date) x.act_end_date = parser.strDate(y.newFinish.data)\n      }\n    })\n\n    tables.TASKRSRC?.forEach((x = samples.p6TaskResource) => {\n      let y = project.tasks[x.task_id]\n      if (y?.optimizable) {\n        y = y.resources[x.rsrc_id]\n        if (y) {\n          x.target_qty_per_hr = y.newUnitsPerHour?.data\n        }\n      }\n    })\n\n    return rawData\n  }\n\n  rawDataToRawText(rawData) {\n    let { header, tables } = rawData\n    let lines = []\n    lines.push(['ERMHDR', ...header].join('\\t'))\n    Object.entries(tables).forEach(([name, table]) => {\n      lines.push(['%T', name].join('\\t'))\n      lines.push(['%F', ...Object.keys(table[0])].join('\\t'))\n      table.forEach((row) => {\n        lines.push(['%R', ...Object.values(row)].join('\\t'))\n      })\n    })\n    lines.push('%E')\n    return lines.join('\\n')\n  }\n\n  exportToOriginal(project) {\n    let rawData = this.projectToRawData(project)\n    let rawText = this.rawDataToRawText(rawData)\n    let filename = addToFilename(project.projectFileName, '_FrontlineExport')\n    exportFile(filename, rawText)\n  }\n}","import { XMLBuilder, XMLParser } from 'fast-xml-parser'\nimport { Calendar, Project, Resource, Task, TaskPredecessor, TaskResource } from './models'\nimport { P6XerReader } from './P6XerReader'\nimport * as samples from './samples'\nimport { asArray, parser } from './utils'\n\nconst MS_PER_HOUR = 60 * 60 * 1000\n\nexport class MspXmlReader extends P6XerReader {\n  rawTextToRawData(text = '') {\n    let parser = new XMLParser({\n      ignoreAttributes: false,\n      ignoreDeclaration: false,\n      ignorePiTags: false,\n    })\n    let rawData = parser.parse(text)\n    return rawData\n  }\n\n  rawDataToProject(rawData) {\n    let project = new Project()\n\n    let p = rawData.Project\n\n    p.Tasks.Task.forEach((x = samples.mspTask) => {\n      let y = new Task()\n      y.id = x.UID\n      y.name = x.Name\n      y.code = x.WBS\n      y.type = x.Summary ? 'Summary' : x.Milestone ? 'Milestone' : 'Task'\n\n      y.calendarId = x.CalendarUID\n      y.predecessors = {}\n      y.resources = {}\n\n      y.plannedStart = parser.parseDate(x.Start)\n      y.plannedFinish = parser.parseDate(x.Finish)\n      y.plannedDuration = parser.parseDuration(x.Duration)\n\n      y.actualStart = parser.parseDate(x.ActualStart)\n      y.actualFinish = parser.parseDate(x.ActualFinish)\n\n      project.tasks[y.id] = y\n\n      asArray(x.PredecessorLink).forEach((a = samples.mspTaskPredecessor) => {\n        let b = new TaskPredecessor()\n        b.id = null\n        b.taskId = y.id\n        b.predecessorId = a.PredecessorUID\n\n        b.type = ['FF', 'FS', 'SF', 'SS'][a.Type]\n        b.lagHour = a.LinkLag / 600\n\n        y.predecessors[b.predecessorId] = b\n      })\n    })\n\n    asArray(p.Resources.Resource).forEach((x = samples.mspResource) => {\n      let y = new Resource()\n      y.id = x.UID\n      y.name = x.Name\n      y.code = x.Initials\n      y.type = ['Material', 'Labor', 'Cost'][x.Type]\n\n      project.resources[y.id] = y\n    })\n\n    let defaultCalendar = new Calendar()\n    defaultCalendar.id = '-1'\n    defaultCalendar.name = 'standard 5 days 8 hours'\n    defaultCalendar.weekHourCount = 40\n    project.calendars[defaultCalendar.id] = defaultCalendar\n\n    p.Calendars.Calendar.forEach((x = samples.mspCalendar) => {\n      let y = new Calendar()\n      y.id = x.UID\n      y.name = x.Name\n      y.weekHourCount = 0\n\n      x.WeekDays?.WeekDay.forEach((day) => {\n        let dayName = [null, 'Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'][day.DayType]\n        if (dayName) {\n          asArray(day.WorkingTimes?.WorkingTime).forEach((time) => {\n            let date = '1971-06-28T'\n            let ms = Date.parse(date + time.ToTime) - Date.parse(date + time.FromTime)\n            let hour = ms / MS_PER_HOUR\n            if (hour < 0) hour += 24\n            y.weekHourCount += hour\n          })\n        }\n      })\n\n      project.calendars[y.id] = y\n    })\n\n    p.Assignments?.Assignment?.forEach((x = samples.mspTaskResource) => {\n      let y = new TaskResource()\n      y.id = x.UID\n      y.taskId = x.TaskUID\n      y.resourceId = x.ResourceUID\n\n      y.plannedUnits = parser.parseDuration(x.Work)\n      let task = project.tasks[y.taskId]\n      y.plannedUnitsPerHour = task.plannedDuration > 0 ? y.plannedUnits / task.plannedDuration : 0\n\n      task.resources[y.resourceId] = y\n    })\n\n    return project\n  }\n\n  projectToRawData(project) {\n    let rawData = JSON.parse(JSON.stringify(this.rawData))\n    let p = rawData.Project\n\n    p.Tasks.Task.forEach((x = samples.mspTask) => {\n      let y = project.tasks[x.UID]\n      if (y?.optimizable) {\n        x.Start = parser.strDate(y.newStart.data)\n        x.Finish = parser.strDate(y.newFinish.data)\n        x.Duration = parser.strDuration(y.newDuration.data)\n\n        if (x.ActualStart) x.ActualStart = parser.strDate(y.newStart.data)\n        if (x.ActualFinish) x.ActualFinish = parser.strDate(y.newFinish.data)\n      }\n    })\n\n    p.Assignments?.Assignment?.forEach((x = samples.mspTaskResource) => {\n      let y = project.tasks[x.TaskUID]\n      if (y?.optimizable) {\n        y = y.resources[x.ResourceUID]\n        if (y) {\n          x.Units = x.PeekUnits = y.newUnitsPerHour?.data\n        }\n      }\n    })\n\n    return rawData\n  }\n\n  rawDataToRawText(rawData) {\n    let builder = new XMLBuilder({\n      ignoreAttributes: false,\n    })\n    return builder.build(rawData)\n  }\n}","import styled from 'styled-components'\nimport { Modal, Box } from '@mui/material'\n\nexport const LoadingModal = styled(Modal)`\n  &.MuiModal-root {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .MuiBox-root {\n    background: #f2f2f2;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    text-align: center;\n    .loader {\n      width: 64px;\n      height: 64px;\n      background: linear-gradient(180deg, #002F2B 0%, rgba(0, 0, 0, 0.1) 25%);\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      position: relative;\n      animation: spin 1s linear infinite;\n      margin: 0 0 15px;\n    }\n    .loader::after {\n      content: \"\";\n      width: calc(100% - 4px);\n      height: calc(100% - 4px);\n      border-radius: 50%;\n      background: #f2f2f2;\n    }\n    @keyframes spin {\n      100% {\n        transform: rotate(360deg);\n      }\n    }\n    .title {\n      font-size: 20px;\n      font-family: \"Nunito\", sans-serif;\n      font-weight: 500;\n      margin: 0 0 15px;\n    }\n    span {\n      color: #696969;\n    }\n    &:focus-visible {\n      outline: none;\n    }\n}\n`\n\nexport const ModalContent = styled(Box)`\n  position: 'absolute';\n  top: '50%';\n  left: '50%';\n  transform: 'translate(-50%, -50%)';\n   box-shadow: 1px 1px 5px rgb(207 234 229 / 25%);\n  width: 400px;\n  padding: 40px 20px;\n  border-radius: 64px;\n`","import React from 'react'\n\nimport { LoadingModal, ModalContent } from './styled'\n\nconst Modal = ({ isLoading, spinner, onClose, title, content }) => {\n  return (\n    <LoadingModal\n      open={isLoading}\n      onClose={onClose}\n      aria-labelledby='modal-modal-title'\n      aria-describedby='modal-modal-description'\n    >\n      <ModalContent>\n        {spinner ? <div className='loader' /> : ''}\n\n        <div className='title' id='modal-modal-title'>\n          {title}\n        </div>\n        <span>{content}</span>\n      </ModalContent>\n    </LoadingModal>\n  )\n}\n\nexport default Modal","/*\n * @Date: 2023-05-03 15:45:48\n * @LastEditors:  thunder thunderleng@gmail.com\n * @LastEditTime: 2023-05-09 15:11:03\n * @FilePath: \\app\\src\\styled.js\n */\nimport styled from 'styled-components'\nimport Button from '@mui/material/Button'\n\nexport const AppContainer = styled.div`\n  background: #F0F1F3;\n  margin: 0;\n  /* padding: 0 0 50px; */\n  min-height: 100vh;\n  min-width: 1200px;\n  .row {\n    display: flex;\n    width: 100%;\n    justify-content: space-between;\n    align-items: center;\n    box-sizing: border-box;\n    /* margin-top: 10px; */\n  }\n  .MuiTableCell-body, .MuiTableCell-head {\n    font-family: \"Inter\", Arial, Helvetica, sans-serif;\n  }\n`\n\nexport const PrimaryButton = styled(Button)`\n  padding: 10px 20px !important;  \n  background: #40AA97 !important;\n  box-shadow: 1px 2px 2px #CFEAE5 !important;\n  border-radius: 8px !important;\n  min-width: 100px !important;\n  width: auto !important;   \n  font-weight: bold !important;\n  text-transform: uppercase !important;\n  font-size: 1rem !important;\n  font-family: \"Inter\", sans-serif !important;\n  &:hover {\n    background: #258372 !important;\n    box-shadow: 1px 2px 2px #CFEAE5, inset 2px 3px 5px rgba(0, 0, 0, 0.25) !important;\n    }\n  &.Mui-disabled {\n    color: #B5B5B5;    \n    background: #F0F1F3 !important;\n    box-shadow: none !important;\n  }\n`\n\nexport const SecondaryButton = styled(PrimaryButton)`\n  color: #40AA97 !important;\n  border: 0 !important;\n  background: #EAF5F3 !important;\n  box-shadow: 1px 2px 2px rgba(207, 234, 229, 0.25) !important;\n  &:hover {\n    background: #EAF5F3 !important;\n    box-shadow: 1px 2px 2px rgba(207, 234, 229, 0.25), inset 1px 1px 5px #C2DAD6 !important;\n   }\n  &.Mui-disabled {\n    background: #E1F2EF !important;    \n    color: #AADBD2;  \n}\n`\n\nexport const TertiaryButton = styled(PrimaryButton)`\n  background: #FFFFFF !important;\n  color: #40AA97 !important;\n  border: 1px solid #F0F1F3 !important;\n  box-shadow: 1px 1px 5px rgba(207, 234, 229, 0.25) !important;\n  &:hover {\n    background: #FFFFFF !important;\n    box-shadow: inset 1px 1px 5px #E8E8E8 !important;\n   }\n  &.Mui-disabled {\n    background: #FFFFFF !important;    \n    color: #E8E8E8;  \n}\n`\n","import { Input } from '@mui/material'\nimport styled from 'styled-components'\n\nexport const Content = styled.div`\n    background: ${(props) => props.theme.colors.white};\n    padding: 1px 20px 20px;\n    border-radius: 16px;\n`\n\nexport const OptimizationContainer = styled.div`\n  width: 100%;\n  .upload-file {\n    margin: 20px 0;\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n    color: ${(props) => props.theme.colors.turquoise[5]};\n    font-weight: 700;\n    button, input {\n      justify-content: flex-start;\n      font-family: \"Inter\", sans-serif;\n    }\n    label {\n      font-weight: 700 !important;\n      svg {\n        margin-right: 8px;\n      }\n    }\n    .upload-button {\n      background: ${(props) => props.theme.colors.turquoise[6]};\n      color: ${(props) => props.theme.colors.white};\n      border: 1px transparent;\n      padding: 10px 20px;\n      text-align: center;\n      margin-right: 20px;\n      border-radius: 6px;\n      cursor: pointer;\n      &:hover {\n        background: ${(props) => props.theme.colors.turquoise[7]};\n      }\n      &.second-upload {\n        color: ${(props) => props.theme.colors.turquoise[5]};\n        background: transparent;\n        border: 1px solid;\n        &:hover {\n          color: ${(props) => props.theme.colors.turquoise[7]};\n        }\n      }\n    }\n  }\n  .optimization-input {\n    width: 100%;\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n    .section {\n      width: 100%;\n      display: flex;\n      margin: 10px 0;\n      min-height: 50px;\n      display: flex-start !important;\n      justify-content: space-between;\n      position: relative;\n      &.disabled {\n        opacity: 0.3;\n      }\n      &:last-of-type {\n        &:after {\n          height: 0;\n        }\n      }\n      &:after {\n        content: '';\n        position: absolute;\n        background: ${(props) => props.theme.colors.grey[1]};\n        bottom: 0;\n        left: 0;\n        width: 100%;\n        height: 1px;\n      }\n      .intro {\n        width: 40%;\n        h2 {\n          margin: 0;\n          font-size: ${(props) => props.theme.fontSizes.large};\n          font-weight: 500;\n        }\n        h3 {\n          margin: 0;\n          color: ${(props) => props.theme.colors.grey[5]};\n          font-weight: 300;\n          font-size: ${(props) => props.theme.fontSizes.medium};\n          line-height: ${(props) => props.theme.fontSizes.medium};\n        }\n      }\n      .input-wrapper {\n        width: 60%;\n        .inputs {\n          margin: 0 0 20px;\n          display: flex;\n          justify-content: space-between;\n        }\n      }\n      label {\n         margin-bottom: 0px;\n         font-weight: 400;\n         display: flex;\n         align-items: center;\n        svg {\n          margin-left: 5px;\n          width: 18px;\n        }\n      }\n      .MuiSlider-colorPrimary {\n        color: ${(props) => props.theme.colors.turquoise[2]};\n        margin: 15px 0;\n      }\n      .MuiInput-root {\n        margin: 6px 0;\n        border: 1px solid ${(props) => props.theme.colors.grey[1]};\n        &.Mui-focused {\n          border: 1px solid ${(props) => props.theme.colors.turquoise[4]};\n          background:  ${(props) => props.theme.colors.white};\n        }\n        &:after {\n          border: 0;\n        }\n      }\n      .MuiFormControl-root {\n        width: 45%;\n        margin-right: 50px;\n      }\n    }\n  }\n`\n\nexport const InputField = styled(Input)`\n  background:  ${(props) => props.theme.colors.grey[1]};\n  border-radius: 6px;\n  padding: 4px 8px;\n  &:before {\n    border: 0 !important;\n  }\n`","import React, { useState, useEffect } from 'react'\n\nimport { Optimizer } from 'src/engine/Optimizer'\nimport { MspXmlReader } from 'src/engine/MspXmlReader'\nimport { P6XerReader } from 'src/engine/P6XerReader'\n\nimport { Slider, FormControl, FormControlLabel, Tooltip, Radio } from '@mui/material'\nimport InfoOutlinedIcon from '@mui/icons-material/InfoOutlined'\nimport UploadFileIcon from '@mui/icons-material/UploadFile'\n\nimport Modal from 'src/feat/Modal'\n\nimport { PrimaryButton } from 'src/styled'\nimport { Content, OptimizationContainer, InputField } from './styled'\n// !\nconst ratioMarks = [\n  {\n    value: 0,\n    label: '0%',\n  },\n  {\n    value: 100,\n    label: '100%',\n  },\n  {\n    value: 200,\n    label: '200%',\n  },\n]\n// !\nconst stepMarks = [\n  {\n    value: 10,\n    label: '10',\n  },\n  {\n    value: 100,\n    label: '100',\n  },\n  {\n    value: 200,\n    label: '200',\n  },\n  {\n    value: 300,\n    label: '300',\n  },\n  {\n    value: 400,\n    label: '400',\n  },\n  {\n    value: 500,\n    label: '500',\n  },\n]\n\nexport default function InputData({\n  uploadedFile,\n  setUploadedFile,\n  fileName,\n  setFileName,\n  constraintsFileName,\n  setConstraintsFileName,\n  updateProject,\n  optimizer,\n  setOptimizer,\n  setReader,\n  goNext,\n}) {\n  const [isLoading, setIsLoading] = useState(false)\n  const [isFileUploaded, setIsFileUploaded] = useState(false)\n  const [project, setProject] = useState(null)\n\n  const [considerDates, setConsiderDates] = useState(optimizer?.project?.settings ? optimizer.project.settings.considerActualDates : true)\n  const [ratio, setRatio] = useState(optimizer?.project?.settings ? [optimizer.project.settings.minDurationRatio * 100, optimizer.project.settings.maxDurationRatio * 100] : [50, 150])\n  const [steps, setSteps] = useState(optimizer?.project?.settings ? optimizer.project.settings.optimizationSteps : 20)\n  const [learningRate, setLearningRate] = useState(optimizer?.project?.settings ? optimizer.project.settings.learningRate : 0.025)\n\n  useEffect(() => {\n    if (optimizer?.project?.settings) {\n      optimizer.project.settings.minDurationRatio = ratio[0] / 100\n      optimizer.project.settings.maxDurationRatio = ratio[1] / 100\n    }\n  }, [ratio])\n\n  useEffect(() => {\n    if (optimizer?.project?.settings) {\n      optimizer.project.settings.optimizationSteps = steps\n    }\n  }, [steps])\n\n  useEffect(() => {\n    if (optimizer?.project?.settings) {\n      optimizer.project.settings.considerActualDates = considerDates\n    }\n    updateProject(project)\n  }, [considerDates])\n\n  useEffect(() => {\n    if (optimizer?.project?.settings) {\n      optimizer.project.settings.learningRate = learningRate\n    }\n  }, [learningRate])\n\n  const handleConsiderDatesChange = (value) => {\n    if (value === 'true') {\n      setConsiderDates(true)\n    } else setConsiderDates(false)\n  }\n\n  const readProject = async (file) => {\n    console.log(file);\n    setUploadedFile(file)\n    setFileName(file.name)\n\n    const checkReader = file?.name.endsWith('xer') ? new P6XerReader() : new MspXmlReader()\n    const project = await checkReader.read(file)\n    setReader(checkReader)\n    setProject(project)\n    setOptimizer(new Optimizer(project))\n    setIsFileUploaded(true)\n  }\n\n  const readConstraints = async (file) => {\n    setConstraintsFileName(file.name)\n    await optimizer.applyConstraints(file)\n    setIsLoading(false)\n  }\n\n  useEffect(() => {\n    if (uploadedFile) {\n      readProject(uploadedFile)\n    }\n    updateProject(project)\n  }, [uploadedFile])\n\n  const useDemoProject = () => {\n    fetch('/demo_project.xml')\n      .then((r) => r.blob())\n      .then((r) => {\n        const file = new File([r], 'demo_project.xml')\n        setUploadedFile(file)\n        setIsFileUploaded(true)\n      })\n  }\n\n  const loadingModal = () => {\n    return <Modal\n      isLoading={isLoading}\n      title={'Applying Constraints'}\n      content=\"Please wait.\"\n      spinner\n    />\n  }\n\n  return (\n    <Content>\n      <h2>Upload schedule and enter optimization settings</h2>\n      <OptimizationContainer>\n        <div className=\"optimization-input\">\n          <div className=\"section\">\n            <div className=\"intro\">\n              <h2>Schedule</h2>\n              <h3>Upload your schedule (.xer or .xml)</h3>\n            </div>\n            <div className=\"input-wrapper\">\n              <div className=\"inputs\" style={{ alignItems: 'center' }}>\n                <div className=\"upload-file\">\n                  <input\n                    hidden\n                    type=\"file\"\n                    id=\"project-file\"\n                    name=\"project\"\n                    onChange={(e) => {\n                      setUploadedFile(e.target.files[0])\n                    }} \n                    accept=\".xer,.xml\"\n                  />\n                  <label className=\"upload-button\" htmlFor=\"project-file\">\n                    <UploadFileIcon /> Upload file\n                  </label>\n                  <span>{fileName}</span>\n                </div>\n                <span>\n                  or{' '}\n                  <span\n                    style={{ textDecoration: 'underline', cursor: 'pointer' }}\n                    onClick={useDemoProject}\n                  >\n                    use a demo project\n                  </span>\n                </span>\n              </div>\n            </div>\n          </div>\n          <div className={`section ${isFileUploaded ? '' : 'disabled'}`}>\n            <div className=\"intro\">\n              <h2>Constraints</h2>\n              <h3>\n                Upload your constraints (\n                <span\n                  style={{ textDecoration: 'underline', cursor: 'pointer' }}\n                  onClick={() => {\n                    optimizer.downloadConstraints()\n                  }}\n                >\n                  download template\n                </span>\n                )\n              </h3>\n            </div>\n            <div className=\"input-wrapper\">\n              <div className=\"inputs\">\n                <div className=\"upload-file\">\n                  <input\n                    hidden\n                    type=\"file\"\n                    id=\"constraints-file\"\n                    name=\"constraints\"\n                    onChange={(e) => {\n                      setIsLoading(true)\n                      readConstraints(e.target.files[0])\n                    }}\n                    accept=\".xls,.xlsx\"\n                  />\n                  <label\n                    className=\"upload-button  second-upload\"\n                    htmlFor=\"constraints-file\"\n                  >\n                    <UploadFileIcon /> Upload file\n                  </label>\n                  <span>{constraintsFileName}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className={`section ${isFileUploaded ? '' : 'disabled'}`}>\n            <div className=\"intro\">\n              <h2>Optimization Settings</h2>\n              <h3>Customize your optimization results</h3>\n            </div>\n            <div className=\"input-wrapper\">\n              <div className=\"inputs\">\n                <FormControl>\n                  <label>Ignore Project Scheduled Dates\n                    <Tooltip\n                      title={\n                        <div style={{ fontSize: '13px', fontFamily: 'Inter' }}>\n                          The engine will not take into account any defined dates therefore the optimized project will not follow original schedule\n                        </div>\n                      }\n                    >\n                      <InfoOutlinedIcon />\n                    </Tooltip></label>\n                  <div className=\"row\" style={{ justifyContent: 'flex-start' }}>\n                    <FormControlLabel value={false} checked={considerDates === false} control={<Radio />} label=\"Yes\" onChange={(e) =>\n                      handleConsiderDatesChange(e.target.value)} />\n                    <FormControlLabel value={true} checked={considerDates === true} control={<Radio />} label=\"No\" onChange={(e) => handleConsiderDatesChange(e.target.value)} />\n                  </div>\n                </FormControl>\n                <FormControl>\n                  <label>\n                    Learning Rate\n                    <Tooltip\n                      title={\n                        <div style={{ fontSize: '13px', fontFamily: 'Inter' }}>\n                          Learning rate is the step size of the engine which affects speed, stability, and convergence. The higher the rate, the faster results are generated.\n                        </div>\n                      }\n                    >\n                      <InfoOutlinedIcon />\n                    </Tooltip>\n                  </label>\n                  <InputField\n                    id=\"learningRate\"\n                    type=\"number\"\n                    value={learningRate}\n                    onChange={(e) => {\n                      setLearningRate(e.target.value)\n                    }}\n                    placeholder=\"eg: 0.025\"\n                    variant=\"outlined\"\n                    disabled={!isFileUploaded}\n                  />\n                </FormControl>\n              </div>\n              <div className=\"inputs\">\n                <FormControl style={{ width: '100%' }}>\n                  <label>\n                    Optimization Ratio {' '}\n                    {ratio ? (\n                      <>\n                        ({ratio[0].toString()}% - {ratio[1].toString()}%)\n                      </>\n                    ) : (\n                      ''\n                    )}\n                    <Tooltip\n                      title={\n                        <div style={{ fontSize: '13px', fontFamily: 'Inter' }}>\n                          Ratio = New Duration over Baseline Duration\n                        </div>\n                      }\n                    >\n                      <InfoOutlinedIcon />\n                    </Tooltip>\n                  </label>\n\n                  <Slider\n                    id=\"optimization-ratio\"\n                    step={5}\n                    min={0}\n                    max={200}\n                    valueLabelDisplay=\"auto\"\n                    getAriaLabel={() => 'Optimization Ratio'}\n                    value={ratio}\n                    marks={ratioMarks}\n                    onChange={(e) => setRatio(e.target.value)}\n                    disabled={!isFileUploaded}\n                  />\n                </FormControl>\n              </div>\n              <div className=\"inputs\">\n                <FormControl style={{ width: '100%' }}>\n                  <label>Optimization Steps ({steps.toString()})\n                    <Tooltip\n                      title={\n                        <div style={{ fontSize: '13px', fontFamily: 'Inter' }}>\n                          Recommended steps: 20 - 50, the higher the number the longer it will take to optimize results\n                        </div>\n                      }\n                    >\n                      <InfoOutlinedIcon />\n                    </Tooltip>\n                  </label>\n\n                  <Slider\n                    id=\"optimization-steps\"\n                    aria-label=\"optimization-steps\"\n                    value={steps}\n                    onChange={(e) => {\n                      setSteps(e.target.value)\n                    }}\n                    step={10}\n                    min={10}\n                    max={500}\n                    marks={stepMarks}\n                    valueLabelDisplay=\"auto\"\n                    disabled={!isFileUploaded}\n                  />\n                </FormControl>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div />\n          <PrimaryButton\n            variant=\"contained\"\n            onClick={goNext}\n            disabled={!isFileUploaded}\n          >\n            Next\n          </PrimaryButton>\n        </div>\n\n        <Modal\n          isLoading={isLoading}\n          title={'Reading data...'}\n          content=\"Please wait, this may take a few moments.\"\n          spinner\n        />\n\n      </OptimizationContainer >\n    </Content >\n  )\n}\n","export const frontline_color_palette = {\n  FrontlineGreen: '',\n  FrontlineYellow: '',\n  FrontlineOrange: '',\n  FrontlineBlue: '',\n  FrontlineRed: ''\n}\n\nexport const plot_color_palette = {\n  TaskPlot: {\n    optimizedTask: '#82B5C7',\n    optimizedCriticalTask: '#e61717',\n    baselineTask: '#CCCCCC',\n    baselineCriticalTask: '#e6a7a7'\n  },\n  ComparisonPlot: {\n    'Balanced': 'rgba(130, 181, 199, 0.9)',\n    'Fastest': 'rgba(247, 220, 91, 0.9)',\n    'Minimum Resources': 'rgba(219, 121, 48, 0.9)',\n    'Levelled Resources': 'rgba(170, 187, 93, 0.9)',\n    'Constraint Compliance': 'rgba(147, 156, 227, 0.9)'\n  },\n  ResourcePlot: {\n    allResources: ['#55CBCD98', '#f7dc5b98', '#FFAEA598', '#939ce398', '#AABB5D98', '#BAA19098', '#db793098', '#099A4D98', '#f07e9398', '#FDAE6198', '#D53E4F98', '#ABDDA498', '#E6F598', '#9B4FA298', '#6891F98F', '#D2056298', '#1791D598', '#DC3E0D98', '#FDC62A98', '#234F1D98', '#49360198', '#45130498', '#4f022598', '#473B7998', '#95613A98', '#FB5DA598', \"#F8A48A98\", \"#ABDDA498\", \"#ADA5D398\", \"#93290998\", '#C3E6F998', '#FEC2DD98']\n  }\n}","import * as xlsx from 'xlsx'\n\nexport const ms_per_hr = 60 * 60 * 1000\nexport const ms_per_day = 24 * ms_per_hr\nexport const ms_per_week = 7 * ms_per_day\n\nexport function encode_id(id) { return 'id_' + id }\nexport function len(x) { return x && Object.keys(x).length }\nexport function copy(x) { return JSON.parse(JSON.stringify(x)) }\n\nexport function parse_drtn_hr(x = 'PT200H0M0S') {\n  return parseFloat(x.split('PT')[1].split('H')[0])\n}\n\nexport function recover_drtn(drtn_hr) {\n  return 'PT' + drtn_hr + 'H0M0S'\n}\n\nexport function parse_time(x = '07:00:00') {\n  return Date.parse('1971-06-28T' + x)\n    - Date.parse('1971-06-28T00:00:00')\n}\n\nexport function to_iso(timestamp) {\n  return new Date(timestamp).toISOString().split('.')[0]\n}\n\nexport function fmt_date(date) {\n  return new Date(date).toISOString().replace('T', ' ').slice(0, 16)\n}\n\nexport function export_excel({ book, filename }) {\n  let wb = xlsx.utils.book_new()\n  Object.entries(book).forEach(([name, data]) => {\n    let ws = xlsx.utils.json_to_sheet(Object.values(data))\n    xlsx.utils.book_append_sheet(wb, ws, name)\n  })\n  xlsx.writeFile(wb, filename)\n}\n\nexport function read_excel(file) {\n  return new Promise((res) => {\n    let reader = new FileReader()\n    reader.onload = e => {\n      let book = xlsx.read(e.target.result, { type: 'binary' })\n      let data = {}\n      book.SheetNames.forEach(name => {\n        data[name] = xlsx.utils.sheet_to_json(book.Sheets[name], {\n          //raw: true,\n        })\n      })\n      res(data)\n    }\n    reader.readAsBinaryString(file)\n  })\n}\n\nexport function to_dict(keys = [], values = []) {\n  let dic = {}\n  keys.forEach((k, i) => dic[k] = values[i])\n  return dic\n}\n\nexport function export_file(filename, text) {\n  let elm = document.createElement('a')\n  let prefix = 'data:text/plain;charset=utf-8,'\n  elm.setAttribute('href', prefix + encodeURIComponent(text))\n  elm.setAttribute('download', filename)\n  elm.style.display = 'none'\n  document.body.appendChild(elm)\n  elm.click()\n  document.body.removeChild(elm)\n}\n\nexport function down_sample(data_, keep) {\n  let data = []\n  if (data_.length > keep) {\n    let skip = Math.floor(data_.length / keep)\n    for (let i = 0; i < keep; i++) {\n      data.push(data_[i * skip])\n    }\n  }\n  else data = data_\n  return data\n}\n\nexport function sleep(ms) {\n  return new Promise((res, rej) => {\n    setTimeout(() => { res() }, ms)\n  })\n}","/*\n * @Date: 2023-05-03 15:45:48\n * @LastEditors:  thunder thunderleng@gmail.com\n * @LastEditTime: 2023-05-11 14:19:04\n * @FilePath: \\app\\src\\utils\\plot.js\n */\nimport * as d3 from 'd3'\nimport { ms_per_day } from '../mods/a_utils'\nexport function init_d3({\n  margin = 50,\n  x_domain,\n  y_domain,\n  width,\n  height,\n  ref,\n  x_label,\n  y_label,\n  x_type = d3.scaleLinear,\n  y_type = d3.scaleLinear,\n  types,\n  name\n}) {\n  const x1 = margin,\n    x2 = width - margin,\n    y2 = margin,\n    y1 = height - margin,\n    x_scale = x_type(x_domain, [x1, x2]),\n    y_scale = y_type(y_domain, [y1, y2])\n\n  const svg = d3.select(ref.current).attr('width', width).attr('height', height)\n  svg.selectChildren().remove()\n  // !Clip Path \n  svg.style('overflow', 'hidden')\n  // \n  const clipPath = svg.insert('clipPath')\n    .attr('id', 'chartClipPath')\n    .append('rect')\n    .attr('x', x1) // \n    .attr('y', y1) // \n    .attr('width', x2 - x1) // \n    .attr('height', -(y2 - y1)) // \n    .attr('transform', `translate(0,${y2 - y1})`)\n    \n  // \n  // \n  // .attr('clip-path', 'url(#chartClipPath)')\n  //!end \n  const x_axis = svg.append('g')\n\n  x_axis\n    .call(d3.axisBottom(x_scale))\n    .attr('transform', `translate(0, ${y1})`)\n    .call((g) => {  \n      g.append('text')\n        .attr('x', width / 2)\n        .attr('y', 40)\n        .attr('fill', '#2d2d2d')\n        .attr('font-size', 16)\n        .attr('text-align', 'right')\n        .text(x_label)\n    })\n\n  const x_axis_2 = svg.append('g')\n  x_axis_2.call(d3.axisTop(x_scale).tickValues([])).attr('transform', `translate(0, ${y2})`)\n\n  const y_axis = svg.append('g')\n  y_axis\n    .call(d3.axisLeft(y_scale))\n    .attr('transform', `translate(${x1}, 0)`)\n    .call((g) => {\n      g.append('text')\n        .attr('text-anchor', 'end')\n        .attr('y', 30) // margin from TOP\n        .attr('x', -30) // margin from TOP\n        .attr('fill', '#2d2d2d')\n        .attr('font-size', 16)\n        .text(y_label)\n        // .attr('transform', 'rotate(-90)')\n        .attr('text-anchor', 'start')\n    })\n\n  const y_axis_2 = svg.append('g')\n  y_axis_2.call(d3.axisRight(y_scale).tickValues([])).attr('transform', `translate(${x2}, 0)`)\n\n  const xGrid = d3.axisBottom()\n    .scale(x_scale)\n    .tickFormat('')\n    .tickSizeInner(height - 2 * margin)\n\n  svg.append('g')\n    .attr('class', 'x-grid')\n    .attr('transform', `translate(0, ${y2})`)\n    .style('opacity', 0.3)\n    .style('stroke-dasharray', ('3, 3'))\n    .call(xGrid)\n\n  const yGrid = d3.axisLeft()\n    .scale(y_scale)\n    .tickFormat('')\n    .tickSizeInner(-width + 2 * margin)\n\n  svg.append('g')\n    .attr('class', 'y-grid')\n    .attr('transform', `translate(${x1}, 0)`)\n    .style('opacity', 0.3)\n    .style('stroke-dasharray', ('3, 3'))\n    .call(yGrid)\n  //! zoom\n  const zoomed = (event) => {\n    const { transform } = event\n    // \n    svg.select('.x-grid').call(xGrid.scale(transform.rescaleX(x_scale)))\n    svg.select('.y-grid').call(yGrid.scale(transform.rescaleY(y_scale)))\n    // \n    x_axis.call(d3.axisBottom(transform.rescaleX(x_scale)))\n    x_axis_2.call(d3.axisTop(transform.rescaleX(x_scale)).tickValues([]))\n    y_axis.call(d3.axisLeft(transform.rescaleY(y_scale)))\n    y_axis_2.call(d3.axisRight(transform.rescaleY(y_scale)).tickValues([]))\n    // \n    // \n    // const selectedElements = svg.selectAll(type).nodes();\n    // console.log(selectedElements);\n    // console.log(svg.selectAll(type).data());\n    types && types.forEach(type => {\n      switch (type) {\n        case 'new_data':\n          svg.selectAll(`.${type}`)\n            .attr('cy', (d) => transform.rescaleY(y_scale)(d.rsrc_max))\n            .attr('cx', (d) => transform.rescaleX(x_scale)(d.drtn_day))\n          break\n        case 'base_data':\n          svg.selectAll(`.${type}`)\n            \n            .attr('cy', (d) => transform.rescaleY(y_scale)(d.output.laborDistribution.max.data))\n            .attr('cx', (d) => transform.rescaleX(x_scale)(d.output.projectDurationDays.data))\n          break  \n        case 'plannedData':\n          svg.selectAll(`.${type}`)\n            .attr('x', (d) => transform.applyX(x_scale(d.plannedStart)))\n            .attr('y', (d, i) => transform.applyY(y_scale(i)))  // Y\n            .attr('width', (d) => Math.max(transform.k * (x_scale(d.plannedFinish) - x_scale(d.plannedStart)), 0))\n            .attr('height', (d) => Math.max(transform.k * (y_scale(1) - y_scale(0)) - 0.5 - 0.5, 0))  // Y\n    \n          break\n        case 'newData':\n          svg.selectAll(`.${type}`)\n            .attr('x', (d) => transform.applyX(x_scale(d.newStart?.data)))\n            .attr('y', (d, i) => transform.applyY(y_scale(i)))  // Y\n            .attr('width', (d) => Math.max(transform.k * (x_scale(d.newFinish?.data) - x_scale(d.newStart?.data)), 0))\n            .attr('height', (d) => Math.max(transform.k * (y_scale(1) - y_scale(0)) - 0.5 - 0.5, 0))  // Y\n      \n          break  \n        case 'Labor_data':\n          svg.selectAll(`.${type}`)\n       \n            .attr('x', (d) => transform.applyX(x_scale(d[0])))\n            .attr('y', (d, i) =>transform.applyY(y_scale(d[1].data)))  // Y\n            .attr('width', (d) =>Math.max(transform.k * (x_scale(ms_per_day) - x_scale(0))-1, 0))\n            .attr('height', (d) => Math.max(transform.k * (y_scale(y_domain[0]) - y_scale(d[1].data)), 0))  // Y\n\n          break \n        case 'step_data' :\n          svg.selectAll(`.${type}`)\n            .attr('cy', (d) => {\n              if (name === 'laborDistribution') {\n                return transform.applyY(y_scale(d.output[name].max))\n              } \n              if (name === 'loss') {\n                return transform.applyY(y_scale(d.loss))\n              } \n              if (name === 'criticalPath') {\n                return transform.applyY(y_scale(d.output.criticalPath.length))\n              }\n              return transform.applyY(y_scale(d.output[name]))\n            })\n            .attr('cx', (d) => transform.rescaleX(x_scale)(d.idx))\n          break\n        case 'Resources_data':\n          svg.selectAll(`.${type}`)\n            .attr('x', (d) => transform.applyX(x_scale(d[0])))\n            .attr('y', (d, i) =>transform.applyY(y_scale(d[1].data)))  // Y\n            .attr('width', (d) =>Math.max(transform.k * (x_scale(ms_per_day) - x_scale(0)), 0))\n            .attr('height', (d) => Math.max(transform.k * (y_scale(y_domain[0]) - y_scale(d[1].data)), 0))  // Y\n\n          break  \n        default:\n          break\n      }\n    })\n   \n  }\n  const zoom = d3.zoom()\n    .scaleExtent([1, Infinity])\n    .translateExtent([[0, 0], [width, height]])\n    .on('zoom', zoomed)\n\n  svg.call(zoom)\n  svg.call(zoom.transform, d3.zoomIdentity)\n  // !\n  setTimeout(() => {\n    svg.selectAll('.clip').attr('clip-path', 'url(#chartClipPath)')\n  }, 0)\n  // !end\n  return { svg, x_scale, y_scale }\n}\n\nexport function domains_with_margin(x_domain, y_domain, x_amount, y_amount) {\n  const x_margin = (x_domain[1] - x_domain[0]) * x_amount\n  const y_margin = (y_domain[1] - y_domain[0]) * y_amount\n  return {\n    x_domain: [x_domain[0] - x_margin, x_domain[1] + x_margin],\n    y_domain: [y_domain[0] - y_margin, y_domain[1] + y_margin]\n  }\n}","import React, { useEffect, useRef } from 'react'\nimport * as d3 from 'd3'\n\nimport { init_d3, domains_with_margin } from '../../utils/plot'\nimport { plot_color_palette } from '../../utils/color'\n\nexport default function DistibutionPlot({\n  results, constraintsFileName,\n  baselineResults,\n  steps,\n  selectedPreset,\n  selectedResultIndex = -1,\n  width = 550, height = 500,\n  k, x_label, y_label, onClick\n}) {\n  const ref = useRef()\n  const types=['new_data','base_data']\n  useEffect(() => {\n    if (!Object.values(results).length) return null\n\n    let newData = []\n    Object.entries(results).map(([key, value]) => {\n      value.map((i, idx) => {\n        newData.push({\n          idx: idx,\n          name: key,\n          drtn_day: i.output.projectDurationDays,\n          rsrc_max: i.output.laborDistribution.max\n        })\n      })\n    }).flat()\n\n    if (constraintsFileName === 'No file chosen') {\n      newData = newData.filter((i) => i.name !== 'Constraint Compliance')\n    }\n\n    const projectDays = Object.values(newData).map((x) => {\n      return x.drtn_day\n    })\n\n    const laborMax = Object.values(newData).map((x) => {\n      return x.rsrc_max\n    })\n\n    const x_domain = d3.extent(projectDays)\n    const y_domain = d3.extent(laborMax)\n    const domains = domains_with_margin(x_domain, y_domain, 0.2, 0.2)\n    \n    const { svg, x_scale, y_scale } = init_d3({\n      x_domain: domains.x_domain,\n      y_domain: domains.y_domain,\n      margin: 50,\n      width, height, ref,\n      x_label,\n      y_label,\n      x_type: d3.scaleLinear,\n      y_type: d3.scaleLinear,\n      types,\n    })\n    const circleBaseline = svg.append('g').attr('class','clip')\n    // !\n    // !\n    circleBaseline.selectAll('circle')\n      .data([baselineResults])\n      .join('circle')\n      .attr('cx', d => x_scale(d.output.projectDurationDays.data))\n      .attr('cy', d => y_scale(d.output.laborDistribution.max.data))\n      .attr('r', d => 6)\n      .attr('z-index', '-1')\n      .attr('fill', '#CCCCCC')\n      .attr('class', 'base_data')\n      \n\n    const circle = svg.append('g').attr('class','clip')\n    circle.selectAll('circle')\n      .data(newData)\n      .join('circle')\n      .attr('cx', d =>\n        x_scale(d.drtn_day)\n      )\n      .attr('cy', d => y_scale(d.rsrc_max))\n      .attr('r', (d, i) => {\n        return (d.idx === steps) - 1 ? 6 : 3\n      })\n      .attr('class', 'new_data')\n      .style('stroke', (d, i) => {\n        return selectedResultIndex === d.idx && selectedPreset === d.name ? '#e61717' : ''\n      })\n      .attr('fill-opacity', (d, i) => {\n        return d.idx / (newData.length <= 40 ? newData.length / 8 : newData.length / 4)\n      })\n      .attr('fill', (d, i) => {\n        const newName = d.name\n        return plot_color_palette.ComparisonPlot[newName.toString()]\n      })\n      .on('click', (e, d) => {\n        onClick(d.name, d.idx)\n      })\n      .style('cursor', 'pointer')\n    \n    // .attr('cx', (d) => transform.rescaleX(x_scale)(d.drtn_day))\n  }, [selectedResultIndex, selectedPreset, results])\n\n  return (\n    <svg ref={ref}>\n    </svg>\n  )\n}\n","import styled from 'styled-components'\n\nexport const OptimizationContainer = styled.div`\n  width: 100%;\n  .summary {\n    width: 100%;\n    display: inline-flex;\n    justify-content: space-between;\n    background: ${(props) => props.theme.colors.white};\n    border-radius: 16px;\n    margin: 0px 0 20px;\n    .stats {\n      padding: 25px;\n      width: 20%;\n      display: flex;\n      flex-direction: column;\n      position: relative;\n      &:last-child {\n        &:after {\n          width: 0px;\n        }\n      }\n      &:after {\n        content: '';\n        height: 65px;\n        width: 1px;\n        background: ${(props) => props.theme.colors.grey[1]};\n        position: absolute;\n        right: 0;\n        top: calc(50% - 32px);\n      }\n      .title {\n        display: flex;\n        align-items: center;\n        svg {\n          margin-left: 5px;\n          width: 18px;\n        }\n      }\n      .figure {\n        display: inline-flex;\n        margin: 16px 0;\n        align-items: baseline;\n        .numbers {\n          font-family: \"Lato\", sans-serif;\n          font-size: 40px;\n          color: #000000;\n          font-weight: 700;\n          margin-right: 10px;\n        }\n        .baseline-stats {\n            font-family: \"Lato\", sans-serif;\n            font-size: 28px;\n            color: ${(props) => props.theme.colors.grey[5]};\n            font-weight: 700;\n         }\n      }\n      .badge {\n          padding: 3px 10px;\n          font-size: 12px;\n          font-weight: 700;\n          border-radius: 8px;\n          width: 50px;\n          display: flex;\n          align-items: center;\n          svg {\n            margin-right: 5px;\n          }\n          &.plus {\n            background: #e2f5e2;\n            color: ${(props) => props.theme.validationColors.success};\n          }\n          &.minus {\n            background: #feeaea;\n            color:  ${(props) => props.theme.validationColors.error};\n          }\n        }\n    }\n  }\n  .Mui-checked{\n    color:  ${(props) => props.theme.colors.turquoise[4]} !important;\n  }\n`\n\nexport const BaselineContainer = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  .chart {\n    background: ${(props) => props.theme.colors.white};\n    box-sizing: border-box;\n    border-radius: 16px;\n    padding: 20px;\n    width: 64%;\n  \n  }\n  .sidebar {\n    width: 35%;\n    .metrics {\n      background: ${(props) => props.theme.colors.white};\n      border-radius: 16px;\n      padding: 20px;\n      margin-bottom: 11px;\n      display: flex;\n      flex-direction: column;\n      .stats {\n        margin-bottom: 8px;\n        .title {\n          font-weight: bold;\n          color: ${(props) => props.theme.backgroundColors.dark};\n          margin-bottom: 2px;\n          .badge {\n            svg {\n              width: 14px;\n              height: 14px;\n            }\n            &.plus {\n              color: ${(props) => props.theme.validationColors.success}\n            }\n            &.minus {\n              color: ${(props) => props.theme.validationColors.error}\n            }\n          }\n        }\n        h2 {\n          margin: 0;\n        }\n      }\n    }\n    .options {\n      background: ${(props) => props.theme.colors.white};\n      border-radius: 16px;\n      padding: 20px;\n      margin-bottom: 20px;\n      .MuiFormGroup-root {\n        margin: 10px 0 0;\n      }\n      .presets {\n        margin-bottom: 7px;\n        display: inline-flex;\n      }\n      .MuiRadio-root {\n        padding: 0 0 0 10px;\n        margin-right: 5px;\n      }\n    }\n    button {\n      width: 100% !important;\n    }\n  }\n`\n\nexport const OptimizationSummary = styled.div`\n  display: flex;\n  justify-content: space-between;\n  .box {\n    height: 250px;\n    overflow-y: scroll;\n    &.presets {\n      width: 40%;\n    }\n    &.chart {\n      width: 55%;\n    }\n    &.stats {\n      width: 15%;\n    }\n  }\n`\n\nexport const OptimizationCharts = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 20px;\n  width: 100%;\n  box-sizing: border-box;\n  .full-chart {\n    box-sizing: border-box;\n    background: ${(props) => props.theme.colors.white};\n    padding: 20px;\n    width: 100%;\n    border-radius: 16px;\n  }\n  .chart { \n    width: 49%;\n  \n    .section {\n      margin-bottom: 20px;\n      background: ${(props) => props.theme.colors.white};\n      padding: 20px;\n      border-radius: 16px;\n      .MuiFormControl-root {\n        width: 100%;\n        .presets {\n          justify-content: flex-start;\n          label {\n            width: 35%;\n            margin-right: 0;\n          }\n        }\n      }\n    }\n  }\n  .bar-tooltip {\n    padding: 5px;\n    border-radius: 8px;\n    background: yellow;\n  }\n`\n\nexport const LoadingTitle = styled.div`\n  display: inline-block;\n  @keyframes blink {\n      0% {\n        opacity: .2;\n      }\n      20% {\n        opacity: 1;\n      }\n      100% {\n        opacity: .2;\n      }\n  }\n\n  span {\n    font-size: 50px;\n    animation-name: blink;\n    animation-duration: 1.4s;\n    animation-iteration-count: infinite;\n    animation-fill-mode: both;\n  }\n\n  span:nth-child(2) {\n      animation-delay: .2s;\n  }\n\n  span:nth-child(3) {\n      animation-delay: .4s;\n  }\n`","import styled from 'styled-components'\n\nexport const DownloadContainer = styled.div`\n\n`","import React from 'react';\nimport ArrowDownwardRoundedIcon from '@mui/icons-material/ArrowDownwardRounded';\nimport { downloadImage } from \"../../utils/dom2image\";\nimport { DownloadContainer } from './styled'\nimport {SecondaryButton} from 'src/styled.js'\nexport default function DownloadChart({ classNames, children }) {\n  const handleDownload = () => {\n    downloadImage(classNames); // \n  };\n\n  return (\n    <SecondaryButton onClick={handleDownload}>\n       {children}\n       <ArrowDownwardRoundedIcon />\n    </SecondaryButton>\n\n  );\n}\n","import { domToJpeg } from 'modern-screenshot'\n\nexport function downloadImage(class_name){\n  console.log(class_name);\n    domToJpeg(document.querySelector(`.${class_name}`)).then(dataUrl => {\n        const link = document.createElement('a')\n        link.download = `${class_name}.jpg`\n        link.href = dataUrl\n        link.click()\n      })\n\n}\n","import React, { useState, useEffect } from 'react'\n\nimport { FormControlLabel, FormControl, Radio, RadioGroup } from '@mui/material'\nimport ArrowUpwardIcon from '@mui/icons-material/ArrowUpward'\nimport ArrowDownwardIcon from '@mui/icons-material/ArrowDownward'\n\nimport { plot_color_palette } from '../../../utils/color'\n\nimport DistributionPlot from '../../../components/Plot/Distribution'\n\nimport { PrimaryButton } from 'src/styled'\nimport { OptimizationContainer, BaselineContainer } from './styled'\n\n// jpg\nimport DownloadChart from \"../../../feat/DownloadChart\"\n\n\nexport default function BaselineSummary({ optimizer, constraintsFileName, baseline, selectedPreset, setSelectedPreset, selectedResultIndex, setSelectedResultIndex, goNext }) {\n  const [currentTasks, setCurrentTasks] = useState(Object.values(optimizer?.project?.tasks).filter((i) => i.newFinish))\n  const baselineTasks = Object.values(optimizer?.plannedproject?.tasks)\n\n  const [baselineResults, setBaselineResults] = useState(optimizer?.plannedproject)\n  const [steps, setSteps] = useState(optimizer?.project?.settings?.optimizationSteps)\n\n  const [data, setData] = useState(optimizer?.results)\n  const [listOfPresets, setListOfPresets] = useState(Object.keys(data))\n  const [selectedPresetResult, setSelectedPresetResult] = useState(data[selectedPreset])\n\n  const selectedPresetResultOutput = data[selectedPreset]?.at(selectedResultIndex)?.output\n  const newProjectDuration = selectedPresetResultOutput ? selectedPresetResultOutput?.projectDurationDays : 0\n\n  const newTasks = Object.values(optimizer?.project?.tasks)\n  const baselineCriticalTasks = optimizer?.planned?.criticalPath\n  const newCriticalTasks = selectedPresetResultOutput?.criticalPath\n\n  const baselineResources = Object.values(optimizer?.plannedproject?.resources)\n\n  useEffect(() => {\n    if (optimizer?.results['Balanced'] === undefined) {\n      setTimeout(() => {\n        optimizer.optimizeDefaults()\n        setSelectedResultIndex(selectedPresetResult?.length - 1)\n        setBaselineResults(optimizer?.plannedproject)\n        setSteps(optimizer?.project?.settings?.optimizationSteps)\n      }, 100)\n      setTimeout(() => {\n        setSelectedPresetResult(optimizer?.results[selectedPreset])\n        setSelectedResultIndex(optimizer?.results[selectedPreset].length - 1)\n      }, 500)\n    }\n    else return null\n  }, [])\n\n  useEffect(() => {\n    const renderUi = setInterval(() => {\n      setData(optimizer?.results)\n      setListOfPresets(Object.keys(optimizer?.results))\n      setCurrentTasks(Object.values(optimizer?.project?.tasks).filter((i) => i.newFinish))\n    }, 100)\n\n    return () => clearInterval(renderUi)\n  }, [])\n\n  useEffect(() => {\n    setCurrentTasks(Object.values(optimizer?.project?.tasks).filter((i) => i.newFinish))\n  }, [selectedPreset])\n\n  useEffect(() => {\n    if (optimizer && selectedPresetResult && selectedPresetResult.at(selectedResultIndex)) {\n      optimizer.simulate(selectedPresetResult.at(selectedResultIndex).durationRatios)\n    }\n  }, [selectedPresetResult])\n\n  useEffect(() => {\n    Object.values(optimizer?.plannedproject?.tasks).filter((d) => d.newFinish).map((i) => {\n    })\n  }, [])\n\n\n  const calculatePercentage = (optimized, baseline) => {\n    const diff = optimized && baseline ? (optimized - baseline) : 0\n    const percentage = ((diff / baseline) * 100)\n    const checkPositive = Math.sign(percentage)\n    if (checkPositive === 1) {\n      return <span className='badge minus'>{(Math.round(percentage))}%<ArrowUpwardIcon /></span>\n    }\n    else if (checkPositive === -1) {\n      return <span className='badge plus'>{Math.abs((Math.round(percentage * 100) / 100))}%<ArrowDownwardIcon /></span>\n    }\n    else { return <span className='badge'>{(Math.round(percentage))}%</span> }\n  }\n\n  const renderSwitch = (label) => {\n    switch (label) {\n      case 'Balanced':\n        return 'Best combination of the others'\n      case 'Fastest':\n        return 'Shortest project duration'\n      case 'Minimum Resources':\n        return 'Least amount of required resources'\n      case 'Levelled Resources':\n        return 'Best resource distribution'\n      case 'Constraint Compliance':\n        return 'Satisfies all constraints'\n      // return `Satisfies all constraints ${data[label].length}`\n      default:\n        return ''\n    }\n  }\n\n  const buttonClick = () => {\n    setSelectedResultIndex(optimizer?.results[selectedPreset].length - 1)\n    optimizer.simulate(selectedPresetResult.at(selectedResultIndex).durationRatios)\n    goNext()\n  }\n\n  return <>\n    <OptimizationContainer>\n      <h2>\n        Baseline Summary\n        <div className=\"chip primary\"><small>{optimizer?.project?.settings?.optimizationSteps} steps</small></div>\n        <div className=\"chip primary\"><small>{optimizer?.project?.settings?.minDurationRatio * 100}% - {optimizer?.project?.settings?.maxDurationRatio * 100}% ratio</small></div>\n      </h2>\n\n      <BaselineContainer>\n        <div className=\"chart Comparison-Chart\">\n          <div className='chart-title'>\n            <h4 >Comparison Chart</h4>\n            <DownloadChart classNames=\"Comparison-Chart\">\n              Download\n            </DownloadChart>\n          </div>\n          <div className=\"legend\">\n            <div className=\"item\">\n              <div style={{ width: '14px', height: '14px', background: '#cccccc', marginRight: '5px', borderRadius: '50%' }}></div>\n              <div>Baseline</div>\n            </div>\n\n            {listOfPresets.map((p) => {\n              return <div key={p} className={`item ${constraintsFileName === 'No file chosen' && p === 'Constraint Compliance' ? 'hidden' : ''}`}>\n                <div style={{ width: '14px', height: '14px', background: plot_color_palette.ComparisonPlot[p], marginRight: '5px', borderRadius: '50%' }}></div>\n                <div>{p}</div>\n              </div>\n            })}\n          </div>\n\n          <DistributionPlot\n            key={selectedPresetResult}\n            constraintsFileName={constraintsFileName}\n            results={data || []}\n            baselineResults={baselineResults || []}\n            width=\"750\"\n            steps={steps}\n            selectedPreset={selectedPreset}\n            selectedResultIndex={selectedResultIndex}\n            x_label=\"Duration (days)\"\n            y_label=\"Maximum Resource (units)\"\n            onClick={(preset, i) => {\n              setSelectedPreset(preset)\n              setSelectedResultIndex(i)\n            }}\n          />\n        </div>\n\n        <div className=\"sidebar\">\n          <div className=\"metrics\">\n            <div className=\"stats\">\n              <div className=\"title\">Project Duration {calculatePercentage(newProjectDuration, Math.round(baseline?.duration))}</div>\n              <div className=\"figure\">\n                <h2>\n                  {Math.round(newProjectDuration)}&nbsp;\n                  <span className=\"subtitle\">{Math.round(baseline?.duration)}</span>&nbsp;days\n                </h2>\n              </div>\n            </div>\n            <div className=\"stats\">\n              <div className=\"title\">Changed Tasks vs Total N of Tasks&nbsp;\n                {/* <span className='badge'>\n                  {Math.abs(Math.round((100 - (((baselineTasks?.length - currentTasks?.length) / baselineTasks?.length) * 100)) * 100) / 100)}%</span> */}\n              </div>\n              <div className=\"figure\">\n                <h2>{currentTasks?.length}/{Math.round(baselineTasks?.length)}</h2>\n              </div>\n            </div>\n            <div className=\"stats\">\n              <div className=\"title\">Tasks on Critical Path {calculatePercentage(newCriticalTasks?.length, baselineCriticalTasks?.length)}</div>\n              <div className=\"figure\">\n                <h2>{newCriticalTasks?.length}&nbsp;<span className=\"subtitle\">{baselineCriticalTasks?.length}</span></h2>\n              </div>\n            </div>\n            <div className=\"stats\">\n              <div className=\"title\">Total Resources</div>\n              <div className=\"figure\">\n                <h2>{baselineResources?.length}</h2>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"options\">\n            <h4>Optimization Presets</h4>\n            <p>These available presets are pre-configured settings that are designed to deliver the best performance or quality for each individual specific use case.</p>\n            <FormControl component=\"fieldset\">\n              <RadioGroup\n                value={selectedPreset}\n                onChange={(e) => {\n                  setSelectedPreset(e.target.value)\n                  setSelectedResultIndex(optimizer?.results[e.target.value].length - 1)\n                }}\n              >\n                {listOfPresets.map((o) => {\n                  return <div key={o} className={`presets${constraintsFileName === 'No file chosen' && o === 'Constraint Compliance' ? ' hidden' : ''}`}>\n                    <FormControlLabel disabled={data[o].length < 10} value={o} control={<Radio />} label={o} />\n                    <div style={{ fontSize: '12px', fontFamily: 'Inter' }}>\n                      {renderSwitch(o)}\n                    </div>\n                  </div>\n                })}\n              </RadioGroup>\n            </FormControl>\n          </div>\n\n\n          <PrimaryButton variant=\"contained\" onClick={buttonClick}>\n            Next\n          </PrimaryButton>\n        </div>\n      </BaselineContainer>\n    </OptimizationContainer>\n  </>\n}","import React, { useEffect, useRef } from 'react'\nimport ReactDOM from 'react-dom'\n\nimport * as d3 from 'd3'\n\nimport { init_d3 } from '../../utils/plot'\nimport { plot_color_palette } from '../../utils/color'\nimport { len, down_sample } from '../../mods/a_utils'\n\nimport { Alert, AlertTitle } from '@mui/material'\n\nexport default function TaskPlot({\n  selectedColor,\n  tasks,\n  baselineTasks,\n  width,\n  height,\n  color,\n  keep = 400,\n}) {\n  const ref = useRef()\n  useEffect(() => {\n    // if (!(baselineTasks && len(baselineTasks)) || (!(tasks) && len(tasks))) return\n    // if (!tasks) return\n\n    let data = Object.values(tasks).sort((a, b) => a.newStart?.data - b.newStart?.data)\n    let baselineData = Object.values(baselineTasks).sort((a, b) => a.plannedStart - b.plannedStart)\n\n    if (data.length > keep) {\n      data = data.filter((d, i) => i < 150)\n      baselineData = baselineData.filter((bd, i) => i < 150)\n    }\n\n    const x_optimized_domain = [\n      Math.min(...Object.values(data).map((i) => i.newStart?.data)),\n      Math.max(...Object.values(data).map((i) => i.newFinish?.data)),\n    ]\n\n    const x_baseline_domain = [\n      Math.min(...Object.values(data).map((i) => i.plannedStart)),\n      Math.max(...Object.values(data).map((i) => i.plannedFinish)),\n    ]\n\n    // const x_domain = x_baseline_domain\n    const x_domain = [Math.min(x_optimized_domain[0], x_baseline_domain[0]), Math.max(x_baseline_domain[1], x_optimized_domain[1],),]\n\n    data = down_sample(data, keep)\n    baselineData = down_sample(baselineData, keep)\n\n    const y_optimized_domain = [data.length, 0]\n    const y_baseline_domain = [baselineData.length, 0]\n    const y_domain = [\n      Math.max(y_optimized_domain[0], y_baseline_domain[0]),\n      Math.min(y_optimized_domain[1], y_baseline_domain[1]),\n    ]\n    const types=['plannedData','newData']\n    const { svg, x_scale, y_scale } = init_d3({\n      margin: 40,\n      x_domain,\n      y_domain,\n      width: width ? width : 560,\n      height: height ? height : 500,\n      ref,\n      // x_label: 'time',\n      // y_label: 'task',\n      x_type: d3.scaleUtc,\n      y_type: d3.scaleLinear,\n      types\n    })\n\n    const rect_base = svg.append('g').attr('class','clip')\n\n    rect_base\n      .selectAll('rect')\n      .data(data)\n      .join('rect')\n      .attr('x', (d) => x_scale(d.plannedStart))\n      .attr('y', (d, i) => y_scale(i))\n      .attr('rx', 8)\n      .attr('ry', 8)\n      .attr('width', (d) => Math.max(x_scale(d.plannedFinish) - x_scale(d.plannedStart), 0))\n      .attr('height', y_scale(1) - y_scale(0) - 0.5 - 0.5)\n      .attr('class', 'plannedData')\n      .attr('fill', (d) => {\n        return d.critical ? plot_color_palette.TaskPlot.baselineCriticalTask : plot_color_palette.TaskPlot.baselineTask\n      })\n\n    const rect = svg.append('g').attr('class','clip')\n\n    rect\n      .selectAll('rect')\n      .data(data)\n      .join('rect')\n      .attr('x', (d) => x_scale(d.newStart?.data))\n      .attr('y', (d, i) => y_scale(i))\n      .attr('width', (d) =>\n        Math.max(x_scale(d.newFinish?.data) - x_scale(d.newStart?.data), 0)\n      )\n      .attr('height', y_scale(1) - y_scale(0) - 0.5 - 0.5)\n      .attr('rx', 3)\n      .attr('ry', 3)\n      .attr('fill', (d) => (d.critical ?\n        plot_color_palette.TaskPlot.optimizedCriticalTask\n        : color ? color : selectedColor))\n      .attr('class', 'newData')\n      .on('mouseover', (event, d) => {\n        const { name, newDuration } = d\n        \n        const tooltip = (\n          <div title={name} style={{\n            background: '#eeeeee',\n            position: 'absolute',\n            top: event.pageY,\n            left: event.pageX + 10,\n            padding: '6px 8px',\n            pointerEvents: 'none',\n            borderRadius: '8px'\n          }}>\n            {name}<br />\n            <small>{newDuration.data} hours</small>\n          </div>\n        )\n        ReactDOM.render(tooltip, document.getElementById('tooltip'))\n      })\n      .on('mouseout', () => {\n        ReactDOM.unmountComponentAtNode(document.getElementById('tooltip'))\n      })\n\n  }, [tasks, baselineTasks])\n\n  if (!(baselineTasks && len(baselineTasks)) || (!(tasks) && len(tasks))) return null\n\n  const msg =\n    len(tasks) > keep\n      ? `Chart is only showing up to 150 critical tasks as the project has ${Object.values(tasks).sort((a, b) => a.newStart?.data - b.newStart?.data).length} tasks`\n      : ''\n  return (\n    <>\n      {Object.values(tasks).sort((a, b) => a.start_2 - b.start_2).length > 400 ?\n        <Alert sx={{ margin: '20px 20px -20px' }} severity=\"info\">\n          <AlertTitle>{msg}</AlertTitle>\n        </Alert> : ''}\n      <div id=\"tooltip\" />\n      <svg ref={ref}></svg>\n    </>\n  )\n}","import { Autocomplete, FormGroup } from \"@mui/material\";\nimport styled from \"styled-components\";\n\nexport const CheckboxToggle = styled(FormGroup)`\n  margin: 15px 0 10px;\n  flex-direction: row !important;\n  .MuiCheckbox-root {\n    &.Mui-checked {\n      color: ${(props) => props.theme.colors.turquoise[4]};\n    }\n  }\n`\n\nexport const SearchAutoComplete = styled(Autocomplete)`\n  width: 300px;\n  display: inline-flex;\n  .MuiAutocomplete-inputRoot {\n    padding: 2px 4px 2px 9px !important;\n  }\n  .MuiInputLabel-root {\n    top: -7px;\n  }\n  .MuiInputBase-formControl {\n    border-radius: 8px !important;\n    fieldset {\n      border: 2px solid ${(props) => props.theme.colors.grey[2]} !important;\n    }\n  }\n`\n\nexport const FilterGroup = styled.div`\n  display: flex;\n  align-items: center;\n  vertical-align: middle;\n  margin-top: 15px;\n  .MuiCheckbox-root {\n    padding: 0 !important;\n    &.Mui-checked {\n      color: ${(props) => props.theme.colors.turquoise[4]};\n    }\n  }\n  .button {\n    display: flex;\n    align-items: center;\n    vertical-align: middle;\n    margin-right: 7px;\n    padding: 7px 12px;\n    border-radius: 8px;\n    border: 2px solid ${(props) => props.theme.colors.grey[2]};\n    color: ${(props) => props.theme.textColors.bodyText};\n    cursor: pointer;\n    min-width: 130px;\n    justify-content: center;\n    label {\n      cursor: pointer;\n    }\n    &:hover,\n    &:focus,\n    &.active {\n      border: 2px solid ${(props) => props.theme.textColors.bodyText};\n    }\n    .MuiCheckbox-root {\n      padding: 0 4px 0 0;\n    }\n    svg {\n      margin-right: 3px;\n    }\n    label {\n      margin: 0;\n    }\n  }\n`","import styled from 'styled-components'\n\nexport const LazyLoadContainer = styled.div`\n  width: 100%;\n  overflow: hidden;\n  position: absolute;\n  text-align: center;\n  bottom: -13px;\n  height: 30px;\n  background: -moz-linear-gradient(top, rgba(255,255,255,1) 0%, rgba(255,255,255,0) 100%); /* FF3.6-15 */\n  background: -webkit-linear-gradient(top, rgba(255,255,255,1) 0%,rgba(255,255,255,0) 100%); /* Chrome10-25,Safari5.1-6 */\n  background: linear-gradient(to bottom, rgba(255,255,255,1) 0%,rgba(255,255,255,0) 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#00ffffff',GradientType=0 ); /* IE6-9 */\n  button {\n    border: 1px solid #F0F1F3;\n    color: #424242;\n    box-shadow: 1px 1px 5px rgb(207 234 229 / 25%);\n    border-radius: 8px;\n    padding: 4px 10px;\n    background: #FFFFFF;\n    font-family: \"Inter\", \"Arial\", sans-serif;\n    font-size: 12px;\n  }\n`","import React, { useState } from 'react'\n\nimport { LazyLoadContainer } from './styled'\n\nconst LazyLoad = ({ children, onLoadMore }) => {\n  const [isVisible, setIsVisible] = useState(false)\n\n  const handleClick = () => {\n    setIsVisible(true)\n    onLoadMore()\n  }\n\n  return (\n    <LazyLoadContainer>\n      {isVisible ? children : null}\n      {!isVisible && (\n        <button onClick={handleClick}>Load More</button>\n      )}\n    </LazyLoadContainer>\n  )\n}\n\nexport default LazyLoad\n","import React, { useState, useEffect, useRef, useReducer } from 'react'\nimport ReactDOM from 'react-dom'\n\nimport * as d3 from 'd3'\n\nimport { TextField, FormControlLabel, Checkbox } from \"@mui/material\"\nimport SortByAlphaIcon from '@mui/icons-material/SortByAlpha'\nimport { CheckboxToggle, SearchAutoComplete, FilterGroup } from './styled'\n\nimport LazyLoad from '../../feat/LazyLoad'\n\nimport { limitString } from '../../utils/format'\n\nimport { init_d3 } from '../../utils/plot'\n\nimport { ms_per_day } from '../../mods/a_utils'\n\nexport default function CombinedPlot({\n  base_results,\n  new_results,\n  base_resource_distribution,\n  new_resource_distribution,\n  preset,\n  filter,\n  width,\n  height = 610,\n}) {\n\n  const [showBaselinePlot, setShowBaselinePlot] = useState(true)\n  const [showNewPlot, setShowNewPlot] = useState(true)\n  const [searchValue, setSearchValue] = useState(null)\n  const [toggleSort, setToggleSort] = useState(false)\n\n  const [selectAll, setSelectAll] = useState(true)\n\n  const ref = useRef()\n  // let resources = new_results\n  const [resources, setResources] = useState(new_results)\n  const [baseResources, setBaseResources] = useState(base_results)\n\n  // console.log(baseResources[1].distribution.xy)\n  // console.log(resources[1].distribution.xy)\n\n  const [_, forceUpdate] = useReducer((x) => x + 1, 0)\n\n  useEffect(() => {\n    if (!new_resource_distribution) return\n\n    const x_optimized_domain = d3.extent(new_resource_distribution.map((r) => { return parseInt(r.x) }))\n    const x_baseline_domain = d3.extent(base_resource_distribution.map((r) => {\n      return parseInt(r.x)\n    }))\n\n    const startingDate = new Date(x_optimized_domain[0])\n    const endingDate = new Date(x_optimized_domain[1])\n\n    const diffTime = Math.abs(endingDate - startingDate)\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n\n    const x_domain = [x_optimized_domain[0], new Date(endingDate.setDate(endingDate.getDate() + (diffDays / 10)))] // padding at end of resources chart\n    const y_optimized_values = (new_resource_distribution).map((r) => {\n      return parseInt(r.y)\n    })\n\n    const y_baseline_values = (base_resource_distribution).map((r) => {\n      return parseInt(r.y)\n    })\n\n    const y_baseline_domain = d3.extent(y_baseline_values.flat())\n    const types = ['Labor_data']\n\n    const y_domain = y_baseline_domain\n\n    const { svg, x_scale, y_scale } = init_d3({\n      x_domain,\n      y_domain,\n      width,\n      height,\n      ref,\n      x_type: d3.scaleUtc,\n      y_type: d3.scaleLinear,\n      types\n    })\n\n    let x = 0\n    const rect_all = svg.append('g').attr('class', 'clip')\n    for (const r in baseResources) {\n      const rect_base = rect_all.append('g')\n      rect_base\n        .selectAll('rect')\n        .data(Object.entries(baseResources[r].distribution.xy))\n        .join('rect')\n        .attr('class', 'Labor_data')\n        .attr('x', (d) => {\n          return x_scale(d[0])\n        })\n        .attr('width', (d) => {\n          return x_scale(ms_per_day) - x_scale(0) - ((x_scale(ms_per_day) - x_scale(0)) * 0.1) - ((x_scale(ms_per_day) - x_scale(0)) * 0.1)\n        })\n        .attr('y', (d) => y_scale(d[1].data))\n        .attr('height', (d) => {\n          return y_scale(y_domain[0]) - y_scale(d[1].data)\n        })\n        .attr('fill', (d, i) => {\n          if (resources[r].show_in_plot) {\n            return '#E3E3E3'\n          }\n          else\n            return 'none'\n        })\n        .attr('display', showBaselinePlot ? 'block' : 'none')\n        .on('mouseover', (event, d) => {\n          // rect_base.selectAll(\".rect\").attr(\"opacity\", 1);\n          const startDate = Object.keys(baseResources[r]?.distribution?.xy)[0]\n          const endDate = Object.keys(baseResources[r]?.distribution?.xy).at(-1)\n          const tooltip = (\n            <div title={baseResources[r].name} style={{\n              background: '#F0F1F3',\n              border: '1px solid #B5B5B5',\n              borderRadius: '8px',\n              position: 'absolute',\n              top: event.pageY,\n              left: event.pageX + 10,\n              padding: '6px 8px',\n              pointerEvents: 'none',\n              borderRadius: '8px'\n            }}>\n              {/* {new Date(parseInt(startDate)).toString().slice(4, 15)} - {new Date(parseInt(endDate)).toString().slice(4, 15)}<br /> */}\n              {baseResources[r].name}\n            </div>\n          )\n          ReactDOM.render(tooltip, document.getElementById('tooltip'))\n        })\n        .on('mouseout', () => {\n          ReactDOM.unmountComponentAtNode(document.getElementById('tooltip'))\n        })\n      x++\n    }\n\n    x = 0\n\n    for (const r in resources) {\n      const rect = rect_all.append('g')\n      rect\n        .selectAll('rect')\n        .data(Object.entries(resources[r].distribution.xy))\n        .join('rect')\n        .attr('class', 'Labor_data')\n        .attr('x', (d) => {\n          return x_scale(d[0])\n        })\n        .attr('width', (d) => {\n          return x_scale(ms_per_day) - x_scale(0) - ((x_scale(ms_per_day) - x_scale(0)) * 0.1) - ((x_scale(ms_per_day) - x_scale(0)) * 0.1)\n        })\n        .attr('y', (d) => y_scale(d[1].data))\n        .attr('height', (d) => {\n          return y_scale(y_domain[0]) - y_scale(d[1].data)\n        })\n        .attr('display', showNewPlot ? 'block' : 'none')\n        .attr('fill', (d, i) => {\n          if (resources[r].show_in_plot) {\n            return resources[r].color\n          }\n          else\n            return 'none'\n        })\n        .on('mouseover', (event, d) => {\n          // const sort = Object.keys(resources[r]?.distribution?.xy).sort((a, b) => a.last_nom - b.last_nom)\n          // console.log(Object.values(sort).map((i) => new Date(parseInt(i)).toString().slice(4, 15)))\n          const startDate = Object.keys(resources[r]?.distribution?.xy)[0]\n          const endDate = Object.keys(resources[r]?.distribution?.xy).at(-1)\n          const tooltip = (\n            <div title={resources[r].name} style={{\n              background: '#35383E',\n              border: '1px solid #B5B5B5',\n              borderRadius: '8px',\n              color: '#FFFFFF',\n              position: 'absolute',\n              top: event.pageY,\n              left: event.pageX + 10,\n              padding: '6px 8px',\n              pointerEvents: 'none',\n              borderRadius: '8px'\n            }}>\n              {/* {new Date(parseInt(startDate)).toString().slice(4, 15)} - {new Date(parseInt(endDate)).toString().slice(4, 15)}<br /> */}\n              {resources[r].name}\n            </div>\n          )\n          ReactDOM.render(tooltip, document.getElementById('tooltip'))\n        })\n        .on('mouseout', () => {\n          ReactDOM.unmountComponentAtNode(document.getElementById('tooltip'))\n        })\n      x++\n    }\n\n  }, [new_resource_distribution, _, showNewPlot, showBaselinePlot, selectAll, resources, baseResources])\n\n  const toggleSelectResource = (r) => {\n    resources.filter((item) => item.id === r).map((newItem) => {\n      return newItem.show_in_plot = !newItem.show_in_plot\n    }\n    )\n    baseResources.filter((item) => item.id === r).map((newItem) => {\n      return newItem.show_in_plot = !newItem.show_in_plot\n    }\n    )\n    forceUpdate()\n  }\n\n  useEffect(() => {\n    setResources(resources.map((newItem) => ({\n      ...newItem,\n      show_in_plot: selectAll\n    }\n    )))\n    setBaseResources(baseResources.map((newItem) => ({\n      ...newItem,\n      show_in_plot: selectAll\n    }\n    )))\n  }, [selectAll])\n\n  if (!new_resource_distribution) return null\n\n  // loading x resources\n  const [visibleCount, setVisibleCount] = useState(Object.values(resources).length > 50 ? 56 : 35)\n  const remainingLength = Object.values(resources).length - visibleCount\n  const handleLoadMore = () => {\n    setVisibleCount(prevCount => prevCount + remainingLength)\n  }\n\n  // search data\n  const searchData = Object.values(resources)\n    .filter(r => r.type === filter)\n    .slice(0, visibleCount)\n    .map((r, i) => {\n      if (r.name === undefined) {\n        return ' '\n      }\n      return r.name\n    })\n\n  return (\n    <>\n      <CheckboxToggle>\n        <FormControlLabel control={<Checkbox checked={showNewPlot} onClick={() => setShowNewPlot(!showNewPlot)} />} label=\"Show Optimized\" />\n        <FormControlLabel control={<Checkbox checked={showBaselinePlot} onClick={() => setShowBaselinePlot(!showBaselinePlot)} />} label=\"Show Baseline\" />\n      </CheckboxToggle>\n\n      <svg ref={ref}></svg>\n      <div id=\"tooltip\" />\n\n      {resources ? <>\n        <div className=\"row\"><h4>{filter} Legend</h4></div>\n        <FilterGroup>\n          <div\n            className={`button ${selectAll ? 'active' : ''}`}>\n            <label htmlFor=\"select\"><Checkbox checked={selectAll} id=\"select\" name=\"select\" onChange={(e, checked) => setSelectAll(checked)} />\n              {selectAll ? 'Deselect All' : \"Select All\"}</label>\n          </div>\n          <div className={`button ${toggleSort ? \"active\" : \"\"}`} onClick={() => setToggleSort(!toggleSort)}> <SortByAlphaIcon /> Sort</div>\n          <SearchAutoComplete\n            id=\"resources-search\"\n            value={searchValue}\n            onChange={(e, newValue) => setSearchValue(newValue)}\n            options={searchData}\n            renderInput={(params) => <TextField {...params} label=\"Type to search...\" />}\n          />\n        </FilterGroup >\n        <div className=\"legend\">\n          {Object.values(resources)\n            .filter(r => r.type === filter)\n            .sort((a, b) => {\n              // need to figure out the colours in line 258\n              if (toggleSort) return a.name.localeCompare(b.name)\n            })\n            .filter(r => {\n              if (searchValue) return r.name === searchValue\n              if (searchValue === null) return r\n            })\n            .slice(0, visibleCount)\n            .map((r, i) => {\n              return <div\n                key={r + ' ' + i}\n                className=\"item resources\"\n                style={{\n                  opacity: r?.show_in_plot ? '100%' : '50%',\n                  cursor: 'pointer'\n                }}\n                onClick={(e, i) => {\n                  toggleSelectResource(r.id)\n                }}\n              >\n                <div\n                  style={{\n                    width: '14px',\n                    height: '14px',\n                    background: r?.color,\n                    marginRight: '5px',\n                    borderRadius: '50%',\n                  }}\n                ></div>\n                <div>{limitString(r.name, 20)}</div>\n              </div>\n            }\n            )}\n          {Object.values(resources).filter(r => r.type === filter).length > visibleCount && (\n            <LazyLoad onLoadMore={handleLoadMore}>\n              <button>Load More</button>\n            </LazyLoad>\n          )}\n        </div>\n      </>\n        : ''}\n    </>\n  )\n}\n","import { format_date, len } from './reader'\n\nexport function format_fields(k = '', v) {\n  if (typeof v === 'string') return v\n\n  if (k.includes('start') || k.includes('finish')) return format_date(v)\n\n  if (typeof v === 'number') {\n    if (k.includes('ratio')) return v.toFixed(2)\n    return v.toFixed(0)\n  }\n\n  if (v === null || v === false) return ''\n  if (Array.isArray(v) && v.length < 3) return JSON.stringify(v)\n  if (typeof v === 'object') return len(v)\n\n  return JSON.stringify(v)\n}\n\nexport function limitString(str, limit) {\n  if (!str) return ''\n  if (str.length <= limit) return str\n  \n  return str.substring(0,limit) + '...'\n}","import styled from 'styled-components'\nimport { FormGroup, ToggleButtonGroup } from '@mui/material'\n\nexport const OptimizationContainer = styled.div`\n  width: 100%;\n  .summary {\n    width: 100%;\n    display: inline-flex;\n    justify-content: space-between;\n    background: ${(props) => props.theme.colors.white};\n    border-radius: 16px;\n    margin: 0 0 30px;\n    .stats {\n      padding: 25px;\n      width: 20%;\n      display: flex;\n      flex-direction: column;\n      position: relative;\n      &:last-child {\n        &:after {\n          width: 0px;\n        }\n      }\n      &:after {\n        content: '';\n        height: 65px;\n        width: 1px;\n        background: ${(props) => props.theme.colors.grey[1]};\n        position: absolute;\n        right: 0;\n        top: calc(50% - 32px);\n      }\n      .title {\n        display: flex;\n        align-items: center;\n        svg {\n          margin-left: 5px;\n          width: 18px;\n        }\n      }\n      .figure {\n        display: inline-flex;\n        margin: 16px 0;\n        align-items: baseline;\n        .numbers {\n          font-family: \"Lato\", sans-serif;\n          font-size: 40px;\n          color: #000000;\n          font-weight: 700;\n          margin-right: 10px;\n        }\n        .baseline-stats {\n            font-family: \"Lato\", sans-serif;\n            font-size: 28px;\n            color: ${(props) => props.theme.colors.grey[5]};\n            font-weight: 700;\n         }\n      }\n      .badge {\n          font-size: 12px;\n          font-weight: 700;\n          border-radius: 8px;\n          font-family: \"Lato\";\n          width: 60px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background: #f2f2f2;\n          svg {\n            margin-right: 5px;\n          }\n          &.plus {\n            background: #e2f5e2;\n            color: #499249;\n          }\n          &.minus {\n            background: #feeaea;\n            color: #ff4d4d;\n          }\n        }\n    }\n  }\n`\n\nexport const OptimizationCharts = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 20px;\n  width: 100%;\n  box-sizing: border-box;\n  &.multi-charts {\n    flex-wrap: wrap;\n    .div {\n    flex: 1 0 45%;\n      &:first-child {\n        flex: 0 1 100%;\n      }\n    }\n  }\n  &.full-charts {\n    display: block !important;\n    margin-bottom: 20px;\n  }\n  .chart {\n    margin-bottom: 20px;\n    background: ${(props) => props.theme.colors.white};\n    border-radius: 16px;\n    padding: 20px;\n    width: 46%;\n  }\n  .full-chart {\n    box-sizing: border-box;\n    margin-bottom: 20px;\n    background: ${(props) => props.theme.colors.white};\n    border-radius: 16px;\n    padding: 20px;\n    width: 100%;\n    border-radius: 16px;\n  }\n`\n\nexport const ToggleGroup = styled(ToggleButtonGroup)`\n  margin: 15px 0 10px;\n  button {\n    width: 50%;\n  }\n`","import React, { useState, useEffect } from 'react'\n\nimport { plot_color_palette } from '../../../utils/color'\n\nimport TaskPlot from '../../../components/Plot/TaskPlot'\nimport CombinedPlot from '../../../components/Plot/CombinedPlot'\n\nimport { PrimaryButton, SecondaryButton, TertiaryButton } from 'src/styled'\nimport { OptimizationContainer, OptimizationCharts } from './styled'\n// jpg\nimport DownloadChart from \"../../../feat/DownloadChart\"\n\n\nconst calculatePercentage = (optimized, baseline) => {\n  const diff = (optimized - baseline)\n  const percentage = ((diff / baseline) * 100)\n  const checkPositive = Math.sign(percentage)\n  if (checkPositive === 1) {\n    return <span className='badge minus'>{(Math.round(percentage))}%</span>\n  }\n  else if (checkPositive === -1) {\n    return <span className='badge plus'>{(Math.abs(Math.round(percentage)))}%</span>\n  }\n  else { return <span className='badge'>{(Math.round(percentage))}%</span> }\n}\n\nexport default function OptimizedSummary({ baseline, optimizer, results, selectedPreset, selectedResultIndex, goPrev, goNext }) {\n\n  const [currentTasks, setCurrentTasks] = useState(Object.values(optimizer.project.tasks).filter((i) => i.newFinish))\n  const baselineTasks = Object.values(optimizer.plannedproject.tasks).filter((i) => i.newFinish)\n\n  const selectedPresetResult = results[selectedPreset]\n  const selectedPresetResultOutput = results[selectedPreset]?.at(selectedResultIndex)?.output\n\n  const baselineProjectDuration = baseline?.duration\n\n  const newProjectDuration = selectedPresetResultOutput?.projectDurationDays\n\n  const baselineResources = Object.values(optimizer?.plannedproject?.resources)\n  const newResources = Object.values(optimizer?.project?.resources)\n\n  const newTasks = Object.values(optimizer?.project?.tasks)\n\n  const baselineCriticalTasks = optimizer?.planned?.criticalPath\n  const newCriticalTasks = newTasks.filter((item) => item.critical !== undefined && item.critical).map((d) => d)\n\n  const resourcesData =\n  {\n    labor: {\n      base: [],\n      new: []\n    },\n    material: {\n      base: [],\n      new: []\n    },\n    labor_resource_distribution: {\n      base: [],\n      new: []\n    },\n    material_resource_distribution: {\n      base: [],\n      new: []\n    }\n  }\n\n  if (newResources) {\n    newResources.forEach((l, i) => {\n      if (l.type.toLowerCase() === 'labor') {\n        resourcesData.labor.new.push({\n          name: l.name,\n          distribution: l.distribution,\n          id: l.id,\n          type: l.type,\n          show_in_plot: true,\n          color: plot_color_palette.ResourcePlot.allResources[i % plot_color_palette.ResourcePlot.allResources.length]\n        })\n        if (l.distribution) {\n          Object.entries(l.distribution.xy).map(([key, value]) =>\n            resourcesData.labor_resource_distribution.new.push(\n              {\n                x: key,\n                y: value.data\n              }\n            ))\n        }\n      }\n      if (l.type.toLowerCase() === 'material') {\n        resourcesData.material.new.push({\n          name: l.name,\n          distribution: l.distribution,\n          id: l.id,\n          type: l.type,\n          show_in_plot: true,\n          color: plot_color_palette.ResourcePlot.allResources[i % plot_color_palette.ResourcePlot.allResources.length]\n        })\n        if (l.distribution) {\n          Object.entries(l.distribution.xy).map(([key, value]) =>\n            resourcesData.material_resource_distribution.new.push(\n              {\n                x: key,\n                y: value.data\n              }\n            ))\n        }\n      }\n    })\n  }\n\n  if (baselineResources) {\n    baselineResources.forEach((l) => {\n      if (l.type.toLowerCase() === 'labor') {\n        resourcesData.labor.base.push({\n          name: l.name,\n          distribution: l.distribution,\n          id: l.id,\n          type: l.type,\n          show_in_plot: true\n        })\n        if (l.distribution) {\n          Object.entries(l.distribution.xy).map(([key, value]) =>\n            resourcesData.labor_resource_distribution.base.push(\n              {\n                x: key,\n                y: value.data\n              }\n            ))\n        }\n      }\n      if (l.type.toLowerCase() === 'material') {\n        resourcesData.material.base.push({\n          name: l.name,\n          distribution: l.distribution,\n          id: l.id,\n          type: l.type,\n          show_in_plot: true\n        })\n        if (l.distribution) {\n          Object.entries(l.distribution.xy).map(([key, value]) =>\n            resourcesData.material_resource_distribution.base.push(\n              {\n                x: key,\n                y: value.data\n              }\n            ))\n        }\n      }\n    })\n  }\n\n  useEffect(() => {\n    setCurrentTasks(Object.values(optimizer.project.tasks).filter((i) => i.newFinish))\n    optimizer.simulate(selectedPresetResult.at(selectedResultIndex).durationRatios)\n  }, [selectedPresetResult]) // preset changes here \n\n  useEffect(() => {\n    window.scrollTo({\n      top: 0,\n      left: 0,\n    })\n  }, [])\n\n  return <OptimizationContainer>\n    <h2>\n      Overview &nbsp;<span style={{ textTransform: 'capitalize', color: plot_color_palette.ComparisonPlot[selectedPreset] }}>{selectedPreset}</span>\n      <div className=\"chip primary\"><small>{selectedPresetResult.length} steps</small></div>\n      <div className=\"chip primary\"><small>{optimizer?.project?.settings?.minDurationRatio * 100}% - {optimizer?.project?.settings?.maxDurationRatio * 100}% ratio</small></div>\n    </h2>\n    <div className='summary'>\n      <div className='stats'>\n        <div className='title'>Project Duration (days)\n        </div>\n        <div className='figure'>\n          <div className='numbers'>{Math.round(newProjectDuration)} </div>\n          <div className='baseline-stats'>{Math.round(baselineProjectDuration)}</div>\n        </div>\n        {calculatePercentage(newProjectDuration, baselineProjectDuration)}\n      </div>\n      <div className='stats'>\n        <div className='title'>Resources\n        </div>\n        <div className='figure'>\n          <div className='numbers'>{Math.round(newResources?.length)} </div>\n          <div className='baseline-stats'>{Math.round(baseline?.resources?.length)} </div>\n        </div>\n        {calculatePercentage(newResources?.length, baseline?.resources?.length)}\n      </div>\n      <div className='stats'>\n        <div className='title'>Tasks\n        </div>\n        <div className='figure'>\n          <div className='numbers'>{Math.round(currentTasks?.length)} </div>\n          <div className='baseline-stats'>{Math.round(Object.values(baseline?.tasks).length)} </div>\n        </div>\n        {calculatePercentage(currentTasks?.length, Object.values(baseline?.tasks).length)}\n      </div>\n      <div className='stats'>\n        <div className='title'>Tasks on Critical Path\n        </div>\n        <div className='figure'>\n          <div className='numbers'>{Math.round(newCriticalTasks.length)} </div>\n          <div className='baseline-stats'>{Math.round(baselineCriticalTasks.length)}  </div>\n        </div>\n        {calculatePercentage(baselineCriticalTasks.length, newCriticalTasks.length)}\n      </div>\n    </div>\n\n    {selectedPresetResult ?\n      <OptimizationCharts className=\"multi-charts\">\n        <div className='full-chart Tasks-chart'>\n          <div className='chart-title'>\n            <h3 >Tasks (Overview)</h3>\n            <DownloadChart classNames=\"Tasks-chart\">\n              Download\n            </DownloadChart>\n          </div>\n\n          <span className=\"subtitle\">Overview of all tasks over time</span>\n          <div className='legend'>\n            <div className=\"item\">\n              <div style={{ width: '14px', height: '14px', background: plot_color_palette.ComparisonPlot[selectedPreset], marginRight: '5px', borderRadius: '50%' }}></div>\n              <div>Optimized</div>\n            </div>\n            <div className=\"item\">\n              <div style={{ width: '14px', height: '14px', background: '#cccccc', marginRight: '5px', borderRadius: '50%' }}></div>\n              <div>Baseline</div>\n            </div>\n          </div>\n          {currentTasks ?\n            <TaskPlot\n              tasks={currentTasks || []}\n              width='1150'\n              height='600'\n              color={plot_color_palette.ComparisonPlot[selectedPreset]}\n              baselineTasks={baselineTasks || []}\n              title='Tasks (Overview)' />\n            : 'No data'\n          }\n        </div>\n\n        <div className='full-chart Labor-Resources-chart'>\n          <div className='chart-title'>\n            <h4>Labor Resources</h4>\n            <DownloadChart classNames=\"Labor-Resources-chart\">\n              Download\n            </DownloadChart>\n          </div>\n          <div className='row '>\n            <div>\n              <span className=\"subtitle\">Total utilization of multiple resources over time</span>\n            </div>\n          </div>\n\n          {resourcesData.labor_resource_distribution ?\n            <CombinedPlot\n              width=\"1150\"\n              selectedResultIndex={selectedResultIndex}\n              base_results={resourcesData.labor.base}\n              new_results={resourcesData.labor.new}\n              base_resource_distribution={resourcesData.labor_resource_distribution.base}\n              new_resource_distribution={resourcesData.labor_resource_distribution.new}\n              filter='Labor'\n              title='Labor Resources' />\n            : 'No data'\n          }\n        </div>\n\n        {resourcesData?.material?.base?.length === 0 ? '' : <>\n          <div className='full-chart'>\n            <div className='row'>\n              <div>\n                <h3>Material Resources</h3>\n                <span className=\"subtitle\">Total utilization of multiple resources over time</span>\n              </div>\n            </div>\n\n            {resourcesData.material_resource_distribution ?\n              <CombinedPlot\n                width=\"1150\"\n                selectedResultIndex={selectedResultIndex}\n                base_results={resourcesData.material.base}\n                new_results={resourcesData.material.new}\n                base_resource_distribution={resourcesData.material_resource_distribution.base}\n                new_resource_distribution={resourcesData.material_resource_distribution.new}\n                filter='Material'\n                title='Material Resources' />\n              : 'No data'\n            }\n          </div></>}\n\n      </OptimizationCharts> : ''}\n    <div className='row'>\n      <TertiaryButton variant='contained' onClick={goPrev}>\n        Back\n      </TertiaryButton>\n      <PrimaryButton variant='contained' onClick={goNext}>\n        View Detailed Report\n      </PrimaryButton>\n\n    </div>\n  </OptimizationContainer>\n}","import styled from 'styled-components'\n\nexport const TableContainer = styled.div`\n  .MuiDataGrid-main {\n    font-family: \"Inter\"\n  }\n`","import React from 'react'\n\nimport { DataGrid } from '@mui/x-data-grid'\n\nimport { TableContainer } from './styled'\n\nexport default function Table({ rows, columns, hidden_columns }) {\n  const makeRowHeight = (rows.length > 3) ? 500 : 300\n  const initial_state = {\n    columns: {\n      columnVisibilityModel: hidden_columns,\n    },\n  }\n  return <TableContainer>\n    <div style={{\n      height: makeRowHeight, width: '100%'\n    }}>\n      <DataGrid\n        rows={rows}\n        columns={columns}\n        initialState={initial_state}\n      // getRowId={(row) => row.id + row.name + row.t_name}\n      />\n    </div>\n  </TableContainer>\n}","/*\n * @Date: 2023-05-03 15:45:48\n * @LastEditors:  thunder thunderleng@gmail.com\n * @LastEditTime: 2023-05-10 16:44:54\n * @FilePath: \\app\\src\\components\\Plot\\ResourcePlot.js\n */\nimport React, { useEffect, useRef } from 'react'\nimport * as d3 from 'd3'\n\nimport { init_d3, domains_with_margin } from '../../utils/plot'\nimport { ms_per_day, len, down_sample } from '../../mods/a_utils'\n\nexport default function ResourcePlot({\n  dist,\n  color,\n  width = 560,\n  height = 500,\n  keep = 1000,\n}) {\n  const ref = useRef()\n  useEffect(() => {\n    if (!dist) return\n\n    const data = down_sample(Object.entries(dist), keep)\n    // const color = d3.scaleOrdinal(d3.schemeCategory10)\n\n    const x_domain = d3.extent(Object.keys(dist).map(item => Number(item)))\n    // console.log('Before', x_domain)\n    const y_domain = d3.extent(Object.values(dist).map((i) => i.data))\n\n    const domains = domains_with_margin((x_domain), (y_domain), 0.01, 0.01)\n\n    // const scale = d3.scaleLinear(x_domain, [40,width-40])\n    // x_domain[1] = parseFloat(x_domain[1]) + 10000*(scale(ms_per_day) - scale(0))\n    // console.log('After', x_domain, scale(ms_per_day) - scale(0))\n    const types=['Resources_data']\n    const { svg, x_scale, y_scale } = init_d3({\n      x_domain: domains.x_domain,\n      y_domain: domains.y_domain,\n      width,\n      height,\n      ref,\n      x_label: 'time',\n      y_label: 'units',\n      x_type: d3.scaleUtc,\n      y_type: d3.scaleLinear,\n      types\n    })\n\n    const rect = svg.append('g').attr('class','clip')\n\n    rect\n      .selectAll('rect')\n      .data(data)\n      .join('rect')\n      .attr('class','Resources_data')\n      .attr('x', (d) => x_scale(d[0]))\n      .attr('width', x_scale(ms_per_day) - x_scale(0))\n      .attr('y', (d) => y_scale(d[1].data))\n      .attr('height', (d) => y_scale(y_domain[0]) - y_scale(d[1].data))\n      .attr('fill', color)\n    // .style('fill', (d) => color(d[0]))\n\n    // let legend = svg.append('g')\n    //   .attr('transform', 'translate(0, 20)')\n\n    // legend.selectAll('rect')\n    //   .data(data)\n    //   .join('rect')\n    //   .attr('x', 0)\n    //   .attr('y', (d, i) => i * 20)\n    //   .attr('width', 19)\n    //   .attr('height', 18)\n    //   .style('fill', (d) => color(d[0]))\n\n    // legend.selectAll('text')\n    //   .data(data)\n    //   .join('text')\n    //   .attr('x', 22)\n    //   .attr('y', (d, i) => i * 20 + 14)\n    //   .text(d => {\n    //     return data.name\n    //   })\n\n  }, [dist])\n\n  if (!dist) return null\n\n  return (\n    <svg ref={ref}></svg>\n  )\n}","import React, { useEffect, useRef } from 'react'\nimport * as d3 from 'd3'\n\nimport { init_d3, domains_with_margin } from '../../utils/plot'\n\nexport default function StepsPlot({\n  results,\n  name, x_axis,\n  x_label, y_label,\n  width = 550,\n  height = 400,\n  keep = 1000,\n  onClick,\n  selectedResultIndex\n}) {\n  const ref = useRef()\n\n  useEffect(() => {\n    if (!results?.length) return null\n\n    const data = results\n    data.forEach((d, i) => d.idx = i)\n\n    const laborMax = Object.values(results).flat().map(({ output }) => {\n      return output.laborDistribution.max\n    })\n\n    const domains = domains_with_margin(d3.extent([1, data.length]), d3.extent(name === 'projectDurationDays' ? (data.map((d) =>\n      d.output[name])) : name === 'loss' ? data.map(d => d.loss) : name === 'criticalPath' ? data.map(d => d.output.criticalPath.length) : laborMax), 0.1, 0.05)\n    const types=['step_data']\n    const { svg, x_scale, y_scale } = init_d3({\n      margin: 40,\n      x_domain: domains.x_domain,\n      y_domain: domains.y_domain,\n      width, height, ref,\n      x_label: x_label ? x_label : 'Optimization steps',\n      y_label,\n      x_type: d3.scaleLinear,\n      y_type: d3.scaleLinear,\n      types,\n      name\n    })\n\n    const circle = svg.append('g').attr('class','clip')\n    circle.selectAll('circle').data(data).join('circle')\n      .attr('class','step_data')\n      .attr('cx', (d) => {\n        return x_scale(d.idx)\n      })\n      .attr('cy', (d) => {\n        if (name === 'laborDistribution') {\n          return y_scale(d.output[name].max)\n        } if (name === 'loss') {\n          return y_scale(d.loss)\n        } if (name === 'criticalPath') {\n          return y_scale(d.output.criticalPath.length)\n        }\n        return y_scale(d.output[name])\n      })\n      .attr('r', (d, i) => i === selectedResultIndex ? 6 : 3)\n      .style('cursor', d => d.option === 'baseline' ? 'auto' : 'pointer')\n      .attr('fill', (d, i) => {\n        return d.output.constraintLoss > 0\n          ? i === selectedResultIndex ? '#db4444' : '#cccccc'\n          : i === selectedResultIndex ? '#db4444' : '#00beae'\n      }\n      )\n      .on('click', (e, d) => { onClick(d.idx) })\n  }, [results, selectedResultIndex])\n\n  return (\n    <>\n      <div className='legend'>\n        <div className='item'>\n          <div style={{ width: '14px', height: '14px', background: '#e61717', marginRight: '5px', borderRadius: '50%' }}></div>\n          <div>Step Selected</div>\n        </div>\n        <div className='item'>\n          <div style={{ width: '14px', height: '14px', background: '#00beae', marginRight: '5px', borderRadius: '50%' }}></div>\n          <div>Constraints Satisfied</div>\n        </div>\n        <div className='item'>\n          <div style={{ width: '14px', height: '14px', background: '#cccccc', marginRight: '5px', borderRadius: '50%' }}></div>\n          <div>Constraints Violated</div>\n        </div>\n      </div>\n\n      <svg ref={ref}></svg>\n    </>\n  )\n}","import styled from 'styled-components'\n\nimport Table from '@mui/material/Table'\n\nexport const TableContent = styled.div`\n  background: ${(props) => props.theme.colors.white};\n  margin-bottom: 40px;\n  padding: 20px;\n   border-radius: 16px;\n  .circle {\n    width: 14px;\n    height: 14px;\n    border-radius: 50%;\n    background-color: ${(props) => props.theme.colors.grey[1]};\n    margin: 0 auto;\n    &.critical {\n      background-color:  ${(props) => props.theme.colors.red};\n    }\n  }\n  .MuiDataGrid-columnHeaders {\n    background: ${(props) => props.theme.colors.grey[0]};\n  }\n`\n\nexport const ReportTable = styled(Table)`\n  border: 1px solid ${(props) => props.theme.colors.grey[1]};\n  border-radius: 6px;\n  thead {\n    tr {\n      background: ${(props) => props.theme.colors.grey[0]};\n      > th {\n        font-weight: bold;\n        color: #${(props) => props.theme.textColors.body};\n      }\n    }\n  }\n  .MuiTableSortLabel-icon {\n    opacity: 1;\n  }\n\n`","/*\n * @Date: 2023-05-03 15:45:48\n * @LastEditors:  thunder thunderleng@gmail.com\n * @LastEditTime: 2023-05-12 16:20:30\n * @FilePath: \\app\\src\\pages\\Dashboard\\DetailedReport\\index.js\n */\nimport React, { useEffect, useState } from 'react'\n// import FileDownloadIcon from '@mui/icons-material/FileDownload'\n\nimport Modal from 'src/feat/Modal'\n\nimport Table from '../../../components/Table'\nimport ResourcePlot from '../../../components/Plot/ResourcePlot'\nimport StepsPlot from '../../../components/Plot/Step'\n\nimport { plot_color_palette } from '../../../utils/color'\n\nimport { TableContent } from './styled'\nimport { OptimizationContainer } from '../InputData/styled'\nimport { OptimizationCharts } from '../OptimizedSummary/styled'\nimport { PrimaryButton, SecondaryButton, TertiaryButton } from 'src/styled'\n// jpg\nimport DownloadChart from \"../../../feat/DownloadChart\"\nimport toPDF from \"../../../utils/toPDF.js\"\nexport default function DetailedReport({ optimizer, reader, selectedPreset, selectedResultIndex, handleSelectResultIndex, goPrev }) {\n\n  const [openModal, setOpenModal] = useState(false)\n  const data = optimizer?.results[selectedPreset]\n\n  const [currentTasks, setCurrentTasks] = useState(Object.values(optimizer?.project?.tasks))\n  const [currentResources, setCurrentResources] = useState(Object.values(optimizer?.project?.resources))\n\n  const selectedPresetResult = optimizer?.results[selectedPreset]\n\n  // useEffect(() => {\n  //   setTimeout(() => {\n\n  //   }, 1000)\n  // }, [])\n\n  useEffect(() => {\n    setCurrentTasks(Object.values(optimizer?.project?.tasks))\n    setCurrentResources(Object.values(optimizer?.project?.resources))\n    optimizer.simulate(selectedPresetResult.at(selectedResultIndex).durationRatios)\n  }, [selectedResultIndex])\n\n  const changedTasks = currentTasks.filter((item) => {\n    return item.newDuration !== undefined && item.newDuration.data !== item.plannedDuration\n  })\n\n  const tasks_rows =\n    changedTasks && changedTasks.map((task) => {\n      const { critical, id, code, name, plannedDuration, newDuration, resources } = task\n      const calcRatio = (newDuration?.data / plannedDuration).toFixed(2)\n      return ({\n        id: id,\n        critical: critical,\n        name: name,\n        code: code,\n        old_duration: `${plannedDuration} hours`,\n        new_duration: `${newDuration?.data} hours`,\n        ratio: calcRatio\n      })\n    })\n\n  const tasks_columns = [\n    {\n      field: 'critical', headerName: 'Critical', width: 80, renderCell: (params) => {\n        return params.value ? (\n          <div className='circle critical' />\n        ) : (\n          <div className='circle' />\n        )\n      },\n    },\n    {\n      field: 'code', headerName: 'Code', width: 180, renderCell: (params) => {\n        return (\n          <div style={{\n            maxHeight: 'inherit', width: '100%', whiteSpace: 'initial'\n          }}>{params.value}</div>\n        )\n      }\n    },\n    { field: 'id', headerName: 'ID', hide: true },\n    {\n      field: 'name', headerName: 'Name', width: 500, renderCell: (params) => {\n        return (\n          <div style={{\n            maxHeight: 'inherit', width: '100%', whiteSpace: 'initial', wordWrap: 'break-word'\n          }}>{params.value}</div>\n        )\n      }\n    },\n    { field: 'old_duration', headerName: 'Duration (Baseline)', width: 150 },\n    { field: 'new_duration', headerName: 'Duration (New)', width: 150 },\n    { field: 'ratio', headerName: 'Ratio', width: 50 },\n  ]\n\n  currentResources.map((item) => {\n    return item.newDuration !== undefined && item.plannedDuration !== item.newDuration?.data\n  })\n\n  // filtered changed resources\n  const resources_rows =\n    currentResources && currentResources.map((resources) => {\n      const { name, id, type, code, distribution } = resources\n      return ({\n        name: name,\n        id: id,\n        type: type,\n        code: code,\n        dist: Math.round(Object.values(distribution.xy).map((i) => i.data).reduce((total, current) => total + current, 0)),\n        max: Math.round(distribution.max?.data),\n        std: Math.round(distribution.span?.data)\n      })\n    })\n  const resources_columns = [\n    { field: 'id', headerName: 'ID', width: 80, },\n    { field: 'code', headerName: 'code', width: 160, },\n    { field: 'type', headerName: 'type', width: 100, },\n    {\n      field: 'name', headerName: 'Name', width: 400, renderCell: (params) => {\n        return (\n          <div style={{\n            maxHeight: 'inherit', width: '100%', whiteSpace: 'initial'\n          }}>{params.value}</div>\n        )\n      }\n    },\n    { field: 'dist', headerName: 'Distribution', width: 130 },\n    { field: 'max', headerName: 'Max ', width: 130 },\n    { field: 'std', headerName: 'Span', width: 130 },\n  ]\n\n  // filtered task-resources relationships\n  const filteredTasksResourcesResults = []\n\n  changedTasks && changedTasks.map((task) => {\n    Object.values(task.resources).map((resource) => {\n      // optimizer?.project?.resources[resource.resourceId].name\n      const resourceName = Object.values(currentResources).filter((item) => item.id === resource.resourceId).map((i) => i.name)\n      filteredTasksResourcesResults.push({\n        critical: task.critical,\n        task_name: task.name,\n        task_code: task.code,\n        task_id: task.id,\n        resource_id: resource.resourceId,\n        resource_name: resourceName.toString(),\n        planned_duration: task.plannedDuration,\n        new_duration: task.newDuration?.data,\n        units_new_per_hour: resource.newUnitsPerHour?.data,\n        planned_units: resource.plannedUnits,\n        planned_units_per_hour: resource.plannedUnitsPerHour,\n      })\n    })\n  })\n\n  const tasks_resources_rows = filteredTasksResourcesResults &&\n    filteredTasksResourcesResults.map((resources, idx) => {\n      const { critical, task_code, task_id, task_name, resource_name, resource_id, planned_duration, new_duration, units_new_per_hour, planned_units, planned_units_per_hour } = resources\n      return ({\n        critical: critical,\n        t_id: task_code,\n        id: idx,\n        resource_name: resource_name,\n        t_name: task_name,\n        new_units_per_hour: units_new_per_hour?.toFixed(2),\n        old_duration: `${planned_duration} hours`,\n        new_duration: `${new_duration} hours`,\n        planned_units: `${planned_units}`,\n        planned_units_per_hour: planned_units_per_hour?.toFixed(2),\n      })\n    })\n  const tasks_resources_columns = [\n    {\n      field: 'critical', headerName: 'Critical', width: 80, renderCell: (params) => {\n        return (params.value ? (\n          <div className='circle critical' />\n        ) : (\n          <div className='circle' />)\n        )\n      },\n    },\n    {\n      field: 'id', headerName: 'ID', width: 0, hide: true\n    },\n    {\n      field: 't_id', headerName: 'Task Code', width: 180, renderCell: (params) => {\n        return (\n          <div style={{\n            maxHeight: 'inherit', width: '100%', whiteSpace: 'initial'\n          }}>{params.value}</div>)\n      },\n    },\n    {\n      field: 'resource_name', headerName: 'Resource Name', width: 200, renderCell: (params) => {\n        return (\n          <div style={{\n            maxHeight: 'inherit', width: '100%', whiteSpace: 'initial'\n          }}>{params.value}</div>\n        )\n      }\n    },\n    {\n      field: 't_name', headerName: 'Task Name', width: 350, renderCell: (params) => {\n        return (\n          <div style={{\n            maxHeight: 'inherit', width: '100%', whiteSpace: 'initial'\n          }}>{params.value}</div>\n        )\n      }\n    },\n    { field: 'old_duration', headerName: 'Duration (Old)', width: 130 },\n    { field: 'new_duration', headerName: 'Duration (New)', width: 130 },\n    { field: 'planned_units_per_hour', headerName: 'Units (Old)', width: 150 },\n    { field: 'new_units_per_hour', headerName: 'Units (New)', width: 150 },\n    { field: 'planned_units', headerName: 'Total Planned Units', width: 130 },\n  ]\n\n  useEffect(() => {\n    window.scrollTo({\n      top: 0,\n      left: 0,\n    })\n  }, [])\n\n  return (<>\n    <div className=\"row\">\n      <h2>\n        Detailed Report&nbsp;<span style={{ textTransform: 'capitalize', color: plot_color_palette.ComparisonPlot[selectedPreset] }}>{selectedPreset}</span>\n\n        <div className=\"chip primary\"><small>{selectedPresetResult.length} steps</small></div>\n        <div className=\"chip primary\"><small>{optimizer?.project?.settings?.minDurationRatio * 100}% - {optimizer?.project?.settings?.maxDurationRatio * 100}% ratio</small></div>\n      </h2>\n      <SecondaryButton onClick={() => setOpenModal(true)} variant='contained'>\n        Export Report\n      </SecondaryButton>\n\n    </div>\n    <OptimizationContainer>\n      <TableContent>\n        <div className='row'>\n          <h3>Changed Tasks (Overview)</h3>\n          {/* <div><FileDownloadIcon /> Export</div> */}\n        </div>\n        <div className='legend' style={{ width: '400px', justifyContent: 'flex-start', marginBottom: '20px' }}>\n          <div style={{ display: 'flex', justifyContent: 'flex-start', alignItems: 'center', marginRight: '10px' }}>\n            <div className='circle critical' /> Critical\n          </div>\n          <div style={{ display: 'flex', justifyContent: 'flex-start', alignItems: 'center' }}>\n            <div className='circle' /> Non-Critical\n          </div>\n        </div>\n        {currentTasks ?\n          <Table rows={tasks_rows} columns={tasks_columns} /> : 'Please select a Optimization Preset before generating your report'}\n      </TableContent>\n\n      <TableContent>\n        <h3>All Resources</h3>\n        <br />\n        {currentResources ?\n          <Table rows={resources_rows} columns={resources_columns} />\n          : 'Please select a Optimization Preset before generating your report'}\n      </TableContent>\n\n      <TableContent>\n        <h3>Task-Resources</h3>\n        <br />\n        {filteredTasksResourcesResults ?\n          <Table rows={tasks_resources_rows} columns={tasks_resources_columns} /> : 'Please select a Optimization Preset before generating your report'}\n      </TableContent>\n\n      <>\n        <OptimizationCharts className='multi-charts'>\n          <div className='row'><h2>Optimization Iteration Charts</h2></div>\n          <div className='chart Project-Duration-chart'>\n            <div className='chart-title'>\n              <h4 >Project Duration</h4>\n              <DownloadChart classNames=\"Project-Duration-chart\">\n                Download\n              </DownloadChart>\n            </div>\n            <StepsPlot\n              key={selectedPresetResult}\n              results={data} name='projectDurationDays' x_axis x_label='Optimization steps' y_label='Duration (days)' onClick={(index) => {\n                handleSelectResultIndex(index)\n              }} selectedResultIndex={selectedResultIndex} />\n          </div>\n\n          <div className='chart Maximum-Labour-Resources-chart'>\n            <div className='chart-title'>\n              <h4 >Maximum Labour Resources</h4>\n              <DownloadChart classNames=\"Maximum-Labour-Resources-chart\">\n                Download\n              </DownloadChart>\n            </div>\n            <StepsPlot results={data} name='laborDistribution' x_axis x_label='Optimization steps' y_label='Maximum Resources' onClick={(index) => {\n              handleSelectResultIndex(index)\n            }} selectedResultIndex={selectedResultIndex} />\n          </div>\n\n          <div className='chart CriticalPath-Tasks-chart'>\n            <div className='chart-title'>\n              <h4 >Critical Path Tasks</h4>\n              <DownloadChart classNames=\"CriticalPath-Tasks-chart\">\n                Download\n              </DownloadChart>\n            </div>\n\n            <StepsPlot key={data} results={data} name='criticalPath' x_axis x_label='Optimization steps' y_label='Number of tasks' onClick={(index) => {\n              handleSelectResultIndex(index)\n            }} selectedResultIndex={selectedResultIndex} />\n          </div>\n\n          <div className='chart Loss-Function-chart'>\n            <div className='chart-title '>\n              <h4 >Loss Function </h4>\n              <DownloadChart classNames=\"Loss-Function-chart\">\n                Download\n              </DownloadChart>\n            </div>\n\n            <StepsPlot results={data} name='loss' x_axis x_label='Optimization steps' y_label='Loss function' onClick={(index) => {\n              handleSelectResultIndex(index)\n            }} selectedResultIndex={selectedResultIndex} />\n          </div>\n\n        </OptimizationCharts>\n\n        <OptimizationCharts className='multi-charts'>\n          <div className='row'><h2>Resources Plots</h2></div>\n          {Object.values(currentResources || {}).map((r, i) => {\n            if (Object.keys(r.distribution.xy).length === 0) return null\n            return (<div key={r.id} className={`chart ${r.name.replaceAll(\" \", \"-\").replace(\".\", \"\")}-chart`}>\n              <div className='chart-title '>\n                <h4 >{`(${r.type}) ${r.name}`}</h4>\n                <DownloadChart classNames={r.name.replaceAll(\" \", \"-\").replace(\".\", \"\") + \"-chart\"}>\n                  Download\n                </DownloadChart>\n              </div>\n              <ResourcePlot dist={r.distribution.xy} title={`(${r.type}) ${r.name}`} color={plot_color_palette.ResourcePlot.allResources[i % plot_color_palette.ResourcePlot.allResources.length]} />\n            </div>)\n          }\n          )}\n        </OptimizationCharts>\n      </>\n\n      <div className='row'>\n        <TertiaryButton variant='contained' onClick={goPrev}>\n          Back\n        </TertiaryButton>\n        <PrimaryButton onClick={() => setOpenModal(true)} variant='contained'>\n          Export Report\n        </PrimaryButton>\n        <PrimaryButton onClick={() => toPDF('test')} variant='contained'>\n          Export Report\n        </PrimaryButton>\n      </div>\n    </OptimizationContainer>\n\n    <Modal isLoading={openModal} onClose={() => setOpenModal(false)} title=\"Export Optimized File\" content={<div className='row'>\n      <PrimaryButton onClick={() => {\n        reader.exportToOriginal(optimizer?.project)\n      }} variant='contained'>Original Format</PrimaryButton> &nbsp;\n      <PrimaryButton onClick={() => {\n        if (optimizer) {\n          optimizer.exportToExcel()\n        }\n      }} variant='contained'>Excel</PrimaryButton>\n\n    </div>} />\n  </>\n  )\n}","import jsPDF from 'jspdf';\nimport html2canvas from 'html2canvas';\n\nexport default function toPDF(ele) {\n  const pdf = new jsPDF();\n  const element = document.getElementById(ele);\n  const pages = Math.ceil(element.clientHeight / pdf.internal.pageSize.getHeight());\n\n  let currentPosition = 0;\n  let currentPage = 1;\n\n  const addPage = () => {\n    pdf.addPage();\n    currentPosition = -(currentPage * pdf.internal.pageSize.getHeight());\n    currentPage++;\n  };\n\n  const capturePage = () => {\n    return html2canvas(element, {\n      y: currentPosition,\n      windowWidth: document.documentElement.scrollWidth,\n      windowHeight: pdf.internal.pageSize.getHeight(),\n    }).then((canvas) => {\n      const imageData = canvas.toDataURL('image/png');\n      const width = pdf.internal.pageSize.getWidth();\n      const height = (canvas.height * width) / canvas.width;\n\n      pdf.addImage(imageData, 'PNG', 0, 0, width, height);\n\n      if (currentPage <= pages) {\n        addPage();\n        return capturePage();\n      }\n\n      return Promise.resolve();\n    });\n  };\n\n  addPage();\n  capturePage().then(() => {\n    pdf.save('document.pdf');\n  });\n}\n","import styled from 'styled-components'\n\nexport const DashboardContainer = styled.div`\n  width: 100%;\n  box-sizing: border-box;\n  .content {\n    margin: 20px auto;\n    width: 1200px;\n    max-width: 100%;\n    border-radius: 6px;\n    box-sizing: border-box;\n    .legend {\n      display: flex;\n      justify-content: flex-start;\n      align-items: flex-start;\n      position: relative;\n      font-size: ${(props) => props.theme.fontSizes.xxs};\n      width: 100%;\n      margin-top: 20px;\n      flex-wrap: wrap;\n      &:has(.resources) {\n        margin-bottom: 30px;\n      }\n      .item {\n        display: flex; \n        justify-content: flex-start;\n        align-items: center;\n        margin-right: 23px;\n        &.resources {\n          width: 14%;\n          margin-right: 0 !important;\n        }\n      }\n      .circle {\n        margin-right: 5px;\n      }\n    }\n    \n    .chip { \n      display: inline-flex;\n      border-radius: 16px;\n      padding: 0 12px;\n      white-space: nowrap;    \n      font-weight: normal;\n      background: ${(props) => props.theme.colors.grey[2]};\n      margin: 0 5px;\n      &.primary {\n        color: ${(props) => props.theme.colors.white};\n        background: ${(props) => props.theme.colors.turquoise[4]};\n      }\n    }\n  }\n`","import React, { useState, useEffect, useReducer } from 'react'\n\nimport Breadcrumb from '../../components/Breadcrumb'\nimport Header from '../../components/Header'\n\nimport InputData from './InputData'\nimport BaselineSummary from './BaselineSummary'\nimport OptimizedSummary from './OptimizedSummary'\nimport DetailedReport from './DetailedReport'\n\nimport { DashboardContainer } from './styled'\n\nconst steps = [\n  'Input Data',\n  'Baseline Summary',\n  'Optimized Summary',\n  'Optimized Report',\n]\n\nexport default function Dashboard() {\n  const [navAt, setNavAt] = useState(0)\n  const [project, setProject] = useState(null)\n  const [optimizer, setOptimizer] = useState(null)\n  const [reader, setReader] = useState(null)\n  const [isPresetsReset, setIsPresetsReset] = useState(false)\n  const [selectedPreset, setSelectedPreset] = useState('Balanced')\n  const [selectedResultIndex, setSelectedResultIndex] = useState(-1)\n  const [uploadedFile, setUploadedFile] = useState()\n  const [fileName, setFileName] = useState('No file chosen')\n  const [constraintsFileName, setConstraintsFileName] =\n    useState('No file chosen')\n  const [_, forceUpdate] = useReducer((x) => x + 1, 0)\n\n  function optimizePresets(project) {\n    if (!project) return\n  }\n\n  useEffect(() => {\n    if (isPresetsReset) {\n      optimizePresets(project)\n      setNavAt(1)\n      setIsPresetsReset(false)\n    }\n  }, [isPresetsReset])\n\n  let componentToRender = null\n\n  const baseline = {\n    tasks: optimizer?.plannedproject?.tasks,\n    resources: optimizer && Object.keys(optimizer?.plannedproject?.resources),\n    duration: optimizer?.plannedproject?.output?.projectDurationDays.data,\n    critical_paths: optimizer && Object.values(optimizer?.plannedproject?.output?.criticalPath)\n  }\n\n\n  if (navAt === 0)\n    componentToRender = (\n      <InputData\n        fileName={fileName}\n        setFileName={setFileName}\n        uploadedFile={uploadedFile}\n        setUploadedFile={setUploadedFile}\n        setReader={setReader}\n        constraintsFileName={constraintsFileName}\n        setConstraintsFileName={setConstraintsFileName}\n        optimizer={optimizer}\n        setOptimizer={setOptimizer}\n        updateProject={(p) => {\n          setProject(p)\n        }}\n        goNext={() => {\n          setIsPresetsReset(true)\n        }}\n      />\n    )\n  else if (navAt === 1)\n    componentToRender = (\n      <BaselineSummary\n        baseline={baseline}\n        constraintsFileName={constraintsFileName}\n        optimizer={optimizer}\n        selectedPreset={selectedPreset}\n        setSelectedPreset={setSelectedPreset}\n        selectedResultIndex={selectedResultIndex}\n        setSelectedResultIndex={setSelectedResultIndex}\n        goPrev={() => {\n          setNavAt(navAt - 1)\n        }}\n        goNext={() => {\n          setNavAt(navAt + 1)\n          if (selectedResultIndex === -1)\n            setSelectedResultIndex(\n              optimizer?.results[selectedPreset].length - 1\n            )\n        }}\n      />\n    )\n  else if (navAt === 2)\n    componentToRender = (\n      <OptimizedSummary\n        baseline={baseline}\n        optimizer={optimizer}\n        selectedPreset={selectedPreset}\n        setSelectedPreset={setSelectedPreset}\n        selectedResultIndex={selectedResultIndex}\n        setSelectedResultIndex={setSelectedResultIndex}\n        tasks={project?.tasks}\n        results={optimizer?.results}\n        goPrev={() => {\n          setNavAt(navAt - 1)\n        }}\n        goNext={() => {\n          setNavAt(navAt + 1)\n        }}\n      />\n    )\n  else if (navAt === 3)\n    componentToRender = (\n      <DetailedReport\n        optimizer={optimizer}\n        reader={reader}\n        selectedPreset={selectedPreset}\n        selectedResultIndex={selectedResultIndex}\n        handleSelectResultIndex={(index) => {\n          setSelectedResultIndex(index)\n        }}\n        goPrev={() => {\n          setNavAt(navAt - 1)\n        }}\n        goNext={() => {\n          setNavAt(navAt + 1)\n        }}\n      />\n    )\n\n  return (\n    <>\n      <Header />\n      <Breadcrumb\n        navAt={navAt}\n        steps={steps}\n        navigate={(step) => {\n          setNavAt(step)\n        }}\n        disabled={\n          navAt === 0 ||\n          project === undefined\n        }\n      />\n\n      <DashboardContainer>\n        <div className=\"content\">{componentToRender}</div>\n      </DashboardContainer>\n    </>\n  )\n}\n","require('dotenv').config()\n\nexport async function login(body) {\n  return await fetch(`${process.env.REACT_APP_API_URL}/auth/login`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(body)\n  })\n}\n\nexport async function requestResetPassword(body) {\n  return await fetch(`${process.env.REACT_APP_API_URL}/auth/request-reset-password`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(body)\n  })\n}\n\nexport async function resetPassword(body) {\n  return await fetch(`${process.env.REACT_APP_API_URL}/auth/reset-password`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(body)\n  })\n}","/* eslint-disable no-useless-escape */\nexport function validateEmail(email) {\n  const re = /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i\n  const result = re.test(String(email).toLowerCase())\n  if (result) { return { result: result, message: '' } }\n\n  return { result: result, message: 'Please enter a valid email address.' }\n}\n\nexport function validatePassword(password) {\n  if (password.length < 8)\n    return { result: false, message: 'Password must be 8 characters or longer.' }\n\n  const upperReg = /[A-Z]+/\n  if (upperReg.test(password))\n    return { result: false, message: 'Password must contain an uppercase letter.' }\n\n  const lowerReg = /[A-Z]+/\n  if (lowerReg.test(password))\n    return { result: false, message: 'Password must contain a lowercase letter.' }\n\n  const numberReg = /[0-9]+/\n  if (numberReg.test(password))\n    return { result: false, message: 'Password must contain a number.' }\n\n  return { result: true, message: '' }\n}","import styled from 'styled-components'\n\nexport const LoginContainer = styled.div`\n  width: 100vw;\n  height: 100vh;\n  background: linear-gradient(\n    180deg,\n    rgba(255, 204, 103, 0.195) 0%,\n    rgba(0, 145, 132, 0.3) 100%\n  );\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  .MuiBox-root {\n    width: 450px;\n    h3 {\n      margin-top: 0;\n    }\n    &.form {\n      background: #ffffff;\n      padding: 30px;\n      border-radius: 16px;\n      box-sizing: border-box;\n      /* display: flex;\n      flex-direction: column; */\n      .MuiTextField-root {\n        width: 100%;\n        margin-bottom: 12px;\n      }\n    }\n    img.logo {\n      width: 300px;\n    }\n  }\n  .divider {\n    position: relative;\n    &:after { \n      content: '';\n      position: absolute;\n      height: 1px;\n      width: 100%;\n      background: #eeeeee;\n      left: 0;\n      bottom: 0;\n    }\n  }\n  .error {\n    color: rgb(0, 190, 174) !important;\n    font-weight: 700;\n  }\n`\n","import React, { useState, useRef } from 'react'\n\nimport Box from '@mui/material/Box'\nimport TextField from '@mui/material/TextField'\nimport { useSignIn } from 'react-auth-kit'\nimport { useNavigate } from 'react-router-dom'\n\nimport { login } from '../../lib/fetch'\n\nimport { validateEmail } from '../../utils/validator'\nimport { LoginContainer } from './styled'\n\nimport FLlogo from '../../assets/images/logo.png'\nimport { PrimaryButton } from 'src/styled'\n\nexport default function Login() {\n  const emailRef = useRef()\n  const [emailErrorMessage, setEmailErrorMessage] = useState('')\n  const [errorMessage, setErrorMessage] = useState('')\n\n  const passwordRef = useRef()\n  const [passwordErrorMessage, setPasswordErrorMessage] = useState('')\n\n  const signIn = useSignIn()\n  const navigate = useNavigate()\n\n  async function handleLogin() {\n    const validEmail = validateEmail(emailRef.current.value)\n    setEmailErrorMessage(validEmail.message)\n    if (!validEmail.result) { return }\n\n    const response = await login({\n      email: emailRef.current.value,\n      password: passwordRef.current.value,\n    })\n      .then((response) => {\n        return response.json()\n      })\n      .then((data) => {\n        if (data.resetPasswordRequired) {\n          // setErrorMessage('Your account has no password, you will be taken to reset password page')\n          setErrorMessage('This is your first time logging in, you will be redirected to set up a password.')\n          navigate('/#/reset-password?email=' + emailRef.current.value)\n          return\n        } else if (data.accessToken) {\n          signIn({\n            token: data.accessToken,\n            expiresIn: 24 * 60, // in minutes -> 1 day\n            tokenType: 'Bearer',\n            authState: { email: emailRef.current.value },\n          })\n          navigate('/')\n          return\n        } else {\n          setErrorMessage(data.message)\n          return\n        }\n      })\n      .catch((error) => {\n        console.error('Error:', error)\n      })\n  }\n\n  function handleForgotPassword() {\n    navigate('/reset-password?email=' + emailRef.current.value)\n  }\n\n  return (\n    <LoginContainer>\n      <Box\n        sx={{ display: 'flex', flexDirection: 'column', marginRight: '40px' }}\n      >\n        <img className='logo' src={FLlogo} alt='Frontline Logo' />\n        <h1>Optimization Platform</h1>\n        Find the best sequence of activities with\n        optimal resource loading to ace your project\n      </Box>\n      <Box className='form' component='form' noValidate autoComplete='off'>\n        <h2>Log In</h2>\n        <p className='error'>{errorMessage}</p>\n        <TextField\n          label='Email'\n          name='Email'\n          id='Email'\n          variant='outlined'\n          inputRef={emailRef}\n          error={emailErrorMessage !== ''}\n          helperText={emailErrorMessage}\n          placeholder='sample@googlemail.com'\n        />\n        <TextField\n          label='Password'\n          name='Password'\n          type='password'\n          id='Password'\n          variant='outlined'\n          inputRef={passwordRef}\n          error={passwordErrorMessage !== ''}\n          helperText={passwordErrorMessage}\n          placeholder='******'\n        />\n        <div className='row'>\n          <span style={{ textDecoration: 'underline', cursor: 'pointer' }} onClick={handleForgotPassword}>Forgot password</span>\n          <PrimaryButton variant='contained' onClick={handleLogin}>\n            Login\n          </PrimaryButton>\n        </div><br />\n        <div className='divider' />\n        <h2>New Users</h2>\n        Our platform is currently only available to subscribers.\n        Please contact <a href='mailto:sales@frontlinec.com' target=\"_blank\" rel=\"noreferrer\">sales@frontlinec.com</a> to request a demo.\n      </Box>\n    </LoginContainer>\n  )\n}\n","import styled from 'styled-components'\n\nexport const ResetContainer = styled.div`\n  width: 100vw;\n  height: 100vh;\n  background: linear-gradient(\n    180deg,\n    rgba(255, 204, 103, 0.195) 0%,\n    rgba(0, 145, 132, 0.3) 100%\n  );\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  .MuiBox-root {\n    width: 450px;\n    h3 {\n      margin-top: 0;\n    }\n    &.form {\n      background: #ffffff;\n      padding: 30px;\n      border-radius: 16px;\n      box-sizing: border-box;\n      /* display: flex;\n      flex-direction: column; */\n      p {\n        color: #888888;\n        &.error {\n          color: rgb(0, 190, 174);\n          font-weight: 700;\n          margin-bottom: 15px;\n        }\n      }\n      .MuiTextField-root {\n        width: 100%;\n        margin-bottom: 12px;\n      }\n    }\n    img.logo {\n      width: 300px;\n    }\n  }\n`\n","import React, { useState } from 'react'\nimport { useSearchParams } from 'react-router-dom'\n\nimport Box from '@mui/material/Box'\nimport TextField from '@mui/material/TextField'\n\nimport { requestResetPassword, resetPassword } from '../../lib/fetch'\nimport { useNavigate } from 'react-router-dom'\n\nimport FLlogo from '../../assets/images/logo.png'\n\nimport { validateEmail } from '../../utils/validator'\nimport { LoginContainer } from '../Login/styled'\n\nimport { ResetContainer } from './styled'\nimport { PrimaryButton, SecondaryButton } from 'src/styled'\n\nexport default function ResetPassword() {\n  const [searchParams, setSearchParams] = useSearchParams()\n  const [email, setEmail] = useState(searchParams.get('email') ? searchParams.get('email') : '')\n  const [password, setPassword] = useState('')\n  const [resetToken, setResetToken] = useState(searchParams.get('resetToken'))\n\n  const [errorMessage, setErrorMessage] = useState('')\n\n  const navigate = useNavigate()\n\n  async function handleRequestResetPassword() {\n    const validEmail = validateEmail(email)\n    setErrorMessage(validEmail.message)\n    if (!validEmail.result) { return }\n\n    const response = await requestResetPassword({ email: email })\n      .then(response => { return response.json() })\n      .then((data) => {\n        setErrorMessage('We have sent the password reset instructions to your email. Please note the link expires in 1 hour.')\n      })\n      .catch((error) => { console.error('Error:', error) })\n  }\n\n  async function handleResetPassword() {\n    const response = await resetPassword({ email: email, password: password, token: resetToken })\n      .then(response => { return response.json() })\n      .then((data) => {\n        setErrorMessage('Your password has been successfully reset!')\n        navigate('/')\n      })\n      .catch((error) => { console.error('Error:', error) })\n  }\n\n  function handleBackPage() {\n    navigate('/login')\n  }\n\n  if (resetToken)\n    return (\n      <LoginContainer>\n        <Box\n          sx={{ display: 'flex', flexDirection: 'column', marginRight: '40px' }}\n        >\n          <img className='logo' src={FLlogo} alt=\"Frontline Logo\" />\n          <h1>Optimization Platform</h1>\n          Find the best sequence of activities with\n          optimal resource loading to ace your project\n        </Box>\n        <Box className='form' component='form' noValidate autoComplete='off'>\n          <h2>Reset Password</h2>\n          {errorMessage}\n          <p>Your new password must be different from previous used passwords.</p>\n          <TextField label='Email' variant='outlined' value={email} disabled={true} />\n          <br />\n          <TextField label='Password' type='password' variant='outlined' value={password} onChange={e => setPassword(e.target.value)} />\n          <br />\n          <div className=\"row\">\n            <div />\n            <PrimaryButton variant='contained' onClick={handleResetPassword}>\n              Reset Password\n            </PrimaryButton>\n          </div>\n        </Box>\n      </LoginContainer>\n    )\n\n  return (\n    <>\n      <ResetContainer>\n        <Box\n          sx={{ display: 'flex', flexDirection: 'column', marginRight: '40px' }}\n          noValidate\n          autoComplete='off'\n        >\n          <img className='logo' src={FLlogo} alt=\"Frontline Logo\" />\n          <h1>Optimization Platform</h1>\n          Find the best sequence of activities with\n          optimal resource loading to ace your project\n        </Box>\n        <Box className='form' component='form' noValidate autoComplete='off'>\n          <h3>Reset Password</h3>\n          <p className='error'>{errorMessage}</p>\n          <p>Enter the email associated with your account and we'll send an email with instructions to reset your password.</p>\n          <TextField label='Email' placeholder=\"example@gmail.com\" variant='outlined' value={email} onChange={e => setEmail(e.target.value)} />\n          <div className=\"row\">\n            <SecondaryButton variant='contained' onClick={handleBackPage}>\n              Back\n            </SecondaryButton>\n            <PrimaryButton variant='contained' onClick={handleRequestResetPassword}>\n              Request\n            </PrimaryButton>\n          </div>\n        </Box>\n      </ResetContainer>\n    </>\n  )\n}","import React from 'react'\nimport { HashRouter, Route, Routes } from 'react-router-dom'\nimport { AuthProvider, RequireAuth } from 'react-auth-kit'\n\nimport { ThemeProvider } from 'styled-components'\nimport { theme } from './utils/theme'\n\nimport Dashboard from './pages/Dashboard'\nimport Login from './pages/Login'\nimport ResetPassword from './pages/ResetPassword'\n\nimport { AppContainer } from './styled'\n\nexport default function App() {\n  return (\n    <AuthProvider\n      authType={'cookie'}\n      authName={'_auth'}\n      cookieDomain={window.location.hostname}\n      cookieSecure={false}\n    >\n      <HashRouter>\n        <ThemeProvider theme={theme}>\n          <AppContainer>\n            <Routes>\n              <Route\n                path='/'\n                element={\n                  <RequireAuth loginPath='/login'>\n                    <Dashboard />\n                  </RequireAuth>\n                }\n              />\n              <Route path='/login' element={<Login />} />\n              <Route path='/reset-password' element={<ResetPassword />} />\n            </Routes>\n          </AppContainer>\n        </ThemeProvider>\n      </HashRouter>\n    </AuthProvider>\n  )\n}\n","import { AppRegistry } from 'react-native'\nimport App from './App'\nimport './main.css'\n\nAppRegistry.registerComponent('App', () => App)\n\nAppRegistry.runApplication('App', {\n  rootTag: document.getElementById('root')\n})\n","module.exports = __webpack_public_path__ + \"static/media/logo.458142f4.png\";"],"sourceRoot":""}